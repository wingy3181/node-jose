!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nodejose=e():t.nodejose=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=70)}([function(t,e,r){"use strict";(function(t){function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return o(this,t,e,r)}function o(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,r,n):"string"==typeof e?l(t,e,r):p(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return s(e),e<=0?i(t,e):void 0!==r?"string"==typeof n?i(t,e).fill(r,n):i(t,e).fill(r):i(t,e)}function c(t,e){if(s(e),t=i(t,e<0?0:0|d(e)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(e,r);t=i(t,n);var o=t.write(e,r);return o!==n&&(t=t.slice(0,o)),t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=i(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function p(t,e){if(a.isBuffer(e)){var r=0|d(e.length);return t=i(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Y(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&J(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),a.alloc(+t)}function g(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function E(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:C(t,e,r,n,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):C(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function C(t,e,r,n,i){function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(a(t,c)===a(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*o}else-1!==l&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(a(t,c+h)!==a(e,h)){f=!1;break}if(f)return c}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[r+o]=s}return o}function S(t,e,r,n){return Q(H(e,t.length-r),t,r,n)}function w(t,e,r,n){return Q(G(e),t,r,n)}function A(t,e,r,n){return w(t,e,r,n)}function T(t,e,r,n){return Q(W(e),t,r,n)}function _(t,e,r,n){return Q(q(e,t.length-r),t,r,n)}function I(t,e,r){return 0===e&&r===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:a<128&&(o=a);break;case 2:u=t[i+1],128==(192&u)&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return k(n)}function k(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$));return r}function N(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=z(t[a]);return i}function F(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function O(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-r,2);i<a;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function x(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-r,4);i<a;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function D(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,n,i){return i||D(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return i||D(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,r,n,52,8),r+8}function j(t){if(t=M(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function M(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var r,n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function q(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function W(t){return Z.toByteArray(j(t))}function Q(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Y(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var Z=r(71),X=r(72),J=r(73);e.Buffer=a,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,r){return o(null,t,e,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,r){return u(null,t,e,r)},a.allocUnsafe=function(t){return c(null,t)},a.allocUnsafeSlow=function(t){return c(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,r,n,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,u=Math.min(o,s),c=this.slice(n,i),l=t.slice(e,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return E(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return E(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return S(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return A(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=a.prototype;else{var i=e-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},a.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||L(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},a.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),X.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),X.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),X.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),X.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){U(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){U(this,t,e,r,Math.pow(2,8*r)-1,0)}var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},a.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);U(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);U(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,r){return K(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return K(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=a.isBuffer(t)?t:H(new a(t,n).toString()),u=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(12))},function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){(function(e,n,i,a){function o(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function s(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(f.isArrayBuffer(t)||f.isArrayBufferView(t))if(void 0!==a&&t instanceof a)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof s||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function u(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=f.isArrayBuffer(t),n=f.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}var c=r(1),l=r(78),f=t.exports=c.util=c.util||{};!function(){function t(t){if(t.source===window&&t.data===r){t.stopPropagation();var e=i.slice();i.length=0,e.forEach(function(t){t()})}}if(void 0!==e&&e.nextTick&&!e.browser)return f.nextTick=e.nextTick,void(f.setImmediate="function"==typeof n?n:f.nextTick);if("function"==typeof n)return f.setImmediate=function(){return n.apply(void 0,arguments)},void(f.nextTick=function(t){return n(t)});if(f.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var r="forge.setImmediate",i=[];f.setImmediate=function(t){i.push(t),1===i.length&&window.postMessage(r,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var a=Date.now(),o=!0,s=document.createElement("div"),i=[];new MutationObserver(function(){var t=i.slice();i.length=0,t.forEach(function(t){t()})}).observe(s,{attributes:!0});var u=f.setImmediate;f.setImmediate=function(t){Date.now()-a>15?(a=Date.now(),u(t)):(i.push(t),1===i.length&&s.setAttribute("a",o=!o))}}f.nextTick=f.setImmediate}(),f.isNodejs=void 0!==e&&e.versions&&e.versions.node,f.globalScope=function(){return f.isNodejs?i:"undefined"==typeof self?window:self}(),f.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},f.isArrayBufferView=function(t){return t&&f.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},f.ByteBuffer=s,f.ByteStringBuffer=s;f.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},f.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},f.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},f.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},f.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},f.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},f.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(f.encodeUtf8(t))},f.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},f.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},f.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},f.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},f.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},f.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},f.ByteStringBuffer.prototype.putInt=function(t,e){o(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},f.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},f.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},f.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},f.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},f.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},f.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},f.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},f.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},f.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},f.ByteStringBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},f.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},f.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},f.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},f.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},f.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},f.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},f.ByteStringBuffer.prototype.copy=function(){var t=f.createBuffer(this.data);return t.read=this.read,t},f.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},f.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},f.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},f.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},f.ByteStringBuffer.prototype.toString=function(){return f.decodeUtf8(this.bytes())},f.DataBuffer=u,f.DataBuffer.prototype.length=function(){return this.write-this.read},f.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},f.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},f.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},f.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},f.DataBuffer.prototype.putBytes=function(t,e){if(f.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(f.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof f.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&f.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof f.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var a;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.hex.decode(t,a,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.base64.decode(t,a,this.write),this;if("utf8"===e&&(t=f.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=f.binary.raw.decode(a),this;if("utf16"===e)return this.accommodate(2*t.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=f.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},f.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},f.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},f.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},f.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},f.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},f.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},f.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},f.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},f.DataBuffer.prototype.putInt=function(t,e){o(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},f.DataBuffer.prototype.putSignedInt=function(t,e){return o(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},f.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},f.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},f.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},f.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},f.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},f.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},f.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},f.DataBuffer.prototype.getInt=function(t){o(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},f.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},f.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},f.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},f.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},f.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},f.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},f.DataBuffer.prototype.copy=function(){return new f.DataBuffer(this)},f.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},f.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},f.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},f.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},f.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return f.binary.raw.encode(e);if("hex"===t)return f.binary.hex.encode(e);if("base64"===t)return f.binary.base64.encode(e);if("utf8"===t)return f.text.utf8.decode(e);if("utf16"===t)return f.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},f.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=f.encodeUtf8(t)),new f.ByteBuffer(t)},f.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},f.xorBytes=function(t,e,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+=a},f.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},f.bytesToHex=function(t){return f.createBuffer(t).toHex()},f.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";f.encode64=function(t,e){for(var r,n,i,a="",o="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),i=t.charCodeAt(s++),a+=h.charAt(r>>2),a+=h.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=h.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":h.charAt(63&i)),e&&a.length>e&&(o+=a.substr(0,e)+"\r\n",a=a.substr(e));return o+=a},f.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,a="",o=0;o<t.length;)e=p[t.charCodeAt(o++)-43],r=p[t.charCodeAt(o++)-43],n=p[t.charCodeAt(o++)-43],i=p[t.charCodeAt(o++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(a+=String.fromCharCode((3&n)<<6|i)));return a},f.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},f.decodeUtf8=function(t){return decodeURIComponent(escape(t))},f.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:l.encode,decode:l.decode}},f.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},f.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n},f.binary.hex.encode=f.bytesToHex,f.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(1&t.length&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n},f.binary.base64.encode=function(t,e){for(var r,n,i,a="",o="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],i=t[s++],a+=h.charAt(r>>2),a+=h.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=h.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":h.charAt(63&i)),e&&a.length>e&&(o+=a.substr(0,e)+"\r\n",a=a.substr(e));return o+=a},f.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,o,s,u=0,c=r;u<t.length;)i=p[t.charCodeAt(u++)-43],a=p[t.charCodeAt(u++)-43],o=p[t.charCodeAt(u++)-43],s=p[t.charCodeAt(u++)-43],n[c++]=i<<2|a>>4,64!==o&&(n[c++]=(15&a)<<4|o>>2,64!==s&&(n[c++]=(3&o)<<6|s));return e?c-r:n.subarray(0,c)},f.binary.base58.encode=function(t,e){return f.binary.baseN.encode(t,d,e)},f.binary.base58.decode=function(t,e){return f.binary.baseN.decode(t,d,e)},f.text={utf8:{},utf16:{}},f.text.utf8.encode=function(t,e,r){t=f.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n},f.text.utf8.decode=function(t){return f.decodeUtf8(String.fromCharCode.apply(null,t))},f.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,o=r,s=0;s<t.length;++s)i[o++]=t.charCodeAt(s),a+=2;return e?a-r:n},f.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},f.deflate=function(t,e,r){if(e=f.decode64(t.deflate(f.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},f.inflate=function(t,e,r){var n=t.inflate(f.encode64(e)).rval;return null===n?null:f.decode64(n)};var y=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=f.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},g=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(f.decode64(r))),r},v=function(t,e,r,n){var i=g(t,e);null===i&&(i={}),i[r]=n,y(t,e,i)},m=function(t,e,r){var n=g(t,e);return null!==n&&(n=r in n?n[r]:null),n},E=function(t,e,r){var n=g(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),y(t,e,n)}},C=function(t,e){y(t,e,null)},b=function(t,e,r){var n=null;void 0===r&&(r=["web","flash"]);var i,a=!1,o=null;for(var s in r){i=r[s];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),a="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(t){o=t}if(a)break}if(!a)throw o;return n};f.setItem=function(t,e,r,n,i){b(v,arguments,i)},f.getItem=function(t,e,r,n){return b(m,arguments,n)},f.removeItem=function(t,e,r,n){b(E,arguments,n)},f.clearItems=function(t,e,r){b(C,arguments,r)},f.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var S=null;f.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),n=0;n<r.length;n++){var i,a,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),a=r[n].substring(o+1)):(i=r[n],a=null),i in e||(e[i]=[]),i in Object.prototype||null===a||e[i].push(unescape(a))}return e};return void 0===t?(null===S&&(S="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=S):e=r(t),e},f.parseFragment=function(t){var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var i=e.split("/");return i.length>0&&""===i[0]&&i.shift(),{pathString:e,queryString:r,path:i,query:""===r?{}:f.getQueryVariables(r)}},f.makeRequest=function(t){var e=f.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,r){var n;return void 0===t?n=e.query:(n=e.query[t])&&void 0!==r&&(n=n[r]),n},getQueryLast:function(t,e){var n=r.getQuery(t);return n?n[n.length-1]:e}};return r},f.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},f.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var n=0,i=e.length;n<i;){var a=e[n++];if(n==i)t[a]=r;else{var o=a in t;(!o||o&&"object"!=typeof t[a]||o&&null===t[a])&&(t[a]={}),t=t[a]}}},f.getPath=function(t,e,r){for(var n=0,i=e.length,a=!0;a&&n<i&&"object"==typeof t&&null!==t;){var o=e[n++];a=o in t,a&&(t=t[o])}return a?t:r},f.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,n=e.length;r<n;){var i=e[r++];if(r==n)delete t[i];else{if(!(i in t)||"object"!=typeof t[i]||null===t[i])break;t=t[i]}}},f.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},f.format=function(t){for(var e,r,n=/%./g,i=0,a=[],o=0;e=n.exec(t);){r=t.substring(o,n.lastIndex-2),r.length>0&&a.push(r),o=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(t.substring(o)),a.join("")},f.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-c).toFixed(a).slice(2):"")},f.formatSize=function(t){return t=t>=1073741824?f.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?f.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?f.formatNumber(t/1024,0)+" KiB":f.formatNumber(t,0)+" bytes"},f.bytesFromIP=function(t){return-1!==t.indexOf(".")?f.bytesFromIPv4(t):-1!==t.indexOf(":")?f.bytesFromIPv6(t):null},f.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=f.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},f.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var r=2*(8-t.length+e),n=f.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var a=f.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},f.bytesToIP=function(t){return 4===t.length?f.bytesToIPv4(t):16===t.length?f.bytesToIPv6(t):null},f.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},f.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=f.bytesToHex(t[i]+t[i+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var o=r[r.length-1],s=e.length;o&&s===o.end+1?(o.end=s,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:s,end:s})}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),0===u.start&&e.unshift(""),7===u.end&&e.push(""))}return e.join(":")},f.estimateCores=function(t,e){function r(t,o,s){if(0===o){var u=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return f.cores=Math.max(1,u),URL.revokeObjectURL(a),e(null,f.cores)}n(s,function(e,n){t.push(i(s,n)),r(t,o-1,s)})}function n(t,e){for(var r=[],n=[],i=0;i<t;++i){var o=new Worker(a);o.addEventListener("message",function(i){if(n.push(i.data),n.length===t){for(var a=0;a<t;++a)r[a].terminate();e(null,n)}}),r.push(o)}for(var i=0;i<t;++i)r[i].postMessage(i)}function i(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],a=r[n]=[],o=0;o<t;++o)if(n!==o){var s=e[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in f&&!t.update)return e(null,f.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return f.cores=navigator.hardwareConcurrency,e(null,f.cores);if("undefined"==typeof Worker)return f.cores=1,e(null,f.cores);if("undefined"==typeof Blob)return f.cores=2,e(null,f.cores);var a=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}).call(e,r(15),r(76).setImmediate,r(12),r(0).Buffer)},function(t,e,r){"use strict";function n(t){t=t||{},this.name="",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}/*!
 * deps/forge.js - Forge Package Customization
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(1);r(17),r(9),r(28),r(29),r(46),r(30),r(18),r(47),r(79),r(81),r(52),r(49),r(35),r(10),r(32),r(48),r(84),r(2),n.prototype.start=function(){},n.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)e.putInt32(this._outBlock[n])},n.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)e.putInt32(this._outBlock[n])},function(){var t,e=n;t=function(){return new i.aes.Algorithm("AES",e)},i.cipher.registerAlgorithm("AES",t)}(),t.exports=i},function(t,e,r){"use strict";(function(e){function n(t,r){if(e.isBuffer(t))return t;if("string"==typeof t)return r=r||"binary","base64url"===r?a.base64url.decode(t):e.from(t,r);o.util.isArrayBufferView(t)?t=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteOffset+t.byteLength):o.util.isArrayBuffer(t)&&(t=new Uint8Array(t));return e.from(t)}function i(t){return e.from(o.random.getBytes(t),"binary")}/*!
 * util/index.js - Utilities Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var a,o=r(3);a={base64url:r(22),utf8:r(88),asBuffer:n,randomBytes:i},t.exports=a}).call(e,r(0).Buffer)},function(t,e,r){(function(t,n){var i;(function(){function a(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(n,o,r(o),t)}return n}function s(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function u(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function c(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function l(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function f(t,e){return!!(null==t?0:t.length)&&S(t,e,0)>-1}function h(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function p(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function d(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function y(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function g(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function v(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function m(t){return t.split("")}function E(t){return t.match(xe)||[]}function C(t,e,r){var n;return r(t,function(t,r,i){if(e(t,r,i))return n=r,!1}),n}function b(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function S(t,e,r){return e===e?Y(t,e,r):b(t,A,r)}function w(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function A(t){return t!==t}function T(t,e){var r=null==t?0:t.length;return r?N(t,e)/r:Ft}function _(t){return function(e){return null==e?rt:e[t]}}function I(t){return function(e){return null==t?rt:t[e]}}function B(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r}function k(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function N(t,e){for(var r,n=-1,i=t.length;++n<i;){var a=e(t[n]);a!==rt&&(r=r===rt?a:r+a)}return r}function R(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function P(t,e){return p(e,function(e){return[e,t[e]]})}function F(t){return function(e){return t(e)}}function L(t,e){return p(e,function(e){return t[e]})}function U(t,e){return t.has(e)}function O(t,e){for(var r=-1,n=t.length;++r<n&&S(e,t[r],0)>-1;);return r}function x(t,e){for(var r=t.length;r--&&S(e,t[r],0)>-1;);return r}function D(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}function K(t){return"\\"+Ar[t]}function V(t,e){return null==t?rt:t[e]}function j(t){return yr.test(t)}function M(t){return gr.test(t)}function z(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function G(t,e){return function(r){return t(e(r))}}function q(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==ut||(t[r]=ut,a[i++]=r)}return a}function W(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function Q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Y(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function Z(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}function X(t){return j(t)?$(t):jr(t)}function J(t){return j(t)?tt(t):m(t)}function $(t){for(var e=pr.lastIndex=0;pr.test(t);)++e;return e}function tt(t){return t.match(pr)||[]}function et(t){return t.match(dr)||[]}var rt,nt=200,it="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",ot="__lodash_hash_undefined__",st=500,ut="__lodash_placeholder__",ct=1,lt=2,ft=4,ht=1,pt=2,dt=1,yt=2,gt=4,vt=8,mt=16,Et=32,Ct=64,bt=128,St=256,wt=512,At=30,Tt="...",_t=800,It=16,Bt=1,kt=2,Nt=1/0,Rt=9007199254740991,Pt=1.7976931348623157e308,Ft=NaN,Lt=4294967295,Ut=Lt-1,Ot=Lt>>>1,xt=[["ary",bt],["bind",dt],["bindKey",yt],["curry",vt],["curryRight",mt],["flip",wt],["partial",Et],["partialRight",Ct],["rearg",St]],Dt="[object Arguments]",Kt="[object Array]",Vt="[object AsyncFunction]",jt="[object Boolean]",Mt="[object Date]",zt="[object DOMException]",Ht="[object Error]",Gt="[object Function]",qt="[object GeneratorFunction]",Wt="[object Map]",Qt="[object Number]",Yt="[object Null]",Zt="[object Object]",Xt="[object Proxy]",Jt="[object RegExp]",$t="[object Set]",te="[object String]",ee="[object Symbol]",re="[object Undefined]",ne="[object WeakMap]",ie="[object WeakSet]",ae="[object ArrayBuffer]",oe="[object DataView]",se="[object Float32Array]",ue="[object Float64Array]",ce="[object Int8Array]",le="[object Int16Array]",fe="[object Int32Array]",he="[object Uint8Array]",pe="[object Uint8ClampedArray]",de="[object Uint16Array]",ye="[object Uint32Array]",ge=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ee=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,be=RegExp(Ee.source),Se=RegExp(Ce.source),we=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(ke.source),Re=/^\s+|\s+$/g,Pe=/^\s+/,Fe=/\s+$/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,xe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/\\(\\)?/g,Ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,je=/^[-+]0x[0-9a-f]+$/i,Me=/^0b[01]+$/i,ze=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Ge=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,We=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ye="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xe="["+Ze+"]",Je="["+Ye+"]",$e="[a-z\\xdf-\\xf6\\xf8-\\xff]",tr="[^\\ud800-\\udfff"+Ze+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",er="\\ud83c[\\udffb-\\udfff]",rr="(?:\\ud83c[\\udde6-\\uddff]){2}",nr="[\\ud800-\\udbff][\\udc00-\\udfff]",ir="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ar="(?:"+$e+"|"+tr+")",or="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sr="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rr,nr].join("|")+")[\\ufe0e\\ufe0f]?"+or+")*",ur="[\\ufe0e\\ufe0f]?"+or+sr,cr="(?:"+["[\\u2700-\\u27bf]",rr,nr].join("|")+")"+ur,lr="(?:"+["[^\\ud800-\\udfff]"+Je+"?",Je,rr,nr,"[\\ud800-\\udfff]"].join("|")+")",fr=RegExp("['’]","g"),hr=RegExp(Je,"g"),pr=RegExp(er+"(?="+er+")|"+lr+ur,"g"),dr=RegExp([ir+"?"+$e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Xe,ir,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Xe,ir+ar,"$"].join("|")+")",ir+"?"+ar+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ir+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",cr].join("|"),"g"),yr=RegExp("[\\u200d\\ud800-\\udfff"+Ye+"\\ufe0e\\ufe0f]"),gr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mr=-1,Er={};Er[se]=Er[ue]=Er[ce]=Er[le]=Er[fe]=Er[he]=Er[pe]=Er[de]=Er[ye]=!0,Er[Dt]=Er[Kt]=Er[ae]=Er[jt]=Er[oe]=Er[Mt]=Er[Ht]=Er[Gt]=Er[Wt]=Er[Qt]=Er[Zt]=Er[Jt]=Er[$t]=Er[te]=Er[ne]=!1;var Cr={};Cr[Dt]=Cr[Kt]=Cr[ae]=Cr[oe]=Cr[jt]=Cr[Mt]=Cr[se]=Cr[ue]=Cr[ce]=Cr[le]=Cr[fe]=Cr[Wt]=Cr[Qt]=Cr[Zt]=Cr[Jt]=Cr[$t]=Cr[te]=Cr[ee]=Cr[he]=Cr[pe]=Cr[de]=Cr[ye]=!0,Cr[Ht]=Cr[Gt]=Cr[ne]=!1;var br={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Sr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ar={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tr=parseFloat,_r=parseInt,Ir="object"==typeof t&&t&&t.Object===Object&&t,Br="object"==typeof self&&self&&self.Object===Object&&self,kr=Ir||Br||Function("return this")(),Nr="object"==typeof e&&e&&!e.nodeType&&e,Rr=Nr&&"object"==typeof n&&n&&!n.nodeType&&n,Pr=Rr&&Rr.exports===Nr,Fr=Pr&&Ir.process,Lr=function(){try{var t=Rr&&Rr.require&&Rr.require("util").types;return t||Fr&&Fr.binding&&Fr.binding("util")}catch(t){}}(),Ur=Lr&&Lr.isArrayBuffer,Or=Lr&&Lr.isDate,xr=Lr&&Lr.isMap,Dr=Lr&&Lr.isRegExp,Kr=Lr&&Lr.isSet,Vr=Lr&&Lr.isTypedArray,jr=_("length"),Mr=I(br),zr=I(Sr),Hr=I(wr),Gr=function t(e){function r(t){if(eu(t)&&!ph(t)&&!(t instanceof m)){if(t instanceof i)return t;if(hl.call(t,"__wrapped__"))return Xa(t)}return new i(t)}function n(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function m(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function I(){var t=new m(this.__wrapped__);return t.__actions__=Pi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pi(this.__views__),t}function Y(){if(this.__filtered__){var t=new m(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function $(){var t=this.__wrapped__.value(),e=this.__dir__,r=ph(t),n=e<0,i=r?t.length:0,a=ba(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=n?s:o-1,l=this.__iteratees__,f=l.length,h=0,p=Ml(u,this.__takeCount__);if(!r||!n&&i==u&&p==u)return yi(t,this.__actions__);var d=[];t:for(;u--&&h<p;){c+=e;for(var y=-1,g=t[c];++y<f;){var v=l[y],m=v.iteratee,E=v.type,C=m(g);if(E==kt)g=C;else if(!C){if(E==Bt)continue t;break t}}d[h++]=g}return d}function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function xe(){this.__data__=Jl?Jl(null):{},this.size=0}function Ye(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(Jl){var r=e[t];return r===ot?rt:r}return hl.call(e,t)?e[t]:rt}function Xe(t){var e=this.__data__;return Jl?e[t]!==rt:hl.call(e,t)}function Je(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jl&&e===rt?ot:e,this}function $e(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function tr(){this.__data__=[],this.size=0}function er(t){var e=this.__data__,r=qr(e,t);return!(r<0)&&(r==e.length-1?e.pop():_l.call(e,r,1),--this.size,!0)}function rr(t){var e=this.__data__,r=qr(e,t);return r<0?rt:e[r][1]}function nr(t){return qr(this.__data__,t)>-1}function ir(t,e){var r=this.__data__,n=qr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ar(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function or(){this.size=0,this.__data__={hash:new tt,map:new(Ql||$e),string:new tt}}function sr(t){var e=va(this,t).delete(t);return this.size-=e?1:0,e}function ur(t){return va(this,t).get(t)}function cr(t){return va(this,t).has(t)}function lr(t,e){var r=va(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function pr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ar;++e<r;)this.add(t[e])}function dr(t){return this.__data__.set(t,ot),this}function yr(t){return this.__data__.has(t)}function gr(t){var e=this.__data__=new $e(t);this.size=e.size}function br(){this.__data__=new $e,this.size=0}function Sr(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function wr(t){return this.__data__.get(t)}function Ar(t){return this.__data__.has(t)}function Ir(t,e){var r=this.__data__;if(r instanceof $e){var n=r.__data__;if(!Ql||n.length<nt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ar(n)}return r.set(t,e),this.size=r.size,this}function Br(t,e){var r=ph(t),n=!r&&hh(t),i=!r&&!n&&yh(t),a=!r&&!n&&!i&&Ch(t),o=r||n||i||a,s=o?R(t.length,al):[],u=s.length;for(var c in t)!e&&!hl.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ka(c,u))||s.push(c);return s}function Nr(t){var e=t.length;return e?t[Zn(0,e-1)]:rt}function Rr(t,e){return Wa(Pi(t),Jr(e,0,t.length))}function Fr(t){return Wa(Pi(t))}function Lr(t,e,r){(r===rt||js(t[e],r))&&(r!==rt||e in t)||Zr(t,e,r)}function jr(t,e,r){var n=t[e];hl.call(t,e)&&js(n,r)&&(r!==rt||e in t)||Zr(t,e,r)}function qr(t,e){for(var r=t.length;r--;)if(js(t[r][0],e))return r;return-1}function Wr(t,e,r,n){return ff(t,function(t,i,a){e(n,t,r(t),a)}),n}function Qr(t,e){return t&&Fi(e,Ou(e),t)}function Yr(t,e){return t&&Fi(e,xu(e),t)}function Zr(t,e,r){"__proto__"==e&&Nl?Nl(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Xr(t,e){for(var r=-1,n=e.length,i=Jc(n),a=null==t;++r<n;)i[r]=a?rt:Fu(t,e[r]);return i}function Jr(t,e,r){return t===t&&(r!==rt&&(t=t<=r?t:r),e!==rt&&(t=t>=e?t:e)),t}function $r(t,e,r,n,i,a){var o,u=e&ct,c=e&lt,l=e&ft;if(r&&(o=i?r(t,n,i,a):r(t)),o!==rt)return o;if(!tu(t))return t;var f=ph(t);if(f){if(o=Aa(t),!u)return Pi(t,o)}else{var h=wf(t),p=h==Gt||h==qt;if(yh(t))return Si(t,u);if(h==Zt||h==Dt||p&&!i){if(o=c||p?{}:Ta(t),!u)return c?Ui(t,Yr(o,t)):Li(t,Qr(o,t))}else{if(!Cr[h])return i?t:{};o=_a(t,h,u)}}a||(a=new gr);var d=a.get(t);if(d)return d;a.set(t,o),Eh(t)?t.forEach(function(n){o.add($r(n,e,r,n,t,a))}):vh(t)&&t.forEach(function(n,i){o.set(i,$r(n,e,r,i,t,a))});var y=l?c?pa:ha:c?xu:Ou,g=f?rt:y(t);return s(g||t,function(n,i){g&&(i=n,n=t[i]),jr(o,i,$r(n,e,r,i,t,a))}),o}function tn(t){var e=Ou(t);return function(r){return en(r,t,e)}}function en(t,e,r){var n=r.length;if(null==t)return!n;for(t=nl(t);n--;){var i=r[n],a=e[i],o=t[i];if(o===rt&&!(i in t)||!a(o))return!1}return!0}function rn(t,e,r){if("function"!=typeof t)throw new ol(at);return _f(function(){t.apply(rt,r)},e)}function nn(t,e,r,n){var i=-1,a=f,o=!0,s=t.length,u=[],c=e.length;if(!s)return u;r&&(e=p(e,F(r))),n?(a=h,o=!1):e.length>=nt&&(a=U,o=!1,e=new pr(e));t:for(;++i<s;){var l=t[i],d=null==r?l:r(l);if(l=n||0!==l?l:0,o&&d===d){for(var y=c;y--;)if(e[y]===d)continue t;u.push(l)}else a(e,d,n)||u.push(l)}return u}function an(t,e){var r=!0;return ff(t,function(t,n,i){return r=!!e(t,n,i)}),r}function on(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(null!=o&&(s===rt?o===o&&!hu(o):r(o,s)))var s=o,u=a}return u}function sn(t,e,r,n){var i=t.length;for(r=mu(r),r<0&&(r=-r>i?0:i+r),n=n===rt||n>i?i:mu(n),n<0&&(n+=i),n=r>n?0:Eu(n);r<n;)t[r++]=e;return t}function un(t,e){var r=[];return ff(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function cn(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=Ba),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?cn(s,e-1,r,n,i):d(i,s):n||(i[i.length]=s)}return i}function ln(t,e){return t&&pf(t,e,Ou)}function fn(t,e){return t&&df(t,e,Ou)}function hn(t,e){return l(e,function(e){return Xs(t[e])})}function pn(t,e){e=Ci(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Qa(e[r++])];return r&&r==n?t:rt}function dn(t,e,r){var n=e(t);return ph(t)?n:d(n,r(t))}function yn(t){return null==t?t===rt?re:Yt:kl&&kl in nl(t)?Ca(t):Va(t)}function gn(t,e){return t>e}function vn(t,e){return null!=t&&hl.call(t,e)}function mn(t,e){return null!=t&&e in nl(t)}function En(t,e,r){return t>=Ml(e,r)&&t<jl(e,r)}function Cn(t,e,r){for(var n=r?h:f,i=t[0].length,a=t.length,o=a,s=Jc(a),u=1/0,c=[];o--;){var l=t[o];o&&e&&(l=p(l,F(e))),u=Ml(l.length,u),s[o]=!r&&(e||i>=120&&l.length>=120)?new pr(o&&l):rt}l=t[0];var d=-1,y=s[0];t:for(;++d<i&&c.length<u;){var g=l[d],v=e?e(g):g;if(g=r||0!==g?g:0,!(y?U(y,v):n(c,v,r))){for(o=a;--o;){var m=s[o];if(!(m?U(m,v):n(t[o],v,r)))continue t}y&&y.push(v),c.push(g)}}return c}function bn(t,e,r,n){return ln(t,function(t,i,a){e(n,r(t),i,a)}),n}function Sn(t,e,r){e=Ci(e,t),t=Ma(t,e);var n=null==t?t:t[Qa(vo(e))];return null==n?rt:a(n,t,r)}function wn(t){return eu(t)&&yn(t)==Dt}function An(t){return eu(t)&&yn(t)==ae}function Tn(t){return eu(t)&&yn(t)==Mt}function _n(t,e,r,n,i){return t===e||(null==t||null==e||!eu(t)&&!eu(e)?t!==t&&e!==e:In(t,e,r,n,_n,i))}function In(t,e,r,n,i,a){var o=ph(t),s=ph(e),u=o?Kt:wf(t),c=s?Kt:wf(e);u=u==Dt?Zt:u,c=c==Dt?Zt:c;var l=u==Zt,f=c==Zt,h=u==c;if(h&&yh(t)){if(!yh(e))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new gr),o||Ch(t)?ua(t,e,r,n,i,a):ca(t,e,u,r,n,i,a);if(!(r&ht)){var p=l&&hl.call(t,"__wrapped__"),d=f&&hl.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,g=d?e.value():e;return a||(a=new gr),i(y,g,r,n,a)}}return!!h&&(a||(a=new gr),la(t,e,r,n,i,a))}function Bn(t){return eu(t)&&wf(t)==Wt}function kn(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=nl(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var u=s[0],c=t[u],l=s[1];if(o&&s[2]){if(c===rt&&!(u in t))return!1}else{var f=new gr;if(n)var h=n(c,l,u,t,e,f);if(!(h===rt?_n(l,c,ht|pt,n,f):h))return!1}}return!0}function Nn(t){return!(!tu(t)||La(t))&&(Xs(t)?ml:ze).test(Ya(t))}function Rn(t){return eu(t)&&yn(t)==Jt}function Pn(t){return eu(t)&&wf(t)==$t}function Fn(t){return eu(t)&&$s(t.length)&&!!Er[yn(t)]}function Ln(t){return"function"==typeof t?t:null==t?_c:"object"==typeof t?ph(t)?Vn(t[0],t[1]):Kn(t):Lc(t)}function Un(t){if(!Ua(t))return Vl(t);var e=[];for(var r in nl(t))hl.call(t,r)&&"constructor"!=r&&e.push(r);return e}function On(t){if(!tu(t))return Ka(t);var e=Ua(t),r=[];for(var n in t)("constructor"!=n||!e&&hl.call(t,n))&&r.push(n);return r}function xn(t,e){return t<e}function Dn(t,e){var r=-1,n=Ms(t)?Jc(t.length):[];return ff(t,function(t,i,a){n[++r]=e(t,i,a)}),n}function Kn(t){var e=ma(t);return 1==e.length&&e[0][2]?xa(e[0][0],e[0][1]):function(r){return r===t||kn(r,t,e)}}function Vn(t,e){return Ra(t)&&Oa(e)?xa(Qa(t),e):function(r){var n=Fu(r,t);return n===rt&&n===e?Uu(r,t):_n(e,n,ht|pt)}}function jn(t,e,r,n,i){t!==e&&pf(e,function(a,o){if(i||(i=new gr),tu(a))Mn(t,e,o,r,jn,n,i);else{var s=n?n(Ha(t,o),a,o+"",t,e,i):rt;s===rt&&(s=a),Lr(t,o,s)}},xu)}function Mn(t,e,r,n,i,a,o){var s=Ha(t,r),u=Ha(e,r),c=o.get(u);if(c)return void Lr(t,r,c);var l=a?a(s,u,r+"",t,e,o):rt,f=l===rt;if(f){var h=ph(u),p=!h&&yh(u),d=!h&&!p&&Ch(u);l=u,h||p||d?ph(s)?l=s:zs(s)?l=Pi(s):p?(f=!1,l=Si(u,!0)):d?(f=!1,l=Ii(u,!0)):l=[]:cu(u)||hh(u)?(l=s,hh(s)?l=bu(s):tu(s)&&!Xs(s)||(l=Ta(u))):f=!1}f&&(o.set(u,l),i(l,u,n,a,o),o.delete(u)),Lr(t,r,l)}function zn(t,e){var r=t.length;if(r)return e+=e<0?r:0,ka(e,r)?t[e]:rt}function Hn(t,e,r){var n=-1;return e=p(e.length?e:[_c],F(ga())),k(Dn(t,function(t,r,i){return{criteria:p(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return ki(t,e,r)})}function Gn(t,e){return qn(t,e,function(e,r){return Uu(t,r)})}function qn(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=pn(t,o);r(s,o)&&ri(a,Ci(o,t),s)}return a}function Wn(t){return function(e){return pn(e,t)}}function Qn(t,e,r,n){var i=n?w:S,a=-1,o=e.length,s=t;for(t===e&&(e=Pi(e)),r&&(s=p(t,F(r)));++a<o;)for(var u=0,c=e[a],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==t&&_l.call(s,u,1),_l.call(t,u,1);return t}function Yn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;ka(i)?_l.call(t,i,1):hi(t,i)}}return t}function Zn(t,e){return t+Ul(Gl()*(e-t+1))}function Xn(t,e,r,n){for(var i=-1,a=jl(Ll((e-t)/(r||1)),0),o=Jc(a);a--;)o[n?a:++i]=t,t+=r;return o}function Jn(t,e){var r="";if(!t||e<1||e>Rt)return r;do{e%2&&(r+=t),(e=Ul(e/2))&&(t+=t)}while(e);return r}function $n(t,e){return If(ja(t,e,_c),t+"")}function ti(t){return Nr(Yu(t))}function ei(t,e){var r=Yu(t);return Wa(r,Jr(e,0,r.length))}function ri(t,e,r,n){if(!tu(t))return t;e=Ci(e,t);for(var i=-1,a=e.length,o=a-1,s=t;null!=s&&++i<a;){var u=Qa(e[i]),c=r;if(i!=o){var l=s[u];c=n?n(l,u,s):rt,c===rt&&(c=tu(l)?l:ka(e[i+1])?[]:{})}jr(s,u,c),s=s[u]}return t}function ni(t){return Wa(Yu(t))}function ii(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=Jc(i);++n<i;)a[n]=t[n+e];return a}function ai(t,e){var r;return ff(t,function(t,n,i){return!(r=e(t,n,i))}),!!r}function oi(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e===e&&i<=Ot){for(;n<i;){var a=n+i>>>1,o=t[a];null!==o&&!hu(o)&&(r?o<=e:o<e)?n=a+1:i=a}return i}return si(t,e,_c,r)}function si(t,e,r,n){e=r(e);for(var i=0,a=null==t?0:t.length,o=e!==e,s=null===e,u=hu(e),c=e===rt;i<a;){var l=Ul((i+a)/2),f=r(t[l]),h=f!==rt,p=null===f,d=f===f,y=hu(f);if(o)var g=n||d;else g=c?d&&(n||h):s?d&&h&&(n||!p):u?d&&h&&!p&&(n||!y):!p&&!y&&(n?f<=e:f<e);g?i=l+1:a=l}return Ml(a,Ut)}function ui(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r],s=e?e(o):o;if(!r||!js(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ci(t){return"number"==typeof t?t:hu(t)?Ft:+t}function li(t){if("string"==typeof t)return t;if(ph(t))return p(t,li)+"";if(hu(t))return cf?cf.call(t):"";var e=t+"";return"0"==e&&1/t==-Nt?"-0":e}function fi(t,e,r){var n=-1,i=f,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=h;else if(a>=nt){var c=e?null:Ef(t);if(c)return W(c);o=!1,i=U,u=new pr}else u=e?[]:s;t:for(;++n<a;){var l=t[n],p=e?e(l):l;if(l=r||0!==l?l:0,o&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(l)}else i(u,p,r)||(u!==s&&u.push(p),s.push(l))}return s}function hi(t,e){return e=Ci(e,t),null==(t=Ma(t,e))||delete t[Qa(vo(e))]}function pi(t,e,r,n){return ri(t,e,r(pn(t,e)),n)}function di(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?ii(t,n?0:a,n?a+1:i):ii(t,n?a+1:0,n?i:a)}function yi(t,e){var r=t;return r instanceof m&&(r=r.value()),y(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},r)}function gi(t,e,r){var n=t.length;if(n<2)return n?fi(t[0]):[];for(var i=-1,a=Jc(n);++i<n;)for(var o=t[i],s=-1;++s<n;)s!=i&&(a[i]=nn(a[i]||o,t[s],e,r));return fi(cn(a,1),e,r)}function vi(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:rt;r(o,t[n],s)}return o}function mi(t){return zs(t)?t:[]}function Ei(t){return"function"==typeof t?t:_c}function Ci(t,e){return ph(t)?t:Ra(t,e)?[t]:Bf(wu(t))}function bi(t,e,r){var n=t.length;return r=r===rt?n:r,!e&&r>=n?t:ii(t,e,r)}function Si(t,e){if(e)return t.slice();var r=t.length,n=Sl?Sl(r):new t.constructor(r);return t.copy(n),n}function wi(t){var e=new t.constructor(t.byteLength);return new bl(e).set(new bl(t)),e}function Ai(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Ti(t){var e=new t.constructor(t.source,Ve.exec(t));return e.lastIndex=t.lastIndex,e}function _i(t){return uf?nl(uf.call(t)):{}}function Ii(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Bi(t,e){if(t!==e){var r=t!==rt,n=null===t,i=t===t,a=hu(t),o=e!==rt,s=null===e,u=e===e,c=hu(e);if(!s&&!c&&!a&&t>e||a&&o&&u&&!s&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!a&&!c&&t<e||c&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!u)return-1}return 0}function ki(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var u=Bi(i[n],a[n]);if(u){if(n>=s)return u;return u*("desc"==r[n]?-1:1)}}return t.index-e.index}function Ni(t,e,r,n){for(var i=-1,a=t.length,o=r.length,s=-1,u=e.length,c=jl(a-o,0),l=Jc(u+c),f=!n;++s<u;)l[s]=e[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Ri(t,e,r,n){for(var i=-1,a=t.length,o=-1,s=r.length,u=-1,c=e.length,l=jl(a-s,0),f=Jc(l+c),h=!n;++i<l;)f[i]=t[i];for(var p=i;++u<c;)f[p+u]=e[u];for(;++o<s;)(h||i<a)&&(f[p+r[o]]=t[i++]);return f}function Pi(t,e){var r=-1,n=t.length;for(e||(e=Jc(n));++r<n;)e[r]=t[r];return e}function Fi(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=n?n(r[s],t[s],s,r,t):rt;u===rt&&(u=t[s]),i?Zr(r,s,u):jr(r,s,u)}return r}function Li(t,e){return Fi(t,bf(t),e)}function Ui(t,e){return Fi(t,Sf(t),e)}function Oi(t,e){return function(r,n){var i=ph(r)?o:Wr,a=e?e():{};return i(r,t,ga(n,2),a)}}function xi(t){return $n(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:rt,o=i>2?r[2]:rt;for(a=t.length>3&&"function"==typeof a?(i--,a):rt,o&&Na(r[0],r[1],o)&&(a=i<3?rt:a,i=1),e=nl(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}function Di(t,e){return function(r,n){if(null==r)return r;if(!Ms(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=nl(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function Ki(t){return function(e,r,n){for(var i=-1,a=nl(e),o=n(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===r(a[u],u,a))break}return e}}function Vi(t,e,r){function n(){return(this&&this!==kr&&this instanceof n?a:t).apply(i?r:this,arguments)}var i=e&dt,a=zi(t);return n}function ji(t){return function(e){e=wu(e);var r=j(e)?J(e):rt,n=r?r[0]:e.charAt(0),i=r?bi(r,1).join(""):e.slice(1);return n[t]()+i}}function Mi(t){return function(e){return y(bc(ec(e).replace(fr,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=lf(t.prototype),n=t.apply(r,e);return tu(n)?n:r}}function Hi(t,e,r){function n(){for(var o=arguments.length,s=Jc(o),u=o,c=ya(n);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:q(s,c);return(o-=l.length)<r?ea(t,e,Wi,n.placeholder,rt,s,l,rt,rt,r-o):a(this&&this!==kr&&this instanceof n?i:t,this,s)}var i=zi(t);return n}function Gi(t){return function(e,r,n){var i=nl(e);if(!Ms(e)){var a=ga(r,3);e=Ou(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:rt}}function qi(t){return fa(function(e){var r=e.length,n=r,a=i.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if("function"!=typeof o)throw new ol(at);if(a&&!s&&"wrapper"==da(o))var s=new i([],!0)}for(n=s?n:r;++n<r;){o=e[n];var u=da(o),c="wrapper"==u?Cf(o):rt;s=c&&Fa(c[0])&&c[1]==(bt|vt|Et|St)&&!c[4].length&&1==c[9]?s[da(c[0])].apply(s,c[3]):1==o.length&&Fa(o)?s[u]():s.thru(o)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&ph(n))return s.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}})}function Wi(t,e,r,n,i,a,o,s,u,c){function l(){for(var v=arguments.length,m=Jc(v),E=v;E--;)m[E]=arguments[E];if(d)var C=ya(l),b=D(m,C);if(n&&(m=Ni(m,n,i,d)),a&&(m=Ri(m,a,o,d)),v-=b,d&&v<c){var S=q(m,C);return ea(t,e,Wi,l.placeholder,r,m,S,s,u,c-v)}var w=h?r:this,A=p?w[t]:t;return v=m.length,s?m=za(m,s):y&&v>1&&m.reverse(),f&&u<v&&(m.length=u),this&&this!==kr&&this instanceof l&&(A=g||zi(A)),A.apply(w,m)}var f=e&bt,h=e&dt,p=e&yt,d=e&(vt|mt),y=e&wt,g=p?rt:zi(t);return l}function Qi(t,e){return function(r,n){return bn(r,t,e(n),{})}}function Yi(t,e){return function(r,n){var i;if(r===rt&&n===rt)return e;if(r!==rt&&(i=r),n!==rt){if(i===rt)return n;"string"==typeof r||"string"==typeof n?(r=li(r),n=li(n)):(r=ci(r),n=ci(n)),i=t(r,n)}return i}}function Zi(t){return fa(function(e){return e=p(e,F(ga())),$n(function(r){var n=this;return t(e,function(t){return a(t,n,r)})})})}function Xi(t,e){e=e===rt?" ":li(e);var r=e.length;if(r<2)return r?Jn(e,t):e;var n=Jn(e,Ll(t/X(e)));return j(e)?bi(J(n),0,t).join(""):n.slice(0,t)}function Ji(t,e,r,n){function i(){for(var e=-1,u=arguments.length,c=-1,l=n.length,f=Jc(l+u),h=this&&this!==kr&&this instanceof i?s:t;++c<l;)f[c]=n[c];for(;u--;)f[c++]=arguments[++e];return a(h,o?r:this,f)}var o=e&dt,s=zi(t);return i}function $i(t){return function(e,r,n){return n&&"number"!=typeof n&&Na(e,r,n)&&(r=n=rt),e=vu(e),r===rt?(r=e,e=0):r=vu(r),n=n===rt?e<r?1:-1:vu(n),Xn(e,r,n,t)}}function ta(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Cu(e),r=Cu(r)),t(e,r)}}function ea(t,e,r,n,i,a,o,s,u,c){var l=e&vt,f=l?o:rt,h=l?rt:o,p=l?a:rt,d=l?rt:a;e|=l?Et:Ct,(e&=~(l?Ct:Et))&gt||(e&=~(dt|yt));var y=[t,e,i,p,f,d,h,s,u,c],g=r.apply(rt,y);return Fa(t)&&Tf(g,y),g.placeholder=n,Ga(g,t,e)}function ra(t){var e=rl[t];return function(t,r){if(t=Cu(t),(r=null==r?0:Ml(mu(r),292))&&Dl(t)){var n=(wu(t)+"e").split("e");return n=(wu(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function na(t){return function(e){var r=wf(e);return r==Wt?H(e):r==$t?Q(e):P(e,t(e))}}function ia(t,e,r,n,i,a,o,s){var u=e&yt;if(!u&&"function"!=typeof t)throw new ol(at);var c=n?n.length:0;if(c||(e&=~(Et|Ct),n=i=rt),o=o===rt?o:jl(mu(o),0),s=s===rt?s:mu(s),c-=i?i.length:0,e&Ct){var l=n,f=i;n=i=rt}var h=u?rt:Cf(t),p=[t,e,r,n,i,l,f,a,o,s];if(h&&Da(p,h),t=p[0],e=p[1],r=p[2],n=p[3],i=p[4],s=p[9]=p[9]===rt?u?0:t.length:jl(p[9]-c,0),!s&&e&(vt|mt)&&(e&=~(vt|mt)),e&&e!=dt)d=e==vt||e==mt?Hi(t,e,s):e!=Et&&e!=(dt|Et)||i.length?Wi.apply(rt,p):Ji(t,e,r,n);else var d=Vi(t,e,r);return Ga((h?yf:Tf)(d,p),t,e)}function aa(t,e,r,n){return t===rt||js(t,cl[r])&&!hl.call(n,r)?e:t}function oa(t,e,r,n,i,a){return tu(t)&&tu(e)&&(a.set(e,t),jn(t,e,rt,oa,a),a.delete(e)),t}function sa(t){return cu(t)?rt:t}function ua(t,e,r,n,i,a){var o=r&ht,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var l=-1,f=!0,h=r&pt?new pr:rt;for(a.set(t,e),a.set(e,t);++l<s;){var p=t[l],d=e[l];if(n)var y=o?n(d,p,l,e,t,a):n(p,d,l,t,e,a);if(y!==rt){if(y)continue;f=!1;break}if(h){if(!v(e,function(t,e){if(!U(h,e)&&(p===t||i(p,t,r,n,a)))return h.push(e)})){f=!1;break}}else if(p!==d&&!i(p,d,r,n,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ca(t,e,r,n,i,a,o){switch(r){case oe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ae:return!(t.byteLength!=e.byteLength||!a(new bl(t),new bl(e)));case jt:case Mt:case Qt:return js(+t,+e);case Ht:return t.name==e.name&&t.message==e.message;case Jt:case te:return t==e+"";case Wt:var s=H;case $t:var u=n&ht;if(s||(s=W),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;n|=pt,o.set(t,e);var l=ua(s(t),s(e),n,i,a,o);return o.delete(t),l;case ee:if(uf)return uf.call(t)==uf.call(e)}return!1}function la(t,e,r,n,i,a){var o=r&ht,s=ha(t),u=s.length;if(u!=ha(e).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in e:hl.call(e,l)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var h=!0;a.set(t,e),a.set(e,t);for(var p=o;++c<u;){l=s[c];var d=t[l],y=e[l];if(n)var g=o?n(y,d,l,e,t,a):n(d,y,l,t,e,a);if(!(g===rt?d===y||i(d,y,r,n,a):g)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(h=!1)}return a.delete(t),a.delete(e),h}function fa(t){return If(ja(t,rt,uo),t+"")}function ha(t){return dn(t,Ou,bf)}function pa(t){return dn(t,xu,Sf)}function da(t){for(var e=t.name+"",r=tf[e],n=hl.call(tf,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function ya(t){return(hl.call(r,"placeholder")?r:t).placeholder}function ga(){var t=r.iteratee||Ic;return t=t===Ic?Ln:t,arguments.length?t(arguments[0],arguments[1]):t}function va(t,e){var r=t.__data__;return Pa(e)?r["string"==typeof e?"string":"hash"]:r.map}function ma(t){for(var e=Ou(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Oa(i)]}return e}function Ea(t,e){var r=V(t,e);return Nn(r)?r:rt}function Ca(t){var e=hl.call(t,kl),r=t[kl];try{t[kl]=rt;var n=!0}catch(t){}var i=yl.call(t);return n&&(e?t[kl]=r:delete t[kl]),i}function ba(t,e,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Ml(e,t+o);break;case"takeRight":t=jl(t,e-o)}}return{start:t,end:e}}function Sa(t){var e=t.match(Ue);return e?e[1].split(Oe):[]}function wa(t,e,r){e=Ci(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=Qa(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&$s(i)&&ka(o,i)&&(ph(t)||hh(t))}function Aa(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&hl.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Ta(t){return"function"!=typeof t.constructor||Ua(t)?{}:lf(wl(t))}function _a(t,e,r){var n=t.constructor;switch(e){case ae:return wi(t);case jt:case Mt:return new n(+t);case oe:return Ai(t,r);case se:case ue:case ce:case le:case fe:case he:case pe:case de:case ye:return Ii(t,r);case Wt:return new n;case Qt:case te:return new n(t);case Jt:return Ti(t);case $t:return new n;case ee:return _i(t)}}function Ia(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Le,"{\n/* [wrapped with "+e+"] */\n")}function Ba(t){return ph(t)||hh(t)||!!(Il&&t&&t[Il])}function ka(t,e){var r=typeof t;return!!(e=null==e?Rt:e)&&("number"==r||"symbol"!=r&&Ge.test(t))&&t>-1&&t%1==0&&t<e}function Na(t,e,r){if(!tu(r))return!1;var n=typeof e;return!!("number"==n?Ms(r)&&ka(e,r.length):"string"==n&&e in r)&&js(r[e],t)}function Ra(t,e){if(ph(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!hu(t))||(Ie.test(t)||!_e.test(t)||null!=e&&t in nl(e))}function Pa(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Fa(t){var e=da(t),n=r[e];if("function"!=typeof n||!(e in m.prototype))return!1;if(t===n)return!0;var i=Cf(n);return!!i&&t===i[0]}function La(t){return!!dl&&dl in t}function Ua(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||cl)}function Oa(t){return t===t&&!tu(t)}function xa(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==rt||t in nl(r)))}}function Da(t,e){var r=t[1],n=e[1],i=r|n,a=i<(dt|yt|bt),o=n==bt&&r==vt||n==bt&&r==St&&t[7].length<=e[8]||n==(bt|St)&&e[7].length<=e[8]&&r==vt;if(!a&&!o)return t;n&dt&&(t[2]=e[2],i|=r&dt?0:gt);var s=e[3];if(s){var u=t[3];t[3]=u?Ni(u,s,e[4]):s,t[4]=u?q(t[3],ut):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Ri(u,s,e[6]):s,t[6]=u?q(t[5],ut):e[6]),s=e[7],s&&(t[7]=s),n&bt&&(t[8]=null==t[8]?e[8]:Ml(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Ka(t){var e=[];if(null!=t)for(var r in nl(t))e.push(r);return e}function Va(t){return yl.call(t)}function ja(t,e,r){return e=jl(e===rt?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=jl(n.length-e,0),s=Jc(o);++i<o;)s[i]=n[e+i];i=-1;for(var u=Jc(e+1);++i<e;)u[i]=n[i];return u[e]=r(s),a(t,this,u)}}function Ma(t,e){return e.length<2?t:pn(t,ii(e,0,-1))}function za(t,e){for(var r=t.length,n=Ml(e.length,r),i=Pi(t);n--;){var a=e[n];t[n]=ka(a,r)?i[a]:rt}return t}function Ha(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Ga(t,e,r){var n=e+"";return If(t,Ia(n,Za(Sa(n),r)))}function qa(t){var e=0,r=0;return function(){var n=zl(),i=It-(n-r);if(r=n,i>0){if(++e>=_t)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function Wa(t,e){var r=-1,n=t.length,i=n-1;for(e=e===rt?n:e;++r<e;){var a=Zn(r,i),o=t[a];t[a]=t[r],t[r]=o}return t.length=e,t}function Qa(t){if("string"==typeof t||hu(t))return t;var e=t+"";return"0"==e&&1/t==-Nt?"-0":e}function Ya(t){if(null!=t){try{return fl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Za(t,e){return s(xt,function(r){var n="_."+r[0];e&r[1]&&!f(t,n)&&t.push(n)}),t.sort()}function Xa(t){if(t instanceof m)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Pi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ja(t,e,r){e=(r?Na(t,e,r):e===rt)?1:jl(mu(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var i=0,a=0,o=Jc(Ll(n/e));i<n;)o[a++]=ii(t,i,i+=e);return o}function $a(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i}function to(){var t=arguments.length;if(!t)return[];for(var e=Jc(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return d(ph(r)?Pi(r):[r],cn(e,1))}function eo(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:mu(e),ii(t,e<0?0:e,n)):[]}function ro(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:mu(e),e=n-e,ii(t,0,e<0?0:e)):[]}function no(t,e){return t&&t.length?di(t,ga(e,3),!0,!0):[]}function io(t,e){return t&&t.length?di(t,ga(e,3),!0):[]}function ao(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&Na(t,e,r)&&(r=0,n=i),sn(t,e,r,n)):[]}function oo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:mu(r);return i<0&&(i=jl(n+i,0)),b(t,ga(e,3),i)}function so(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return r!==rt&&(i=mu(r),i=r<0?jl(n+i,0):Ml(i,n-1)),b(t,ga(e,3),i,!0)}function uo(t){return(null==t?0:t.length)?cn(t,1):[]}function co(t){return(null==t?0:t.length)?cn(t,Nt):[]}function lo(t,e){return(null==t?0:t.length)?(e=e===rt?1:mu(e),cn(t,e)):[]}function fo(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n}function ho(t){return t&&t.length?t[0]:rt}function po(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:mu(r);return i<0&&(i=jl(n+i,0)),S(t,e,i)}function yo(t){return(null==t?0:t.length)?ii(t,0,-1):[]}function go(t,e){return null==t?"":Kl.call(t,e)}function vo(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function mo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return r!==rt&&(i=mu(r),i=i<0?jl(n+i,0):Ml(i,n-1)),e===e?Z(t,e,i):b(t,A,i,!0)}function Eo(t,e){return t&&t.length?zn(t,mu(e)):rt}function Co(t,e){return t&&t.length&&e&&e.length?Qn(t,e):t}function bo(t,e,r){return t&&t.length&&e&&e.length?Qn(t,e,ga(r,2)):t}function So(t,e,r){return t&&t.length&&e&&e.length?Qn(t,e,rt,r):t}function wo(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=ga(e,3);++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Yn(t,i),r}function Ao(t){return null==t?t:ql.call(t)}function To(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Na(t,e,r)?(e=0,r=n):(e=null==e?0:mu(e),r=r===rt?n:mu(r)),ii(t,e,r)):[]}function _o(t,e){return oi(t,e)}function Io(t,e,r){return si(t,e,ga(r,2))}function Bo(t,e){var r=null==t?0:t.length;if(r){var n=oi(t,e);if(n<r&&js(t[n],e))return n}return-1}function ko(t,e){return oi(t,e,!0)}function No(t,e,r){return si(t,e,ga(r,2),!0)}function Ro(t,e){if(null==t?0:t.length){var r=oi(t,e,!0)-1;if(js(t[r],e))return r}return-1}function Po(t){return t&&t.length?ui(t):[]}function Fo(t,e){return t&&t.length?ui(t,ga(e,2)):[]}function Lo(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]}function Uo(t,e,r){return t&&t.length?(e=r||e===rt?1:mu(e),ii(t,0,e<0?0:e)):[]}function Oo(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:mu(e),e=n-e,ii(t,e<0?0:e,n)):[]}function xo(t,e){return t&&t.length?di(t,ga(e,3),!1,!0):[]}function Do(t,e){return t&&t.length?di(t,ga(e,3)):[]}function Ko(t){return t&&t.length?fi(t):[]}function Vo(t,e){return t&&t.length?fi(t,ga(e,2)):[]}function jo(t,e){return e="function"==typeof e?e:rt,t&&t.length?fi(t,rt,e):[]}function Mo(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(zs(t))return e=jl(t.length,e),!0}),R(e,function(e){return p(t,_(e))})}function zo(t,e){if(!t||!t.length)return[];var r=Mo(t);return null==e?r:p(r,function(t){return a(e,rt,t)})}function Ho(t,e){return vi(t||[],e||[],jr)}function Go(t,e){return vi(t||[],e||[],ri)}function qo(t){var e=r(t);return e.__chain__=!0,e}function Wo(t,e){return e(t),t}function Qo(t,e){return e(t)}function Yo(){return qo(this)}function Zo(){return new i(this.value(),this.__chain__)}function Xo(){this.__values__===rt&&(this.__values__=gu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?rt:this.__values__[this.__index__++]}}function Jo(){return this}function $o(t){for(var e,r=this;r instanceof n;){var i=Xa(r);i.__index__=0,i.__values__=rt,e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e}function ts(){var t=this.__wrapped__;if(t instanceof m){var e=t;return this.__actions__.length&&(e=new m(this)),e=e.reverse(),e.__actions__.push({func:Qo,args:[Ao],thisArg:rt}),new i(e,this.__chain__)}return this.thru(Ao)}function es(){return yi(this.__wrapped__,this.__actions__)}function rs(t,e,r){var n=ph(t)?c:an;return r&&Na(t,e,r)&&(e=rt),n(t,ga(e,3))}function ns(t,e){return(ph(t)?l:un)(t,ga(e,3))}function is(t,e){return cn(ls(t,e),1)}function as(t,e){return cn(ls(t,e),Nt)}function os(t,e,r){return r=r===rt?1:mu(r),cn(ls(t,e),r)}function ss(t,e){return(ph(t)?s:ff)(t,ga(e,3))}function us(t,e){return(ph(t)?u:hf)(t,ga(e,3))}function cs(t,e,r,n){t=Ms(t)?t:Yu(t),r=r&&!n?mu(r):0;var i=t.length;return r<0&&(r=jl(i+r,0)),fu(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&S(t,e,r)>-1}function ls(t,e){return(ph(t)?p:Dn)(t,ga(e,3))}function fs(t,e,r,n){return null==t?[]:(ph(e)||(e=null==e?[]:[e]),r=n?rt:r,ph(r)||(r=null==r?[]:[r]),Hn(t,e,r))}function hs(t,e,r){var n=ph(t)?y:B,i=arguments.length<3;return n(t,ga(e,4),r,i,ff)}function ps(t,e,r){var n=ph(t)?g:B,i=arguments.length<3;return n(t,ga(e,4),r,i,hf)}function ds(t,e){return(ph(t)?l:un)(t,Bs(ga(e,3)))}function ys(t){return(ph(t)?Nr:ti)(t)}function gs(t,e,r){return e=(r?Na(t,e,r):e===rt)?1:mu(e),(ph(t)?Rr:ei)(t,e)}function vs(t){return(ph(t)?Fr:ni)(t)}function ms(t){if(null==t)return 0;if(Ms(t))return fu(t)?X(t):t.length;var e=wf(t);return e==Wt||e==$t?t.size:Un(t).length}function Es(t,e,r){var n=ph(t)?v:ai;return r&&Na(t,e,r)&&(e=rt),n(t,ga(e,3))}function Cs(t,e){if("function"!=typeof e)throw new ol(at);return t=mu(t),function(){if(--t<1)return e.apply(this,arguments)}}function bs(t,e,r){return e=r?rt:e,e=t&&null==e?t.length:e,ia(t,bt,rt,rt,rt,rt,e)}function Ss(t,e){var r;if("function"!=typeof e)throw new ol(at);return t=mu(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=rt),r}}function ws(t,e,r){e=r?rt:e;var n=ia(t,vt,rt,rt,rt,rt,rt,e);return n.placeholder=ws.placeholder,n}function As(t,e,r){e=r?rt:e;var n=ia(t,mt,rt,rt,rt,rt,rt,e);return n.placeholder=As.placeholder,n}function Ts(t,e,r){function n(e){var r=h,n=p;return h=p=rt,m=e,y=t.apply(n,r)}function i(t){return m=t,g=_f(s,e),E?n(t):y}function a(t){var r=t-v,n=t-m,i=e-r;return C?Ml(i,d-n):i}function o(t){var r=t-v,n=t-m;return v===rt||r>=e||r<0||C&&n>=d}function s(){var t=eh();if(o(t))return u(t);g=_f(s,a(t))}function u(t){return g=rt,b&&h?n(t):(h=p=rt,y)}function c(){g!==rt&&mf(g),m=0,h=v=p=g=rt}function l(){return g===rt?y:u(eh())}function f(){var t=eh(),r=o(t);if(h=arguments,p=this,v=t,r){if(g===rt)return i(v);if(C)return mf(g),g=_f(s,e),n(v)}return g===rt&&(g=_f(s,e)),y}var h,p,d,y,g,v,m=0,E=!1,C=!1,b=!0;if("function"!=typeof t)throw new ol(at);return e=Cu(e)||0,tu(r)&&(E=!!r.leading,C="maxWait"in r,d=C?jl(Cu(r.maxWait)||0,e):d,b="trailing"in r?!!r.trailing:b),f.cancel=c,f.flush=l,f}function _s(t){return ia(t,wt)}function Is(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ol(at);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Is.Cache||ar),r}function Bs(t){if("function"!=typeof t)throw new ol(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ks(t){return Ss(2,t)}function Ns(t,e){if("function"!=typeof t)throw new ol(at);return e=e===rt?e:mu(e),$n(t,e)}function Rs(t,e){if("function"!=typeof t)throw new ol(at);return e=null==e?0:jl(mu(e),0),$n(function(r){var n=r[e],i=bi(r,0,e);return n&&d(i,n),a(t,this,i)})}function Ps(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new ol(at);return tu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ts(t,e,{leading:n,maxWait:e,trailing:i})}function Fs(t){return bs(t,1)}function Ls(t,e){return sh(Ei(e),t)}function Us(){if(!arguments.length)return[];var t=arguments[0];return ph(t)?t:[t]}function Os(t){return $r(t,ft)}function xs(t,e){return e="function"==typeof e?e:rt,$r(t,ft,e)}function Ds(t){return $r(t,ct|ft)}function Ks(t,e){return e="function"==typeof e?e:rt,$r(t,ct|ft,e)}function Vs(t,e){return null==e||en(t,e,Ou(e))}function js(t,e){return t===e||t!==t&&e!==e}function Ms(t){return null!=t&&$s(t.length)&&!Xs(t)}function zs(t){return eu(t)&&Ms(t)}function Hs(t){return!0===t||!1===t||eu(t)&&yn(t)==jt}function Gs(t){return eu(t)&&1===t.nodeType&&!cu(t)}function qs(t){if(null==t)return!0;if(Ms(t)&&(ph(t)||"string"==typeof t||"function"==typeof t.splice||yh(t)||Ch(t)||hh(t)))return!t.length;var e=wf(t);if(e==Wt||e==$t)return!t.size;if(Ua(t))return!Un(t).length;for(var r in t)if(hl.call(t,r))return!1;return!0}function Ws(t,e){return _n(t,e)}function Qs(t,e,r){r="function"==typeof r?r:rt;var n=r?r(t,e):rt;return n===rt?_n(t,e,rt,r):!!n}function Ys(t){if(!eu(t))return!1;var e=yn(t);return e==Ht||e==zt||"string"==typeof t.message&&"string"==typeof t.name&&!cu(t)}function Zs(t){return"number"==typeof t&&Dl(t)}function Xs(t){if(!tu(t))return!1;var e=yn(t);return e==Gt||e==qt||e==Vt||e==Xt}function Js(t){return"number"==typeof t&&t==mu(t)}function $s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Rt}function tu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function eu(t){return null!=t&&"object"==typeof t}function ru(t,e){return t===e||kn(t,e,ma(e))}function nu(t,e,r){return r="function"==typeof r?r:rt,kn(t,e,ma(e),r)}function iu(t){return uu(t)&&t!=+t}function au(t){if(Af(t))throw new tl(it);return Nn(t)}function ou(t){return null===t}function su(t){return null==t}function uu(t){return"number"==typeof t||eu(t)&&yn(t)==Qt}function cu(t){if(!eu(t)||yn(t)!=Zt)return!1;var e=wl(t);if(null===e)return!0;var r=hl.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&fl.call(r)==gl}function lu(t){return Js(t)&&t>=-Rt&&t<=Rt}function fu(t){return"string"==typeof t||!ph(t)&&eu(t)&&yn(t)==te}function hu(t){return"symbol"==typeof t||eu(t)&&yn(t)==ee}function pu(t){return t===rt}function du(t){return eu(t)&&wf(t)==ne}function yu(t){return eu(t)&&yn(t)==ie}function gu(t){if(!t)return[];if(Ms(t))return fu(t)?J(t):Pi(t);if(Bl&&t[Bl])return z(t[Bl]());var e=wf(t);return(e==Wt?H:e==$t?W:Yu)(t)}function vu(t){if(!t)return 0===t?t:0;if((t=Cu(t))===Nt||t===-Nt){return(t<0?-1:1)*Pt}return t===t?t:0}function mu(t){var e=vu(t),r=e%1;return e===e?r?e-r:e:0}function Eu(t){return t?Jr(mu(t),0,Lt):0}function Cu(t){if("number"==typeof t)return t;if(hu(t))return Ft;if(tu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Re,"");var r=Me.test(t);return r||He.test(t)?_r(t.slice(2),r?2:8):je.test(t)?Ft:+t}function bu(t){return Fi(t,xu(t))}function Su(t){return t?Jr(mu(t),-Rt,Rt):0===t?t:0}function wu(t){return null==t?"":li(t)}function Au(t,e){var r=lf(t);return null==e?r:Qr(r,e)}function Tu(t,e){return C(t,ga(e,3),ln)}function _u(t,e){return C(t,ga(e,3),fn)}function Iu(t,e){return null==t?t:pf(t,ga(e,3),xu)}function Bu(t,e){return null==t?t:df(t,ga(e,3),xu)}function ku(t,e){return t&&ln(t,ga(e,3))}function Nu(t,e){return t&&fn(t,ga(e,3))}function Ru(t){return null==t?[]:hn(t,Ou(t))}function Pu(t){return null==t?[]:hn(t,xu(t))}function Fu(t,e,r){var n=null==t?rt:pn(t,e);return n===rt?r:n}function Lu(t,e){return null!=t&&wa(t,e,vn)}function Uu(t,e){return null!=t&&wa(t,e,mn)}function Ou(t){return Ms(t)?Br(t):Un(t)}function xu(t){return Ms(t)?Br(t,!0):On(t)}function Du(t,e){var r={};return e=ga(e,3),ln(t,function(t,n,i){Zr(r,e(t,n,i),t)}),r}function Ku(t,e){var r={};return e=ga(e,3),ln(t,function(t,n,i){Zr(r,n,e(t,n,i))}),r}function Vu(t,e){return ju(t,Bs(ga(e)))}function ju(t,e){if(null==t)return{};var r=p(pa(t),function(t){return[t]});return e=ga(e),qn(t,r,function(t,r){return e(t,r[0])})}function Mu(t,e,r){e=Ci(e,t);var n=-1,i=e.length;for(i||(i=1,t=rt);++n<i;){var a=null==t?rt:t[Qa(e[n])];a===rt&&(n=i,a=r),t=Xs(a)?a.call(t):a}return t}function zu(t,e,r){return null==t?t:ri(t,e,r)}function Hu(t,e,r,n){return n="function"==typeof n?n:rt,null==t?t:ri(t,e,r,n)}function Gu(t,e,r){var n=ph(t),i=n||yh(t)||Ch(t);if(e=ga(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:tu(t)&&Xs(a)?lf(wl(t)):{}}return(i?s:ln)(t,function(t,n,i){return e(r,t,n,i)}),r}function qu(t,e){return null==t||hi(t,e)}function Wu(t,e,r){return null==t?t:pi(t,e,Ei(r))}function Qu(t,e,r,n){return n="function"==typeof n?n:rt,null==t?t:pi(t,e,Ei(r),n)}function Yu(t){return null==t?[]:L(t,Ou(t))}function Zu(t){return null==t?[]:L(t,xu(t))}function Xu(t,e,r){return r===rt&&(r=e,e=rt),r!==rt&&(r=Cu(r),r=r===r?r:0),e!==rt&&(e=Cu(e),e=e===e?e:0),Jr(Cu(t),e,r)}function Ju(t,e,r){return e=vu(e),r===rt?(r=e,e=0):r=vu(r),t=Cu(t),En(t,e,r)}function $u(t,e,r){if(r&&"boolean"!=typeof r&&Na(t,e,r)&&(e=r=rt),r===rt&&("boolean"==typeof e?(r=e,e=rt):"boolean"==typeof t&&(r=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=vu(t),e===rt?(e=t,t=0):e=vu(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=Gl();return Ml(t+i*(e-t+Tr("1e-"+((i+"").length-1))),e)}return Zn(t,e)}function tc(t){return qh(wu(t).toLowerCase())}function ec(t){return(t=wu(t))&&t.replace(qe,Mr).replace(hr,"")}function rc(t,e,r){t=wu(t),e=li(e);var n=t.length;r=r===rt?n:Jr(mu(r),0,n);var i=r;return(r-=e.length)>=0&&t.slice(r,i)==e}function nc(t){return t=wu(t),t&&Se.test(t)?t.replace(Ce,zr):t}function ic(t){return t=wu(t),t&&Ne.test(t)?t.replace(ke,"\\$&"):t}function ac(t,e,r){t=wu(t),e=mu(e);var n=e?X(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Xi(Ul(i),r)+t+Xi(Ll(i),r)}function oc(t,e,r){t=wu(t),e=mu(e);var n=e?X(t):0;return e&&n<e?t+Xi(e-n,r):t}function sc(t,e,r){t=wu(t),e=mu(e);var n=e?X(t):0;return e&&n<e?Xi(e-n,r)+t:t}function uc(t,e,r){return r||null==e?e=0:e&&(e=+e),Hl(wu(t).replace(Pe,""),e||0)}function cc(t,e,r){return e=(r?Na(t,e,r):e===rt)?1:mu(e),Jn(wu(t),e)}function lc(){var t=arguments,e=wu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fc(t,e,r){return r&&"number"!=typeof r&&Na(t,e,r)&&(e=r=rt),(r=r===rt?Lt:r>>>0)?(t=wu(t),t&&("string"==typeof e||null!=e&&!mh(e))&&!(e=li(e))&&j(t)?bi(J(t),0,r):t.split(e,r)):[]}function hc(t,e,r){return t=wu(t),r=null==r?0:Jr(mu(r),0,t.length),e=li(e),t.slice(r,r+e.length)==e}function pc(t,e,n){var i=r.templateSettings;n&&Na(t,e,n)&&(e=rt),t=wu(t),e=Th({},e,i,aa);var a,o,s=Th({},e.imports,i.imports,aa),u=Ou(s),c=L(s,u),l=0,f=e.interpolate||We,h="__p += '",p=il((e.escape||We).source+"|"+f.source+"|"+(f===Te?Ke:We).source+"|"+(e.evaluate||We).source+"|$","g"),d="//# sourceURL="+(hl.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++mr+"]")+"\n";t.replace(p,function(e,r,n,i,s,u){return n||(n=i),h+=t.slice(l,u).replace(Qe,K),r&&(a=!0,h+="' +\n__e("+r+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var y=hl.call(e,"variable")&&e.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(ge,""):h).replace(ve,"$1").replace(me,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Wh(function(){return el(u,d+"return "+h).apply(rt,c)});if(g.source=h,Ys(g))throw g;return g}function dc(t){return wu(t).toLowerCase()}function yc(t){return wu(t).toUpperCase()}function gc(t,e,r){if((t=wu(t))&&(r||e===rt))return t.replace(Re,"");if(!t||!(e=li(e)))return t;var n=J(t),i=J(e);return bi(n,O(n,i),x(n,i)+1).join("")}function vc(t,e,r){if((t=wu(t))&&(r||e===rt))return t.replace(Fe,"");if(!t||!(e=li(e)))return t;var n=J(t);return bi(n,0,x(n,J(e))+1).join("")}function mc(t,e,r){if((t=wu(t))&&(r||e===rt))return t.replace(Pe,"");if(!t||!(e=li(e)))return t;var n=J(t);return bi(n,O(n,J(e))).join("")}function Ec(t,e){var r=At,n=Tt;if(tu(e)){var i="separator"in e?e.separator:i;r="length"in e?mu(e.length):r,n="omission"in e?li(e.omission):n}t=wu(t);var a=t.length;if(j(t)){var o=J(t);a=o.length}if(r>=a)return t;var s=r-X(n);if(s<1)return n;var u=o?bi(o,0,s).join(""):t.slice(0,s);if(i===rt)return u+n;if(o&&(s+=u.length-s),mh(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=il(i.source,wu(Ve.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===rt?s:f)}}else if(t.indexOf(li(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+n}function Cc(t){return t=wu(t),t&&be.test(t)?t.replace(Ee,Hr):t}function bc(t,e,r){return t=wu(t),e=r?rt:e,e===rt?M(t)?et(t):E(t):t.match(e)||[]}function Sc(t){var e=null==t?0:t.length,r=ga();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new ol(at);return[r(t[0]),t[1]]}):[],$n(function(r){for(var n=-1;++n<e;){var i=t[n];if(a(i[0],this,r))return a(i[1],this,r)}})}function wc(t){return tn($r(t,ct))}function Ac(t){return function(){return t}}function Tc(t,e){return null==t||t!==t?e:t}function _c(t){return t}function Ic(t){return Ln("function"==typeof t?t:$r(t,ct))}function Bc(t){return Kn($r(t,ct))}function kc(t,e){return Vn(t,$r(e,ct))}function Nc(t,e,r){var n=Ou(e),i=hn(e,n);null!=r||tu(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=hn(e,Ou(e)));var a=!(tu(r)&&"chain"in r&&!r.chain),o=Xs(t);return s(i,function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__);return(r.__actions__=Pi(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,d([this.value()],arguments))})}),t}function Rc(){return kr._===this&&(kr._=vl),this}function Pc(){}function Fc(t){return t=mu(t),$n(function(e){return zn(e,t)})}function Lc(t){return Ra(t)?_(Qa(t)):Wn(t)}function Uc(t){return function(e){return null==t?rt:pn(t,e)}}function Oc(){return[]}function xc(){return!1}function Dc(){return{}}function Kc(){return""}function Vc(){return!0}function jc(t,e){if((t=mu(t))<1||t>Rt)return[];var r=Lt,n=Ml(t,Lt);e=ga(e),t-=Lt;for(var i=R(n,e);++r<t;)e(r);return i}function Mc(t){return ph(t)?p(t,Qa):hu(t)?[t]:Pi(Bf(wu(t)))}function zc(t){var e=++pl;return wu(t)+e}function Hc(t){return t&&t.length?on(t,_c,gn):rt}function Gc(t,e){return t&&t.length?on(t,ga(e,2),gn):rt}function qc(t){return T(t,_c)}function Wc(t,e){return T(t,ga(e,2))}function Qc(t){return t&&t.length?on(t,_c,xn):rt}function Yc(t,e){return t&&t.length?on(t,ga(e,2),xn):rt}function Zc(t){return t&&t.length?N(t,_c):0}function Xc(t,e){return t&&t.length?N(t,ga(e,2)):0}e=null==e?kr:Gr.defaults(kr.Object(),e,Gr.pick(kr,vr));var Jc=e.Array,$c=e.Date,tl=e.Error,el=e.Function,rl=e.Math,nl=e.Object,il=e.RegExp,al=e.String,ol=e.TypeError,sl=Jc.prototype,ul=el.prototype,cl=nl.prototype,ll=e["__core-js_shared__"],fl=ul.toString,hl=cl.hasOwnProperty,pl=0,dl=function(){var t=/[^.]+$/.exec(ll&&ll.keys&&ll.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),yl=cl.toString,gl=fl.call(nl),vl=kr._,ml=il("^"+fl.call(hl).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),El=Pr?e.Buffer:rt,Cl=e.Symbol,bl=e.Uint8Array,Sl=El?El.allocUnsafe:rt,wl=G(nl.getPrototypeOf,nl),Al=nl.create,Tl=cl.propertyIsEnumerable,_l=sl.splice,Il=Cl?Cl.isConcatSpreadable:rt,Bl=Cl?Cl.iterator:rt,kl=Cl?Cl.toStringTag:rt,Nl=function(){try{var t=Ea(nl,"defineProperty");return t({},"",{}),t}catch(t){}}(),Rl=e.clearTimeout!==kr.clearTimeout&&e.clearTimeout,Pl=$c&&$c.now!==kr.Date.now&&$c.now,Fl=e.setTimeout!==kr.setTimeout&&e.setTimeout,Ll=rl.ceil,Ul=rl.floor,Ol=nl.getOwnPropertySymbols,xl=El?El.isBuffer:rt,Dl=e.isFinite,Kl=sl.join,Vl=G(nl.keys,nl),jl=rl.max,Ml=rl.min,zl=$c.now,Hl=e.parseInt,Gl=rl.random,ql=sl.reverse,Wl=Ea(e,"DataView"),Ql=Ea(e,"Map"),Yl=Ea(e,"Promise"),Zl=Ea(e,"Set"),Xl=Ea(e,"WeakMap"),Jl=Ea(nl,"create"),$l=Xl&&new Xl,tf={},ef=Ya(Wl),rf=Ya(Ql),nf=Ya(Yl),af=Ya(Zl),of=Ya(Xl),sf=Cl?Cl.prototype:rt,uf=sf?sf.valueOf:rt,cf=sf?sf.toString:rt,lf=function(){function t(){}return function(e){if(!tu(e))return{};if(Al)return Al(e);t.prototype=e;var r=new t;return t.prototype=rt,r}}();r.templateSettings={escape:we,evaluate:Ae,interpolate:Te,variable:"",imports:{_:r}},r.prototype=n.prototype,r.prototype.constructor=r,i.prototype=lf(n.prototype),i.prototype.constructor=i,m.prototype=lf(n.prototype),m.prototype.constructor=m,tt.prototype.clear=xe,tt.prototype.delete=Ye,tt.prototype.get=Ze,tt.prototype.has=Xe,tt.prototype.set=Je,$e.prototype.clear=tr,$e.prototype.delete=er,$e.prototype.get=rr,$e.prototype.has=nr,$e.prototype.set=ir,ar.prototype.clear=or,ar.prototype.delete=sr,ar.prototype.get=ur,ar.prototype.has=cr,ar.prototype.set=lr,pr.prototype.add=pr.prototype.push=dr,pr.prototype.has=yr,gr.prototype.clear=br,gr.prototype.delete=Sr,gr.prototype.get=wr,gr.prototype.has=Ar,gr.prototype.set=Ir;var ff=Di(ln),hf=Di(fn,!0),pf=Ki(),df=Ki(!0),yf=$l?function(t,e){return $l.set(t,e),t}:_c,gf=Nl?function(t,e){return Nl(t,"toString",{configurable:!0,enumerable:!1,value:Ac(e),writable:!0})}:_c,vf=$n,mf=Rl||function(t){return kr.clearTimeout(t)},Ef=Zl&&1/W(new Zl([,-0]))[1]==Nt?function(t){return new Zl(t)}:Pc,Cf=$l?function(t){return $l.get(t)}:Pc,bf=Ol?function(t){return null==t?[]:(t=nl(t),l(Ol(t),function(e){return Tl.call(t,e)}))}:Oc,Sf=Ol?function(t){for(var e=[];t;)d(e,bf(t)),t=wl(t);return e}:Oc,wf=yn;(Wl&&wf(new Wl(new ArrayBuffer(1)))!=oe||Ql&&wf(new Ql)!=Wt||Yl&&"[object Promise]"!=wf(Yl.resolve())||Zl&&wf(new Zl)!=$t||Xl&&wf(new Xl)!=ne)&&(wf=function(t){var e=yn(t),r=e==Zt?t.constructor:rt,n=r?Ya(r):"";if(n)switch(n){case ef:return oe;case rf:return Wt;case nf:return"[object Promise]";case af:return $t;case of:return ne}return e});var Af=ll?Xs:xc,Tf=qa(yf),_f=Fl||function(t,e){return kr.setTimeout(t,e)},If=qa(gf),Bf=function(t){var e=Is(t,function(t){return r.size===st&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Be,function(t,r,n,i){e.push(n?i.replace(De,"$1"):r||t)}),e}),kf=$n(function(t,e){return zs(t)?nn(t,cn(e,1,zs,!0)):[]}),Nf=$n(function(t,e){var r=vo(e);return zs(r)&&(r=rt),zs(t)?nn(t,cn(e,1,zs,!0),ga(r,2)):[]}),Rf=$n(function(t,e){var r=vo(e);return zs(r)&&(r=rt),zs(t)?nn(t,cn(e,1,zs,!0),rt,r):[]}),Pf=$n(function(t){var e=p(t,mi);return e.length&&e[0]===t[0]?Cn(e):[]}),Ff=$n(function(t){var e=vo(t),r=p(t,mi);return e===vo(r)?e=rt:r.pop(),r.length&&r[0]===t[0]?Cn(r,ga(e,2)):[]}),Lf=$n(function(t){var e=vo(t),r=p(t,mi);return e="function"==typeof e?e:rt,e&&r.pop(),r.length&&r[0]===t[0]?Cn(r,rt,e):[]}),Uf=$n(Co),Of=fa(function(t,e){var r=null==t?0:t.length,n=Xr(t,e);return Yn(t,p(e,function(t){return ka(t,r)?+t:t}).sort(Bi)),n}),xf=$n(function(t){return fi(cn(t,1,zs,!0))}),Df=$n(function(t){var e=vo(t);return zs(e)&&(e=rt),fi(cn(t,1,zs,!0),ga(e,2))}),Kf=$n(function(t){var e=vo(t);return e="function"==typeof e?e:rt,fi(cn(t,1,zs,!0),rt,e)}),Vf=$n(function(t,e){return zs(t)?nn(t,e):[]}),jf=$n(function(t){return gi(l(t,zs))}),Mf=$n(function(t){var e=vo(t);return zs(e)&&(e=rt),gi(l(t,zs),ga(e,2))}),zf=$n(function(t){var e=vo(t);return e="function"==typeof e?e:rt,gi(l(t,zs),rt,e)}),Hf=$n(Mo),Gf=$n(function(t){var e=t.length,r=e>1?t[e-1]:rt;return r="function"==typeof r?(t.pop(),r):rt,zo(t,r)}),qf=fa(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,a=function(e){return Xr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof m&&ka(r)?(n=n.slice(r,+r+(e?1:0)),n.__actions__.push({func:Qo,args:[a],thisArg:rt}),new i(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(a)}),Wf=Oi(function(t,e,r){hl.call(t,r)?++t[r]:Zr(t,r,1)}),Qf=Gi(oo),Yf=Gi(so),Zf=Oi(function(t,e,r){hl.call(t,r)?t[r].push(e):Zr(t,r,[e])}),Xf=$n(function(t,e,r){var n=-1,i="function"==typeof e,o=Ms(t)?Jc(t.length):[];return ff(t,function(t){o[++n]=i?a(e,t,r):Sn(t,e,r)}),o}),Jf=Oi(function(t,e,r){Zr(t,r,e)}),$f=Oi(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),th=$n(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Na(t,e[0],e[1])?e=[]:r>2&&Na(e[0],e[1],e[2])&&(e=[e[0]]),Hn(t,cn(e,1),[])}),eh=Pl||function(){return kr.Date.now()},rh=$n(function(t,e,r){var n=dt;if(r.length){var i=q(r,ya(rh));n|=Et}return ia(t,n,e,r,i)}),nh=$n(function(t,e,r){var n=dt|yt;if(r.length){var i=q(r,ya(nh));n|=Et}return ia(e,n,t,r,i)}),ih=$n(function(t,e){return rn(t,1,e)}),ah=$n(function(t,e,r){return rn(t,Cu(e)||0,r)});Is.Cache=ar;var oh=vf(function(t,e){e=1==e.length&&ph(e[0])?p(e[0],F(ga())):p(cn(e,1),F(ga()));var r=e.length;return $n(function(n){for(var i=-1,o=Ml(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return a(t,this,n)})}),sh=$n(function(t,e){var r=q(e,ya(sh));return ia(t,Et,rt,e,r)}),uh=$n(function(t,e){var r=q(e,ya(uh));return ia(t,Ct,rt,e,r)}),ch=fa(function(t,e){return ia(t,St,rt,rt,rt,e)}),lh=ta(gn),fh=ta(function(t,e){return t>=e}),hh=wn(function(){return arguments}())?wn:function(t){return eu(t)&&hl.call(t,"callee")&&!Tl.call(t,"callee")},ph=Jc.isArray,dh=Ur?F(Ur):An,yh=xl||xc,gh=Or?F(Or):Tn,vh=xr?F(xr):Bn,mh=Dr?F(Dr):Rn,Eh=Kr?F(Kr):Pn,Ch=Vr?F(Vr):Fn,bh=ta(xn),Sh=ta(function(t,e){return t<=e}),wh=xi(function(t,e){if(Ua(e)||Ms(e))return void Fi(e,Ou(e),t);for(var r in e)hl.call(e,r)&&jr(t,r,e[r])}),Ah=xi(function(t,e){Fi(e,xu(e),t)}),Th=xi(function(t,e,r,n){Fi(e,xu(e),t,n)}),_h=xi(function(t,e,r,n){Fi(e,Ou(e),t,n)}),Ih=fa(Xr),Bh=$n(function(t,e){t=nl(t);var r=-1,n=e.length,i=n>2?e[2]:rt;for(i&&Na(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=xu(a),s=-1,u=o.length;++s<u;){var c=o[s],l=t[c];(l===rt||js(l,cl[c])&&!hl.call(t,c))&&(t[c]=a[c])}return t}),kh=$n(function(t){return t.push(rt,oa),a(Lh,rt,t)}),Nh=Qi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=yl.call(e)),t[e]=r},Ac(_c)),Rh=Qi(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=yl.call(e)),hl.call(t,e)?t[e].push(r):t[e]=[r]},ga),Ph=$n(Sn),Fh=xi(function(t,e,r){jn(t,e,r)}),Lh=xi(function(t,e,r,n){jn(t,e,r,n)}),Uh=fa(function(t,e){var r={};if(null==t)return r;var n=!1;e=p(e,function(e){return e=Ci(e,t),n||(n=e.length>1),e}),Fi(t,pa(t),r),n&&(r=$r(r,ct|lt|ft,sa));for(var i=e.length;i--;)hi(r,e[i]);return r}),Oh=fa(function(t,e){return null==t?{}:Gn(t,e)}),xh=na(Ou),Dh=na(xu),Kh=Mi(function(t,e,r){return e=e.toLowerCase(),t+(r?tc(e):e)}),Vh=Mi(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),jh=Mi(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Mh=ji("toLowerCase"),zh=Mi(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Hh=Mi(function(t,e,r){return t+(r?" ":"")+qh(e)}),Gh=Mi(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),qh=ji("toUpperCase"),Wh=$n(function(t,e){try{return a(t,rt,e)}catch(t){return Ys(t)?t:new tl(t)}}),Qh=fa(function(t,e){return s(e,function(e){e=Qa(e),Zr(t,e,rh(t[e],t))}),t}),Yh=qi(),Zh=qi(!0),Xh=$n(function(t,e){return function(r){return Sn(r,t,e)}}),Jh=$n(function(t,e){return function(r){return Sn(t,r,e)}}),$h=Zi(p),tp=Zi(c),ep=Zi(v),rp=$i(),np=$i(!0),ip=Yi(function(t,e){return t+e},0),ap=ra("ceil"),op=Yi(function(t,e){return t/e},1),sp=ra("floor"),up=Yi(function(t,e){return t*e},1),cp=ra("round"),lp=Yi(function(t,e){return t-e},0);return r.after=Cs,r.ary=bs,r.assign=wh,r.assignIn=Ah,r.assignInWith=Th,r.assignWith=_h,r.at=Ih,r.before=Ss,r.bind=rh,r.bindAll=Qh,r.bindKey=nh,r.castArray=Us,r.chain=qo,r.chunk=Ja,r.compact=$a,r.concat=to,r.cond=Sc,r.conforms=wc,r.constant=Ac,r.countBy=Wf,r.create=Au,r.curry=ws,r.curryRight=As,r.debounce=Ts,r.defaults=Bh,r.defaultsDeep=kh,r.defer=ih,r.delay=ah,r.difference=kf,r.differenceBy=Nf,r.differenceWith=Rf,r.drop=eo,r.dropRight=ro,r.dropRightWhile=no,r.dropWhile=io,r.fill=ao,r.filter=ns,r.flatMap=is,r.flatMapDeep=as,r.flatMapDepth=os,r.flatten=uo,r.flattenDeep=co,r.flattenDepth=lo,r.flip=_s,r.flow=Yh,r.flowRight=Zh,r.fromPairs=fo,r.functions=Ru,r.functionsIn=Pu,r.groupBy=Zf,r.initial=yo,r.intersection=Pf,r.intersectionBy=Ff,r.intersectionWith=Lf,r.invert=Nh,r.invertBy=Rh,r.invokeMap=Xf,r.iteratee=Ic,r.keyBy=Jf,r.keys=Ou,r.keysIn=xu,r.map=ls,r.mapKeys=Du,r.mapValues=Ku,r.matches=Bc,r.matchesProperty=kc,r.memoize=Is,r.merge=Fh,r.mergeWith=Lh,r.method=Xh,r.methodOf=Jh,r.mixin=Nc,r.negate=Bs,r.nthArg=Fc,r.omit=Uh,r.omitBy=Vu,r.once=ks,r.orderBy=fs,r.over=$h,r.overArgs=oh,r.overEvery=tp,r.overSome=ep,r.partial=sh,r.partialRight=uh,r.partition=$f,r.pick=Oh,r.pickBy=ju,r.property=Lc,r.propertyOf=Uc,r.pull=Uf,r.pullAll=Co,r.pullAllBy=bo,r.pullAllWith=So,r.pullAt=Of,r.range=rp,r.rangeRight=np,r.rearg=ch,r.reject=ds,r.remove=wo,r.rest=Ns,r.reverse=Ao,r.sampleSize=gs,r.set=zu,r.setWith=Hu,r.shuffle=vs,r.slice=To,r.sortBy=th,r.sortedUniq=Po,r.sortedUniqBy=Fo,r.split=fc,r.spread=Rs,r.tail=Lo,r.take=Uo,r.takeRight=Oo,r.takeRightWhile=xo,r.takeWhile=Do,r.tap=Wo,r.throttle=Ps,r.thru=Qo,r.toArray=gu,r.toPairs=xh,r.toPairsIn=Dh,r.toPath=Mc,r.toPlainObject=bu,r.transform=Gu,r.unary=Fs,r.union=xf,r.unionBy=Df,r.unionWith=Kf,r.uniq=Ko,r.uniqBy=Vo,r.uniqWith=jo,r.unset=qu,r.unzip=Mo,r.unzipWith=zo,r.update=Wu,r.updateWith=Qu,r.values=Yu,r.valuesIn=Zu,r.without=Vf,r.words=bc,r.wrap=Ls,r.xor=jf,r.xorBy=Mf,r.xorWith=zf,r.zip=Hf,r.zipObject=Ho,r.zipObjectDeep=Go,r.zipWith=Gf,r.entries=xh,r.entriesIn=Dh,r.extend=Ah,r.extendWith=Th,Nc(r,r),r.add=ip,r.attempt=Wh,r.camelCase=Kh,r.capitalize=tc,r.ceil=ap,r.clamp=Xu,r.clone=Os,r.cloneDeep=Ds,r.cloneDeepWith=Ks,r.cloneWith=xs,r.conformsTo=Vs,r.deburr=ec,r.defaultTo=Tc,r.divide=op,r.endsWith=rc,r.eq=js,r.escape=nc,r.escapeRegExp=ic,r.every=rs,r.find=Qf,r.findIndex=oo,r.findKey=Tu,r.findLast=Yf,r.findLastIndex=so,r.findLastKey=_u,r.floor=sp,r.forEach=ss,r.forEachRight=us,r.forIn=Iu,r.forInRight=Bu,r.forOwn=ku,r.forOwnRight=Nu,r.get=Fu,r.gt=lh,r.gte=fh,r.has=Lu,r.hasIn=Uu,r.head=ho,r.identity=_c,r.includes=cs,r.indexOf=po,r.inRange=Ju,r.invoke=Ph,r.isArguments=hh,r.isArray=ph,r.isArrayBuffer=dh,r.isArrayLike=Ms,r.isArrayLikeObject=zs,r.isBoolean=Hs,r.isBuffer=yh,r.isDate=gh,r.isElement=Gs,r.isEmpty=qs,r.isEqual=Ws,r.isEqualWith=Qs,r.isError=Ys,r.isFinite=Zs,r.isFunction=Xs,r.isInteger=Js,r.isLength=$s,r.isMap=vh,r.isMatch=ru,r.isMatchWith=nu,r.isNaN=iu,r.isNative=au,r.isNil=su,r.isNull=ou,r.isNumber=uu,r.isObject=tu,r.isObjectLike=eu,r.isPlainObject=cu,r.isRegExp=mh,r.isSafeInteger=lu,r.isSet=Eh,r.isString=fu,r.isSymbol=hu,r.isTypedArray=Ch,r.isUndefined=pu,r.isWeakMap=du,r.isWeakSet=yu,r.join=go,r.kebabCase=Vh,r.last=vo,r.lastIndexOf=mo,r.lowerCase=jh,r.lowerFirst=Mh,r.lt=bh,r.lte=Sh,r.max=Hc,r.maxBy=Gc,r.mean=qc,r.meanBy=Wc,r.min=Qc,r.minBy=Yc,r.stubArray=Oc,r.stubFalse=xc,r.stubObject=Dc,r.stubString=Kc,r.stubTrue=Vc,r.multiply=up,r.nth=Eo,r.noConflict=Rc,r.noop=Pc,r.now=eh,r.pad=ac,r.padEnd=oc,r.padStart=sc,r.parseInt=uc,r.random=$u,r.reduce=hs,r.reduceRight=ps,r.repeat=cc,r.replace=lc,r.result=Mu,r.round=cp,r.runInContext=t,r.sample=ys,r.size=ms,r.snakeCase=zh,r.some=Es,r.sortedIndex=_o,r.sortedIndexBy=Io,r.sortedIndexOf=Bo,r.sortedLastIndex=ko,r.sortedLastIndexBy=No,r.sortedLastIndexOf=Ro,r.startCase=Hh,r.startsWith=hc,r.subtract=lp,r.sum=Zc,r.sumBy=Xc,r.template=pc,r.times=jc,r.toFinite=vu,r.toInteger=mu,r.toLength=Eu,r.toLower=dc,r.toNumber=Cu,r.toSafeInteger=Su,r.toString=wu,r.toUpper=yc,r.trim=gc,r.trimEnd=vc,r.trimStart=mc,r.truncate=Ec,r.unescape=Cc,r.uniqueId=zc,r.upperCase=Gh,r.upperFirst=qh,r.each=ss,r.eachRight=us,r.first=ho,Nc(r,function(){var t={};return ln(r,function(e,n){hl.call(r.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),r.VERSION="4.17.15",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),s(["drop","take"],function(t,e){m.prototype[t]=function(r){r=r===rt?1:jl(mu(r),0);var n=this.__filtered__&&!e?new m(this):this.clone();return n.__filtered__?n.__takeCount__=Ml(r,n.__takeCount__):n.__views__.push({size:Ml(r,Lt),type:t+(n.__dir__<0?"Right":"")}),n},m.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==Bt||3==r;m.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ga(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),s(["head","last"],function(t,e){var r="take"+(e?"Right":"");m.prototype[t]=function(){return this[r](1).value()[0]}}),s(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");m.prototype[t]=function(){return this.__filtered__?new m(this):this[r](1)}}),m.prototype.compact=function(){return this.filter(_c)},m.prototype.find=function(t){return this.filter(t).head()},m.prototype.findLast=function(t){return this.reverse().find(t)},m.prototype.invokeMap=$n(function(t,e){return"function"==typeof t?new m(this):this.map(function(r){return Sn(r,t,e)})}),m.prototype.reject=function(t){return this.filter(Bs(ga(t)))},m.prototype.slice=function(t,e){t=mu(t);var r=this;return r.__filtered__&&(t>0||e<0)?new m(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==rt&&(e=mu(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},m.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},m.prototype.toArray=function(){return this.take(Lt)},ln(m.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=r[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(r.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,c=e instanceof m,l=u[0],f=c||ph(e),h=function(t){var e=o.apply(r,d([t],u));return a&&p?e[0]:e};f&&n&&"function"==typeof l&&1!=l.length&&(c=f=!1);var p=this.__chain__,y=!!this.__actions__.length,g=s&&!p,v=c&&!y;if(!s&&f){e=v?e:new m(this);var E=t.apply(e,u);return E.__actions__.push({func:Qo,args:[h],thisArg:rt}),new i(E,p)}return g&&v?t.apply(this,u):(E=this.thru(h),g?a?E.value()[0]:E.value():E)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=sl[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(ph(r)?r:[],t)}return this[n](function(r){return e.apply(ph(r)?r:[],t)})}}),ln(m.prototype,function(t,e){var n=r[e];if(n){var i=n.name+"";hl.call(tf,i)||(tf[i]=[]),tf[i].push({name:e,func:n})}}),tf[Wi(rt,yt).name]=[{name:"wrapper",func:rt}],m.prototype.clone=I,m.prototype.reverse=Y,m.prototype.value=$,r.prototype.at=qf,r.prototype.chain=Yo,r.prototype.commit=Zo,r.prototype.next=Xo,r.prototype.plant=$o,r.prototype.reverse=ts,r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=es,r.prototype.first=r.prototype.head,Bl&&(r.prototype[Bl]=Jo),r}();kr._=Gr,(i=function(){return Gr}.call(e,r,e,n))!==rt&&(n.exports=i)}).call(this)}).call(e,r(12),r(75)(t))},function(t,e,r){"use strict";(function(t){function n(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}function i(){var t;try{t=r(93)}catch(t){return}if(Object.keys(t).length)return t}/*!
 * algorithms/helpers.js - Internal functions and fields used in Cryptographic
 * Algorithms
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
"undefined"==typeof Promise&&r(44).polyfill(),e.int32ToBuffer=function(e,r){return r=r||t.alloc(4),r[0]=e>>>24&255,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r};var a=Math.pow(2,32);e.int64ToBuffer=function(r,n){n=n||t.alloc(8);var i=Math.floor(r/a),o=r%a;return i=e.int32ToBuffer(i),o=e.int32ToBuffer(o),n=t.concat([i,o])};var o={};Object.defineProperty(e,"subtleCrypto",{get:function(){return"subtleCrypto"in o?o.subtleCrypto:o.subtleCrypto=n()},enumerable:!0}),Object.defineProperty(e,"nodeCrypto",{get:function(){return"nodeCrypto"in o?o.nodeCrypto:o.nodeCrypto=i()},enumerable:!0}),e.setupFallback=function(t,r,n){var i;return i=t&&e.nodeCrypto?function(){var e,r=arguments;try{e=Promise.resolve(t.apply(null,r))}catch(t){e=function(t){return 0===t.message.indexOf("unsupported algorithm:")?(i=n,i.apply(null,r)):Promise.reject(t)}(t)}return e}:r&&e.subtleCrypto?function(){function t(t){return t.code!==DOMException.NOT_SUPPORTED_ERR&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==t.message&&t instanceof Error?Promise.reject(t):(i=n,i.apply(null,a))}var e,a=arguments;try{e=r.apply(null,a),e=e.catch(t)}catch(r){e=t(r)}return e}:n}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";/*!
 * algorithms/constants.js - Constants used in Cryptographic Algorithms
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
t.exports={CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}}},function(t,e,r){"use strict";(function(e){function n(t){for(var e,r=0;!e&&u.length>r;r++)t instanceof u[r]&&(e=u[r]);return e}function i(t,r){if(e.isBuffer(r))r=e.from(r);else{var i=n(r);r=i?new i(r,r.byteOffset,r.byteLength):void 0}return r,r}/*!
 * util/utf8.js - Implementation of UTF-8 Encoder/Decoder
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var a=r(5),o=a.partialRight,s=a.merge,u=function(){var t=[];return"undefined"!=typeof Uint8ClampedArray&&t.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&t.push(Uint8Array),"undefined"!=typeof Uint16Array&&t.push(Uint16Array),"undefined"!=typeof Uint32Array&&t.push(Uint32Array),"undefined"!=typeof Float32Array&&t.push(Float32Array),"undefined"!=typeof Float64Array&&t.push(Float64Array),t}();t.exports=o(s,i)}).call(e,r(0).Buffer)},function(t,e,r){function n(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}function i(t,e,r,a){var u;n(t,e,2);var c=t.getByte();e--;var l=192&c,f=31&c;u=t.length();var h=s(t,e);if(e-=u-t.length(),void 0!==h&&h>e){if(a.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=t.length(),p.remaining=e,p.requested=h,p}h=e}var d,y,g=32==(32&c);if(g)if(d=[],void 0===h)for(;;){if(n(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}u=t.length(),d.push(i(t,e,r+1,a)),e-=u-t.length()}else for(;h>0;)u=t.length(),d.push(i(t,h,r+1,a)),e-=u-t.length(),h-=u-t.length();if(void 0===d&&l===o.Class.UNIVERSAL&&f===o.Type.BITSTRING&&(y=t.bytes(h)),void 0===d&&a.decodeBitStrings&&l===o.Class.UNIVERSAL&&f===o.Type.BITSTRING&&h>1){var v=t.read,m=e,E=0;if(f===o.Type.BITSTRING&&(n(t,e,1),E=t.getByte(),e--),0===E)try{u=t.length();var C={verbose:a.verbose,strict:!0,decodeBitStrings:!0},b=i(t,e,r+1,C),S=u-t.length();e-=S,f==o.Type.BITSTRING&&S++;var w=b.tagClass;S!==h||w!==o.Class.UNIVERSAL&&w!==o.Class.CONTEXT_SPECIFIC||(d=[b])}catch(t){}void 0===d&&(t.read=v,e=m)}if(void 0===d){if(void 0===h){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=e}if(f===o.Type.BMPSTRING)for(d="";h>0;h-=2)n(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(h)}var A=void 0===y?null:{bitStringContents:y};return o.create(l,f,g,d,A)}var a=r(1);r(2),r(13);var o=t.exports=a.asn1=a.asn1||{};o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(t,e,r,n,i){if(a.util.isArray(n)){for(var s=[],u=0;u<n.length;++u)void 0!==n[u]&&s.push(n[u]);n=s}var c={tagClass:t,type:e,constructed:r,composed:r||a.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=o.copy(c)),c},o.copy=function(t,e){var r;if(a.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(o.copy(t[n],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:o.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},o.equals=function(t,e,r){if(a.util.isArray(t)){if(!a.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!o.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&o.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i},o.getBerValueLength=function(t){var e=t.getByte();if(128!==e){return 128&e?t.getInt((127&e)<<3):e}};var s=function(t,e){var r=t.getByte();if(e--,128!==r){var i;if(128&r){var a=127&r;n(t,e,a),i=t.getInt(a<<3)}else i=r;if(i<0)throw new Error("Negative length: "+i);return i}};o.fromDer=function(t,e){return void 0===e&&(e={strict:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=a.util.createBuffer(t)),i(t,t.length(),0,e)},o.toDer=function(t){var e=a.util.createBuffer(),r=t.tagClass|t.type,n=a.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=o.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)void 0!==t.value[s]&&n.putBuffer(o.toDer(t.value[s]))}else if(t.type===o.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===o.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(127&n.length());else{var u=n.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);e.putByte(128|c.length);for(var s=c.length-1;s>=0;--s)e.putByte(c.charCodeAt(s))}return e.putBuffer(n),e},o.oidToDer=function(t){var e=t.split("."),r=a.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,u=2;u<e.length;++u){n=!0,i=[],o=parseInt(e[u],10);do{s=127&o,o>>>=7,n||(s|=128),i.push(s),n=!1}while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r},o.derToOid=function(t){var e;"string"==typeof t&&(t=a.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n<<=7,128&r?n+=127&r:(e+="."+(n+r),n=0);return e},o.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,o,s,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var l=parseInt(t.substr(c+1,2),10),f=parseInt(t.substr(c+4,2),10),h=60*l+f;h*=6e4,"+"===u?e.setTime(+e-h):e.setTime(+e+h)}return e},o.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var f=t.length-5,h=t.charAt(f);if("+"===h||"-"===h){c=60*parseInt(t.substr(f+1,2),10)+parseInt(t.substr(f+4,2),10),c*=6e4,"+"===h&&(c*=-1),l=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,o,s,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(a,o,s,u)),e},o.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},o.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},o.integerToDer=function(t){var e=a.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},o.derToInteger=function(t){"string"==typeof t&&(t=a.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},o.validate=function(t,e,r,n){var i=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(i=!0,e.value&&a.util.isArray(e.value))for(var s=0,u=0;i&&u<e.value.length;++u)i=e.value[u].optional||!1,t.value[s]&&(i=o.validate(t.value[s],e.value[u],r,n),i?++s:e.value[u].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return i};var u=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+="\n");for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case o.Class.UNIVERSAL:n+="Universal:";break;case o.Class.APPLICATION:n+="Application:";break;case o.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case o.Class.PRIVATE:n+="Private:"}if(t.tagClass===o.Class.UNIVERSAL)switch(n+=t.type,t.type){case o.Type.NONE:n+=" (None)";break;case o.Type.BOOLEAN:n+=" (Boolean)";break;case o.Type.INTEGER:n+=" (Integer)";break;case o.Type.BITSTRING:n+=" (Bit string)";break;case o.Type.OCTETSTRING:n+=" (Octet string)";break;case o.Type.NULL:n+=" (Null)";break;case o.Type.OID:n+=" (Object Identifier)";break;case o.Type.ODESC:n+=" (Object Descriptor)";break;case o.Type.EXTERNAL:n+=" (External or Instance of)";break;case o.Type.REAL:n+=" (Real)";break;case o.Type.ENUMERATED:n+=" (Enumerated)";break;case o.Type.EMBEDDED:n+=" (Embedded PDV)";break;case o.Type.UTF8:n+=" (UTF8)";break;case o.Type.ROID:n+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:n+=" (Sequence)";break;case o.Type.SET:n+=" (Set)";break;case o.Type.PRINTABLESTRING:n+=" (Printable String)";break;case o.Type.IA5String:n+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:n+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case o.Type.BMPSTRING:n+=" (BMP String)"}else n+=t.type;if(n+="\n",n+=i+"Constructed: "+t.constructed+"\n",t.composed){for(var c=0,l="",s=0;s<t.value.length;++s)void 0!==t.value[s]&&(c+=1,l+=o.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(l+=","));n+=i+"Sub values: "+c+l}else{if(n+=i+"Value: ",t.type===o.Type.OID){var f=o.derToOid(t.value);n+=f,a.pki&&a.pki.oids&&f in a.pki.oids&&(n+=" ("+a.pki.oids[f]+") ")}if(t.type===o.Type.INTEGER)try{n+=o.derToInteger(t.value)}catch(e){n+="0x"+a.util.bytesToHex(t.value)}else if(t.type===o.Type.BITSTRING){if(t.value.length>1?n+="0x"+a.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var h=t.value.charCodeAt(0);1==h?n+=" (1 unused bit shown)":h>1&&(n+=" ("+h+" unused bits shown)")}}else t.type===o.Type.OCTETSTRING?(u.test(t.value)||(n+="("+t.value+") "),n+="0x"+a.util.bytesToHex(t.value)):t.type===o.Type.UTF8?n+=a.util.decodeUtf8(t.value):t.type===o.Type.PRINTABLESTRING||t.type===o.Type.IA5String?n+=t.value:u.test(t.value)?n+="0x"+a.util.bytesToHex(t.value):0===t.value.length?n+="[null]":n+=t.value}return n}},function(t,e,r){var n=r(1);r(17),r(48),r(49),r(2),function(){if(n.random&&n.random.getBytes)return void(t.exports=n.random);!function(e){function r(){var t=n.prng.create(i);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}var i={},a=new Array(4),o=n.util.createBuffer();i.formatKey=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},i.formatSeed=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},i.cipher=function(t,e){return n.aes._updateBlock(t,e,a,!1),o.putInt32(a[0]),o.putInt32(a[1]),o.putInt32(a[2]),o.putInt32(a[3]),o.getBytes()},i.increment=function(t){return++t[3],t},i.md=n.md.sha256;var s=r(),u=null,c=n.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(u=function(t){return l.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var h in navigator)try{"string"==typeof navigator[h]&&(f+=navigator[h])}catch(t){}s.collect(f),f=null}e&&(e().mousemove(function(t){s.collectInt(t.clientX,16),s.collectInt(t.clientY,16)}),e().keypress(function(t){s.collectInt(t.charCode,8)}))}if(n.random)for(var h in s)n.random[h]=s[h];else n.random=s;n.random.createInstance=r,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)}()},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(t[i]=r[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){function n(t,e){o[t]=e,o[e]=t}function i(t,e){o[t]=e}var a=r(1);a.pki=a.pki||{};var o=t.exports=a.pki.oids=a.oids=a.oids||{};n("1.2.840.113549.1.1.1","rsaEncryption"),n("1.2.840.113549.1.1.4","md5WithRSAEncryption"),n("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),n("1.2.840.113549.1.1.7","RSAES-OAEP"),n("1.2.840.113549.1.1.8","mgf1"),n("1.2.840.113549.1.1.9","pSpecified"),n("1.2.840.113549.1.1.10","RSASSA-PSS"),n("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),n("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),n("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),n("1.2.840.10040.4.3","dsa-with-sha1"),n("1.3.14.3.2.7","desCBC"),n("1.3.14.3.2.26","sha1"),n("2.16.840.1.101.3.4.2.1","sha256"),n("2.16.840.1.101.3.4.2.2","sha384"),n("2.16.840.1.101.3.4.2.3","sha512"),n("1.2.840.113549.2.5","md5"),n("1.2.840.113549.1.7.1","data"),n("1.2.840.113549.1.7.2","signedData"),n("1.2.840.113549.1.7.3","envelopedData"),n("1.2.840.113549.1.7.4","signedAndEnvelopedData"),n("1.2.840.113549.1.7.5","digestedData"),n("1.2.840.113549.1.7.6","encryptedData"),n("1.2.840.113549.1.9.1","emailAddress"),n("1.2.840.113549.1.9.2","unstructuredName"),n("1.2.840.113549.1.9.3","contentType"),n("1.2.840.113549.1.9.4","messageDigest"),n("1.2.840.113549.1.9.5","signingTime"),n("1.2.840.113549.1.9.6","counterSignature"),n("1.2.840.113549.1.9.7","challengePassword"),n("1.2.840.113549.1.9.8","unstructuredAddress"),n("1.2.840.113549.1.9.14","extensionRequest"),n("1.2.840.113549.1.9.20","friendlyName"),n("1.2.840.113549.1.9.21","localKeyId"),n("1.2.840.113549.1.9.22.1","x509Certificate"),n("1.2.840.113549.1.12.10.1.1","keyBag"),n("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),n("1.2.840.113549.1.12.10.1.3","certBag"),n("1.2.840.113549.1.12.10.1.4","crlBag"),n("1.2.840.113549.1.12.10.1.5","secretBag"),n("1.2.840.113549.1.12.10.1.6","safeContentsBag"),n("1.2.840.113549.1.5.13","pkcs5PBES2"),n("1.2.840.113549.1.5.12","pkcs5PBKDF2"),n("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),n("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),n("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),n("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),n("1.2.840.113549.2.7","hmacWithSHA1"),n("1.2.840.113549.2.8","hmacWithSHA224"),n("1.2.840.113549.2.9","hmacWithSHA256"),n("1.2.840.113549.2.10","hmacWithSHA384"),n("1.2.840.113549.2.11","hmacWithSHA512"),n("1.2.840.113549.3.7","des-EDE3-CBC"),n("2.16.840.1.101.3.4.1.2","aes128-CBC"),n("2.16.840.1.101.3.4.1.22","aes192-CBC"),n("2.16.840.1.101.3.4.1.42","aes256-CBC"),n("2.5.4.3","commonName"),n("2.5.4.5","serialName"),n("2.5.4.6","countryName"),n("2.5.4.7","localityName"),n("2.5.4.8","stateOrProvinceName"),n("2.5.4.10","organizationName"),n("2.5.4.11","organizationalUnitName"),n("2.5.4.13","description"),n("2.16.840.1.113730.1.1","nsCertType"),n("2.16.840.1.113730.1.13","nsComment"),i("2.5.29.1","authorityKeyIdentifier"),i("2.5.29.2","keyAttributes"),i("2.5.29.3","certificatePolicies"),i("2.5.29.4","keyUsageRestriction"),i("2.5.29.5","policyMapping"),i("2.5.29.6","subtreesConstraint"),i("2.5.29.7","subjectAltName"),i("2.5.29.8","issuerAltName"),i("2.5.29.9","subjectDirectoryAttributes"),i("2.5.29.10","basicConstraints"),i("2.5.29.11","nameConstraints"),i("2.5.29.12","policyConstraints"),i("2.5.29.13","basicConstraints"),n("2.5.29.14","subjectKeyIdentifier"),n("2.5.29.15","keyUsage"),i("2.5.29.16","privateKeyUsagePeriod"),n("2.5.29.17","subjectAltName"),n("2.5.29.18","issuerAltName"),n("2.5.29.19","basicConstraints"),i("2.5.29.20","cRLNumber"),i("2.5.29.21","cRLReason"),i("2.5.29.22","expirationDate"),i("2.5.29.23","instructionCode"),i("2.5.29.24","invalidityDate"),i("2.5.29.25","cRLDistributionPoints"),i("2.5.29.26","issuingDistributionPoint"),i("2.5.29.27","deltaCRLIndicator"),i("2.5.29.28","issuingDistributionPoint"),i("2.5.29.29","certificateIssuer"),i("2.5.29.30","nameConstraints"),n("2.5.29.31","cRLDistributionPoints"),n("2.5.29.32","certificatePolicies"),i("2.5.29.33","policyMappings"),i("2.5.29.34","policyConstraints"),n("2.5.29.35","authorityKeyIdentifier"),i("2.5.29.36","policyConstraints"),n("2.5.29.37","extKeyUsage"),i("2.5.29.46","freshestCRL"),i("2.5.29.54","inhibitAnyPolicy"),n("1.3.6.1.4.1.11129.2.4.2","timestampList"),n("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),n("1.3.6.1.5.5.7.3.1","serverAuth"),n("1.3.6.1.5.5.7.3.2","clientAuth"),n("1.3.6.1.5.5.7.3.3","codeSigning"),n("1.3.6.1.5.5.7.3.4","emailProtection"),n("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){var n=r(1);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){y&&p&&(y=!1,p.length?d=p.concat(d):g=-1,d.length&&s())}function s(){if(!y){var t=i(o);y=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,y=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,d=[],y=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){"use strict";/*!
 * jwk/index.js - JSON Web Key (JWK) Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(23);Object.keys(n.KeyStore).forEach(function(t){e[t]=n.KeyStore[t]});var i=r(61);Object.keys(i).forEach(function(t){e[t]=i[t]}),r(105),r(106),r(107)},function(t,e,r){function n(t,e){var r=function(){return new u.aes.Algorithm(t,e)};u.cipher.registerAlgorithm(t,r)}function i(){d=!0,f=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;c=new Array(256),l=new Array(256),h=new Array(4),p=new Array(4);for(var e=0;e<4;++e)h[e]=new Array(256),p[e]=new Array(256);for(var r,n,i,a,o,s,u,y=0,g=0,e=0;e<256;++e){a=g^g<<1^g<<2^g<<3^g<<4,a=a>>8^255&a^99,c[y]=a,l[a]=y,o=t[a],r=t[y],n=t[r],i=t[n],s=o<<24^a<<16^a<<8^a^o,u=(r^n^i)<<24^(y^i)<<16^(y^n^i)<<8^y^r^i;for(var v=0;v<4;++v)h[v][y]=s,p[v][a]=u,s=s<<24|s>>>8,u=u<<24|u>>>8;0===y?y=g=1:(y=r^t[t[t[r^i]]],g^=t[t[g]])}}function a(t,e){for(var r,n=t.slice(0),i=1,a=n.length,o=a+6+1,s=y*o,u=a;u<s;++u)r=n[u-1],u%a==0?(r=c[r>>>16&255]<<24^c[r>>>8&255]<<16^c[255&r]<<8^c[r>>>24]^f[i]<<24,i++):a>6&&u%a==4&&(r=c[r>>>24]<<24^c[r>>>16&255]<<16^c[r>>>8&255]<<8^c[255&r]),n[u]=n[u-a]^r;if(e){var l,h=p[0],d=p[1],g=p[2],v=p[3],m=n.slice(0);s=n.length;for(var u=0,E=s-y;u<s;u+=y,E-=y)if(0===u||u===s-y)m[u]=n[E],m[u+1]=n[E+3],m[u+2]=n[E+2],m[u+3]=n[E+1];else for(var C=0;C<y;++C)l=n[E+C],m[u+(3&-C)]=h[c[l>>>24]]^d[c[l>>>16&255]]^g[c[l>>>8&255]]^v[c[255&l]];n=m}return n}function o(t,e,r,n){var i,a,o,s,u,f=t.length/4-1;n?(i=p[0],a=p[1],o=p[2],s=p[3],u=l):(i=h[0],a=h[1],o=h[2],s=h[3],u=c);var d,y,g,v,m,E,C;d=e[0]^t[0],y=e[n?3:1]^t[1],g=e[2]^t[2],v=e[n?1:3]^t[3];for(var b=3,S=1;S<f;++S)m=i[d>>>24]^a[y>>>16&255]^o[g>>>8&255]^s[255&v]^t[++b],E=i[y>>>24]^a[g>>>16&255]^o[v>>>8&255]^s[255&d]^t[++b],C=i[g>>>24]^a[v>>>16&255]^o[d>>>8&255]^s[255&y]^t[++b],v=i[v>>>24]^a[d>>>16&255]^o[y>>>8&255]^s[255&g]^t[++b],d=m,y=E,g=C;r[0]=u[d>>>24]<<24^u[y>>>16&255]<<16^u[g>>>8&255]<<8^u[255&v]^t[++b],r[n?3:1]=u[y>>>24]<<24^u[g>>>16&255]<<16^u[v>>>8&255]<<8^u[255&d]^t[++b],r[2]=u[g>>>24]<<24^u[v>>>16&255]<<16^u[d>>>8&255]<<8^u[255&y]^t[++b],r[n?1:3]=u[v>>>24]<<24^u[d>>>16&255]<<16^u[y>>>8&255]<<8^u[255&g]^t[++b]}function s(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),n="AES-"+r;e=t.decrypt?u.cipher.createDecipher(n,t.key):u.cipher.createCipher(n,t.key);var i=e.start;return e.start=function(t,r){var n=null;r instanceof u.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=t,i.call(e,r)},e}var u=r(1);r(28),r(45),r(2),t.exports=u.aes=u.aes||{},u.aes.startEncrypting=function(t,e,r,n){var i=s({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},u.aes.createEncryptionCipher=function(t,e){return s({key:t,output:null,decrypt:!1,mode:e})},u.aes.startDecrypting=function(t,e,r,n){var i=s({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},u.aes.createDecryptionCipher=function(t,e){return s({key:t,output:null,decrypt:!0,mode:e})},u.aes.Algorithm=function(t,e){d||i();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return o(r._w,t,e,!1)},decrypt:function(t,e){return o(r._w,t,e,!0)}}}),r._init=!1},u.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(u.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=u.util.createBuffer();for(var n=0;n<e.length;++n)r.putByte(e[n])}}else r=u.util.createBuffer(r);if(!u.util.isArray(r)){e=r,r=[];var i=e.length();if(16===i||24===i||32===i){i>>>=2;for(var n=0;n<i;++n)r.push(e.getInt32())}}if(!u.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=a(r,t.decrypt&&!s),this._init=!0}},u.aes._expandKey=function(t,e){return d||i(),a(t,e)},u.aes._updateBlock=o,n("AES-ECB",u.cipher.modes.ecb),n("AES-CBC",u.cipher.modes.cbc),n("AES-CFB",u.cipher.modes.cfb),n("AES-OFB",u.cipher.modes.ofb),n("AES-CTR",u.cipher.modes.ctr),n("AES-GCM",u.cipher.modes.gcm);var c,l,f,h,p,d=!1,y=4},function(t,e,r){function n(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";for(var a=0,o=-1,i=0;i<e.length;++i,++a)if(a>65&&-1!==o){var s=e[o];","===s?(++o,e=e.substr(0,o)+"\r\n "+e.substr(o)):e=e.substr(0,o)+"\r\n"+s+e.substr(o+1),a=i-o-1,o=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(o=i);return e}function i(t){return t.replace(/^\s+/,"")}var a=r(1);r(2);var o=t.exports=a.pem=a.pem||{};o.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},i+=n(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},i+=n(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=n(r)),t.headers)for(var o=0;o<t.headers.length;++o)i+=n(t.headers[o]);return t.procType&&(i+="\r\n"),i+=a.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n"},o.decode=function(t){for(var e,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;;){if(!(e=n.exec(t)))break;var u={type:e[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:a.util.decode64(e[3])};if(r.push(u),e[2]){for(var c=e[2].split(s),l=0;e&&l<c.length;){for(var f=c[l].replace(/\s+$/,""),h=l+1;h<c.length;++h){var p=c[h];if(!/\s/.test(p[0]))break;f+=p,l=h}if(e=f.match(o)){for(var d={name:e[1],values:[]},y=e[2].split(","),g=0;g<y.length;++g)d.values.push(i(y[g]));if(u.procType)if(u.contentDomain||"Content-Domain"!==d.name)if(u.dekInfo||"DEK-Info"!==d.name)u.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++l}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){"use strict";(function(e){function n(t,r){r=r||{},e.isBuffer(t)?this.data=t:i.util.isArrayBuffer(t)?(t=new Uint8Array(t),this.data=e.from(t)):i.util.isArrayBufferView(t)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),this.data=e.from(t)),this.data&&(this.write=this.data.length,t=void 0),this.growSize=r.growSize||n.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,t?this.putBytes(t):this.data||this.accommodate(0),r.readOffset="readOffset"in r?r.readOffset:this.read,this.write="writeOffset"in r?r.writeOffset:this.write,this.read=Math.min(r.readOffset,this.write)}/*!
 * util/databuffer.js - Forge-compatible Buffer based on Node.js Buffers
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(3),a=r(22);n.DEFAULT_GROW_SIZE=16,n.prototype.length=function(){return this.write-this.read},n.prototype.available=function(){return this.data.length-this.write},n.prototype.isEmpty=function(){return this.length()<=0},n.prototype.accommodate=function(t){if(this.data){if(this.available()<t){t=Math.max(t,this.growSize);var r=this.data,n=e.alloc(r.length+t);r.copy(n,0),this.data=n}}else t=Math.max(this.write+t,this.growSize),this.data=e.alloc(t);return this.data.fill(0,this.write),this},n.prototype.clear=function(){return this.read=this.write=0,this.data=e.alloc(0),this},n.prototype.truncate=function(t){return this.write=this.read+Math.max(0,this.length()-t),this.data.fill(0,this.write),this},n.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},n.prototype.copy=function(){return new n(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},n.prototype.equals=function(t){if(!n.isBuffer(t))return!1;if(t.length()!==this.length())return!1;for(var e=!0,r=this.read-t.read,i=t.read;t.write>i;i++)e=e&&this.data[i+r]===t.data[i];return e},n.prototype.at=function(t){return this.data[this.read+t]},n.prototype.setAt=function(t,e){return this.data[this.read+t]=e,this},n.prototype.last=function(){return this.data[this.write-1]},n.prototype.bytes=function(t){var e;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)e="";else{var r=this.read,n=r+t,i=this.data.slice(r,n);e=String.fromCharCode.apply(null,i)}return e},n.prototype.buffer=function(t){var e;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)e=new ArrayBuffer(0);else{var r=this.read,n=r+t,i=this.data.slice(r,n);e=new Uint8Array(n-r),e.set(i)}return e},n.prototype.native=function(t){var r;if(void 0===t?t=this.length():t&&(t=Math.min(t,this.length())),0===t)r=e.alloc(0);else{var n=this.read,i=n+t;r=this.data.slice(n,i)}return r},n.prototype.toHex=function(){return this.toString("hex")},n.prototype.toString=function(t){if(0===this.length())return"";var e=this.data.slice(this.read,this.write);switch(t=t||"utf8"){case"raw":return e.toString("binary");case"base64url":return a.encode(e);case"utf16":return e.toString("ucs2");default:return e.toString(t)}},n.prototype.fillWithByte=function(t,e){return e||(e=this.available()),this.accommodate(e),this.data.fill(t,this.write,this.write+e),this.write+=e,this},n.prototype.getBuffer=function(t){var e=this.buffer(t);return this.read+=e.byteLength,e},n.prototype.putBuffer=function(t){return this.putBytes(t)},n.prototype.getBytes=function(t){var e=this.bytes(t);return this.read+=e.length,e},n.prototype.putBytes=function(t,r){if("string"==typeof t){switch(r=r||"binary"){case"utf16":r="ucs-2";break;case"raw":r="binary";break;case"base64url":t=a.decode(t)}e.isBuffer(t)||(t=e.from(t,r))}var o,s;if(t instanceof n){var u=t;t=u.data.slice(u.read,u.write),u.read=u.write}else t instanceof i.util.ByteStringBuffer&&(t=t.getBytes());if(e.isBuffer(t))o=t;else if(Array.isArray(t))o=e.from(t);else if(i.util.isArrayBuffer(t))o=new Uint8Array(t),o=e.from(o);else{if(!i.util.isArrayBufferView(t))throw new TypeError("invalid source type");o=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=e.from(o)}return this.accommodate(o.length),s=this.data,o.copy(s,this.write),this.write+=o.length,this},n.prototype.getNative=function(t){var e=this.native(t);return this.read+=e.length,e},n.prototype.putNative=n.prototype.putBuffer,n.prototype.getByte=function(){var t=this.data[this.read];return this.read=Math.min(this.read+1,this.write),t},n.prototype.putByte=function(t){return this.accommodate(1),this.data[this.write]=255&t,this.write++,this},n.prototype.getInt16=function(){var t=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),t},n.prototype.putInt16=function(t){return this.accommodate(2),this.data[this.write]=t>>>8&255,this.data[this.write+1]=255&t,this.write+=2,this},n.prototype.getInt24=function(){var t=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),t},n.prototype.putInt24=function(t){return this.accommodate(3),this.data[this.write]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write+2]=255&t,this.write+=3,this},n.prototype.getInt32=function(){var t=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),t},n.prototype.putInt32=function(t){return this.accommodate(4),this.data[this.write]=t>>>24&255,this.data[this.write+1]=t>>>16&255,this.data[this.write+2]=t>>>8&255,this.data[this.write+3]=255&t,this.write+=4,this},n.prototype.getInt16Le=function(){var t=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),t},n.prototype.putInt16Le=function(t){return this.accommodate(2),this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=2,this},n.prototype.getInt24Le=function(){var t=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),t},n.prototype.putInt24Le=function(t){return this.accommodate(3),this.data[this.write+2]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=3,this},n.prototype.getInt32Le=function(){var t=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),t},n.prototype.putInt32Le=function(t){return this.accommodate(4),this.data[this.write+3]=t>>>24&255,this.data[this.write+2]=t>>>16&255,this.data[this.write+1]=t>>>8&255,this.data[this.write]=255&t,this.write+=4,this},n.prototype.getInt=function(t){var e=0;do{e=e<<8|this.getByte(),t-=8}while(t>0);return e},n.prototype.putInt=function(t,e){this.accommodate(Math.ceil(e/8));do{e-=8,this.putByte(t>>e&255)}while(e>0);return this},n.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},n.prototype.putString=function(t){return this.putBytes(t,"utf16")},n.isBuffer=function(t){return t instanceof n},n.asBuffer=function(t){return n.isBuffer(t)?t:t?new n(t):new n},t.exports=n}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){/*!
 * jwk/helpers.js - JWK Internal Helper Functions and Constants
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(5).clone,i=r(4),a=r(3),o=r(36),s={name:"PrivateKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},u={name:"SubjectPublicKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},c={name:"Certificate",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},l={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"};t.exports={validators:{privateKey:s,publicKey:u,certificate:c},thumbprint:function(t,r,n){if("function"!=typeof t.thumbprint)return Promise.reject(new Error("thumbprint not supported"));n=(n||l.THUMBPRINT_HASH).toUpperCase();var a=t.thumbprint(r),s=Object.keys(a).sort().map(function(t){var r=a[t];return e.isBuffer(r)&&(r=i.base64url.encode(r)),JSON.stringify(t)+":"+JSON.stringify(r)});s="{"+s.join(",")+"}";try{return o.digest(n,e.from(s,"utf8"))}catch(t){return Promise.reject(t)}},unpackProps:function(t,r){var a;r.forEach(function(r){if(r.name in t){a=a||{};var o=t[r.name];switch(r.type){case"binary":e.isBuffer(o)?t[r.name]=i.base64url.encode(o):o=i.base64url.decode(o);break;case"string":case"number":case"boolean":break;case"array":o=[].concat(o);break;case"object":o=n(o)}a[r.name]=o}});var o=a||{};return Object.keys(t).forEach(function(e){e in o||delete t[e]}),a},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:l}}).call(e,r(0).Buffer)},function(t,e,r){function n(t,e,r){var n=h.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var o,s=i-3-t.length;if(0===r||1===r){o=0===r?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){for(var c=0,l=h.random.getBytes(s),u=0;u<s;++u)o=l.charCodeAt(u),0===o?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(t),n}function i(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=h.util.createBuffer(t),o=a.getByte(),s=a.getByte();if(0!==o||r&&0!==s&&1!==s||!r&&2!=s||r&&0===s&&void 0===n)throw new Error("Encryption block is invalid.");var u=0;if(0===s){u=i-3-n;for(var c=0;c<u;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===s)for(u=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++u}else if(2===s)for(u=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++u}if(0!==a.getByte()||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function a(t,e,r){function n(){i(t.pBits,function(e,n){return e?r(e):(t.p=n,null!==t.q?a(e,t.q):void i(t.qBits,a))})}function i(t,e){h.prime.generateProbablePrime(t,o,e)}function a(e,o){if(e)return r(e);if(t.q=o,t.p.compareTo(t.q)<0){var s=t.p;t.p=t.q,t.q=s}if(0!==t.p.subtract(p.ONE).gcd(t.e).compareTo(p.ONE))return t.p=null,void n();if(0!==t.q.subtract(p.ONE).gcd(t.e).compareTo(p.ONE))return t.q=null,void i(t.qBits,a);if(t.p1=t.p.subtract(p.ONE),t.q1=t.q.subtract(p.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(p.ONE))return t.p=t.q=null,void n();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void i(t.qBits,a);var u=t.e.modInverse(t.phi);t.keys={privateKey:v.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:v.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"function"==typeof e&&(r=e,e={}),e=e||{};var o={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(o.prng=e.prng),n()}function o(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=h.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function s(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function u(t){return h.util.isNodejs&&"function"==typeof d[t]}function c(t){return void 0!==g.globalScope&&"object"==typeof g.globalScope.crypto&&"object"==typeof g.globalScope.crypto.subtle&&"function"==typeof g.globalScope.crypto.subtle[t]}function l(t){return void 0!==g.globalScope&&"object"==typeof g.globalScope.msCrypto&&"object"==typeof g.globalScope.msCrypto.subtle&&"function"==typeof g.globalScope.msCrypto.subtle[t]}function f(t){for(var e=h.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}var h=r(1);if(r(9),r(51),r(13),r(47),r(52),r(10),r(2),void 0===p)var p=h.jsbn.BigInteger;var d=h.util.isNodejs?r(31):null,y=h.asn1,g=h.util;h.pki=h.pki||{},t.exports=h.pki.rsa=h.rsa=h.rsa||{};var v=h.pki,m=[6,4,2,4,2,4,6,2],E={name:"PrivateKeyInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},C={name:"RSAPrivateKey",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},b={name:"RSAPublicKey",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},S=h.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},w=function(t){var e;if(!(t.algorithm in v.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=v.oids[t.algorithm];var n=y.oidToDer(e).getBytes(),i=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),a=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);a.value.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,n)),a.value.push(y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,""));var o=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(o),y.toDer(i).getBytes()},A=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(p.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(p.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do{n=new p(h.util.bytesToHex(h.random.getBytes(e.n.bitLength()/8)),16)}while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(p.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var o=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return o=o.multiply(n.modInverse(e.n)).mod(e.n)};v.rsa.encrypt=function(t,e,r){var i,a=r,o=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(a=2===r,i=n(t,e,r)):(i=h.util.createBuffer(),i.putBytes(t));for(var s=new p(i.toHex(),16),u=A(s,e,a),c=u.toString(16),l=h.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(h.util.hexToBytes(c)),l.getBytes()},v.rsa.decrypt=function(t,e,r,n){var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=a,o}var s=new p(h.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=A(s,e,r),c=u.toString(16),l=h.util.createBuffer(),f=a-Math.ceil(c.length/2);f>0;)l.putByte(0),--f;return l.putBytes(h.util.hexToBytes(c)),!1!==n?i(l.getBytes(),e,r):l.getBytes()},v.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n,i=r.prng||h.random,a={nextBytes:function(t){for(var e=i.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},o=r.algorithm||"PRIMEINC";if("PRIMEINC"!==o)throw new Error("Invalid key generation algorithm: "+o);return n={algorithm:o,state:0,bits:t,rng:a,eInt:e||65537,e:new p(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},n.e.fromInt(n.eInt),n},v.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new p(null);r.fromInt(30);for(var n,i=0,a=function(t,e){return t|e},o=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var c=null===t.p?t.pBits:t.qBits,l=c-1;0===t.pqState?(t.num=new p(c,t.rng),t.num.testBit(l)||t.num.bitwiseTo(p.ONE.shiftLeft(l),a,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(s(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(m[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(p.ONE).gcd(t.e).compareTo(p.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(p.ONE),t.q1=t.q.subtract(p.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(p.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var f=t.e.modInverse(t.phi);t.keys={privateKey:v.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:v.rsa.setPublicKey(t.n,t.e)}}n=+new Date,u+=n-o,o=n}return null!==t.keys},v.rsa.generateKeyPair=function(t,e,r,n){if(1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(n=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(n=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!h.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(n){if(u("generateKeyPair"))return d.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(t,e,r){if(t)return n(t);n(null,{privateKey:v.privateKeyFromPem(r),publicKey:v.publicKeyFromPem(e)})});if(c("generateKey")&&c("exportKey"))return g.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:f(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return g.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){n(t)}).then(function(t){if(t){var e=v.privateKeyFromAsn1(y.fromDer(h.util.createBuffer(t)));n(null,{privateKey:e,publicKey:v.setRsaPublicKey(e.n,e.e)})}});if(l("generateKey")&&l("exportKey")){var i=g.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:f(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(t){var e=t.target.result,r=g.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=v.privateKeyFromAsn1(y.fromDer(h.util.createBuffer(e)));n(null,{privateKey:r,publicKey:v.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){n(t)}},void(i.onerror=function(t){n(t)})}}else if(u("generateKeyPairSync")){var o=d.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:v.privateKeyFromPem(o.privateKey),publicKey:v.publicKeyFromPem(o.publicKey)}}var s=v.rsa.createKeyPairGenerationState(t,e,r);if(!n)return v.rsa.stepKeyPairGenerationState(s,0),s.keys;a(s,r,n)},v.setRsaPublicKey=v.rsa.setPublicKey=function(t,e){var r={n:t,e:e};return r.encrypt=function(t,e,i){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return n(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return h.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var a=e.encode(t,r,!0);return v.rsa.encrypt(a,r,!0)},r.verify=function(t,e,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(t,e){return e=i(e,r,!0),t===y.fromDer(e).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(t,e){return e=i(e,r,!0),t===e}});var a=v.rsa.decrypt(e,r,!0,!1);return n.verify(t,a,r.n.bitLength())},r},v.setRsaPrivateKey=v.rsa.setPrivateKey=function(t,e,r,n,a,o,s,u){var c={n:t,e:e,d:r,p:n,q:a,dP:o,dQ:s,qInv:u};return c.decrypt=function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var n=v.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:i};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return h.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(n,c,!1)},c.sign=function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:w},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,c.n.bitLength());return v.rsa.encrypt(n,c,r)},c},v.wrapRsaPrivateKey=function(t){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(0).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(v.oids.rsaEncryption).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]),y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,y.toDer(t).getBytes())])},v.privateKeyFromAsn1=function(t){var e={},r=[];if(y.validate(t,E,e,r)&&(t=y.fromDer(h.util.createBuffer(e.privateKey))),e={},r=[],!y.validate(t,C,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,o,s,u,c,l,f;return i=h.util.createBuffer(e.privateKeyModulus).toHex(),a=h.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=h.util.createBuffer(e.privateKeyPrivateExponent).toHex(),s=h.util.createBuffer(e.privateKeyPrime1).toHex(),u=h.util.createBuffer(e.privateKeyPrime2).toHex(),c=h.util.createBuffer(e.privateKeyExponent1).toHex(),l=h.util.createBuffer(e.privateKeyExponent2).toHex(),f=h.util.createBuffer(e.privateKeyCoefficient).toHex(),v.setRsaPrivateKey(new p(i,16),new p(a,16),new p(o,16),new p(s,16),new p(u,16),new p(c,16),new p(l,16),new p(f,16))},v.privateKeyToAsn1=v.privateKeyToRSAPrivateKey=function(t){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(0).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.n)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.e)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.d)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.p)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.q)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.dP)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.dQ)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.qInv))])},v.publicKeyFromAsn1=function(t){var e={},r=[];if(y.validate(t,S,e,r)){var n=y.derToOid(e.publicKeyOid);if(n!==v.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!y.validate(t,b,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=h.util.createBuffer(e.publicKeyModulus).toHex(),o=h.util.createBuffer(e.publicKeyExponent).toHex();return v.setRsaPublicKey(new p(a,16),new p(o,16))},v.publicKeyToAsn1=v.publicKeyToSubjectPublicKeyInfo=function(t){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(v.oids.rsaEncryption).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,[v.publicKeyToRSAPublicKey(t)])])},v.publicKeyToRSAPublicKey=function(t){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.n)),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,o(t.e))])}},function(t,e,r){"use strict";(function(e){/*!
 * util/base64url.js - Implementation of web-safe Base64 Encoder/Decoder
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(85),i={encode:function(t,r){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e.isBuffer(t)||(t=e.from(t,r)),n.encode(t)},decode:n.toBuffer};t.exports=i}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){return["certIssuer","certSubject"].forEach(function(e){var r=u.pki.RDNAttributesAsArray(t[e]),n=t[e]={};r.forEach(function(t){n[t.name||t.type]=t.value})}),t}function i(t){var e={};if(!u.pem.decode(t).some(function(t){switch(t.type){case"CERTIFICATE":e.form="pkix";break;case"PUBLIC KEY":e.form="spki";break;case"PRIVATE KEY":e.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":e.form="private";break;default:return!1}return e.body=t.body,!0}))throw new Error("supported PEM type not found");return e}function a(t,r){var i,a={},o=[],s=r.form,f=r.body,p=null;switch(r=u.asn1.fromDer(f),s){case"private":t.all().some(function(t){if(i)return!1;if(!t.validators)return!1;var e=t.validators.oid,n=t.validators.privateKey;return!!n&&(a={},o=[],i=u.asn1.validate(r,n,a,o),i&&(a.keyOid=u.asn1.oidToDer(e),a.parsed=!0),i)}),a.type="private";break;case"pkcs8":i=u.asn1.validate(r,l.helpers.validators.privateKey,a,o),a.type="private";break;case"public":case"spki":i=u.asn1.validate(r,l.helpers.validators.publicKey,a,o),a.type="public";break;case"pkix":case"x509":if(i=u.asn1.validate(r,l.helpers.validators.certificate,a,o)){a=n(a);var d=u.md.sha1.create();d.update(f),p=c.base64url.encode(e.from(d.digest().toHex(),"hex"))}a.type="public"}return i?(a.keyOid&&(a.keyOid=u.asn1.derToOid(a.keyOid)),i=null,h.all().forEach(function(t){i||t&&"function"==typeof t.import&&(i=t.import(a))}),i&&a.certSubject&&a.certSubject.commonName&&(i.kid=a.certSubject.commonName),i&&p&&(i.x5t=p),i):null}/*!
 * jwk/keystore.js - JWK KeyStore Implementation
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var o=r(5).clone,s=r(8),u=r(3),c=r(4),l={BaseKey:r(24),helpers:r(20)},f=function(){var t={};Object.defineProperty(this,"register",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");var r=e.kty;return t[r]=e,this}}),Object.defineProperty(this,"unregister",{value:function(e){if(!e||"string"!=typeof e.kty||!e.kty)throw new Error("invalid Key factory");var r=e.kty;return e===t[r]&&delete t[r],this}}),Object.defineProperty(this,"get",{value:function(e){return t[e||""]||void 0}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(t).map(function(e){return t[e]})}})},h=new f,p=function(t,r){var n={};Object.defineProperty(this,"generate",{value:function(e,r,n){var i=t.get(e);if(!i)return Promise.reject(new Error("unsupported key type"));n=o(n||{}),n.kty=e;var a=this;return i.generate(r).then(function(t){return t=s(n,t,{kty:e}),a.add(t)})}}),Object.defineProperty(this,"add",{value:function(r,s,u){u=u||{};var c;if(e.isBuffer(r)||"string"==typeof r)if("json"===(s=(s||"json").toLowerCase()))r=JSON.parse(r.toString("utf8"));else try{if(c="pem"===s?i(r):{body:r.toString("binary"),form:s},!(r=a(t,c)))throw new Error("no importer for key");Object.keys(u).forEach(function(t){r[t]=u[t]})}catch(t){return Promise.reject(t)}else r=p.isKey(r)?r.toJSON(!0):o(r);var f=t.get(r.kty);if(!f)return Promise.reject(new Error("unsupported key type"));var h=this;return f.prepare(r).then(function(t){return new l.BaseKey(r.kty,h,r,t)}).then(function(t){var e=t.kid||"";return(n[e]=n[e]||[]).push(t),t})}}),Object.defineProperty(this,"remove",{value:function(t){if(t){var e=n[t.kid];if(e){var r=e.indexOf(t);-1!==r&&(e.splice(r,1),e.length||delete n[t.kid])}}}}),Object.defineProperty(this,"all",{value:function(t,e){t=t||{},void 0!==t.kid&&null!==t.kid&&"string"!=typeof t.kid&&(t.kid=String(t.kid));var i=[],a=function(e){return(!t.kty||!e.kty||t.kty===e.kty)&&((!t.use||!e.use||t.use===e.use)&&(!t.alg||("dir"===t.alg||!e.alg||t.alg===e.alg)&&e.supports(t.alg)))};return Object.keys(n).forEach(function(e){if(!t.kid||t.kid===e){var r=n[e].filter(a);r.length&&(i=i.concat(r))}}),!e&&r&&(i=i.concat(r.all(t))),i}}),Object.defineProperty(this,"get",{value:function(t,e,n){"boolean"==typeof t?(n=t,e=t=null):"object"==typeof t&&(n=e,e=t,t=null),e=e||{},t&&(e.kid=t),void 0!==e.kid&&null!==e.kid&&"string"!=typeof e.kid&&(e.kid=String(e.kid));var i=this.all(e,!0);return i.length||!r||n||(i=r.get(e,n)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new p(t,this)}}),Object.defineProperty(this,"toJSON",{value:function(t){var e=[];return Object.keys(n).forEach(function(r){var i=n[r].map(function(e){return e.toJSON(t)});e=e.concat(i)}),{keys:e}}})};p.isKeyStore=function(t){return!!t&&("object"==typeof t&&("function"==typeof t.get&&"function"==typeof t.all&&"function"==typeof t.generate&&"function"==typeof t.add&&"function"==typeof t.remove))},p.createKeyStore=function(){return new p(h)},p.asKeyStore=function(t){if(p.isKeyStore(t))return Promise.resolve(t);var e,r=p.createKeyStore();if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t))e=t;else{if(!("keys"in t))return Promise.reject(new Error("invalid keystore"));e=t.keys}e=e.map(function(t){return r.add(t)});var n=Promise.all(e);return n=n.then(function(){return r})},p.isKey=function(t){return!!t&&("object"==typeof t&&(!!p.isKeyStore(t.keystore)&&("string"==typeof t.kty&&"number"==typeof t.length&&"function"==typeof t.algorithms&&"function"==typeof t.supports&&"function"==typeof t.encrypt&&"function"==typeof t.decrypt&&"function"==typeof t.wrap&&"function"==typeof t.unwrap&&"function"==typeof t.sign&&"function"==typeof t.verify)))},p.createKey=function(t,e,r){return p.createKeyStore().generate(t,e,r)},p.asKey=function(t,e,r){return p.isKey(t)?Promise.resolve(t):t=p.createKeyStore().add(t,e,r)},t.exports={KeyRegistry:f,KeyStore:p,registry:h}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){/*!
 * jwk/basekey.js - JWK Key Base Class Implementation
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(5),i=r(8),a=r(89),o=n.assign,s=n.clone,u=n.flatten,c=n.intersection,l=n.omit,f=n.pick,h=n.uniq,p=r(36),d=r(61),y=r(20),g=r(4),v=function(t,r,n,v){if(!t)throw new Error("kty cannot be null");if(!r)throw new Error("keystore cannot be null");if(!n)throw new Error("props cannot be null");if("string"==typeof n&&(n=JSON.parse(n)),!v)throw new Error("cfg cannot be null");var m,E,C=[],b={},S={};n=s(n),m=o({},n[y.INTERNALS.THUMBPRINT_KEY]||{}),delete n[y.INTERNALS.THUMBPRINT_KEY],Object.keys(m).forEach(function(t){var r=m[t];E||(E=r,e.isBuffer(E)&&(E=g.base64url.encode(E))),e.isBuffer(r)||(r=g.base64url.decode(r),m[t]=r)}),n.kty=t,n.kid=n.kid||E||a();var w=Object.keys(y.COMMON_PROPS).map(function(t){return y.COMMON_PROPS[t].name});S.base=f(n,w),C=C.concat(Object.keys(S.base)),S.public=s(n),b.public=v.publicKey(S.public),b.public&&(C=C.concat(Object.keys(S.public))),S.private=s(n),b.private=v.privateKey(S.private),b.private&&(C=C.concat(Object.keys(S.private))),S.extra=l(n,C);var A;A=b.public&&"length"in b.public?b.public.length:b.private&&"length"in b.private?b.private.length:NaN,Object.defineProperty(this,"keystore",{value:r,enumerable:!0}),Object.defineProperty(this,"length",{value:A,enumerable:!0}),Object.defineProperty(this,"kty",{value:t,enumerable:!0}),Object.defineProperty(this,"kid",{value:S.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:S.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:S.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(t){if(t=(t||y.INTERNALS.THUMBPRINT_HASH).toUpperCase(),m[t])return Promise.resolve(m[t]);var e=y.thumbprint(v,S,t);return e=e.then(function(e){return e&&(m[t]=e),e})}}),Object.defineProperty(this,"algorithms",{value:function(e){var r=[];this.use&&"sig"!==this.use||(e&&d.MODE_SIGN!==e||r.push(d.MODE_SIGN),e&&d.MODE_VERIFY!==e||r.push(d.MODE_VERIFY)),this.use&&"enc"!==this.use||(e&&d.MODE_ENCRYPT!==e||r.push(d.MODE_ENCRYPT),e&&d.MODE_DECRYPT!==e||r.push(d.MODE_DECRYPT),e&&d.MODE_WRAP!==e||r.push(d.MODE_WRAP),e&&d.MODE_UNWRAP!==e||r.push(d.MODE_UNWRAP));var n=this,i=r.map(function(t){return v.algorithms.call(n,b,t)});if(i=u(i),i=h(i),this.alg){var a;a="oct"===t?[this.alg,"dir"]:[this.alg],i=c(i,a)}return i}}),Object.defineProperty(this,"supports",{value:function(t,e){return-1!==this.algorithms(e).indexOf(t)}}),Object.defineProperty(this,"has",{value:function(t,e){var r=!1;return r=r||!!(S.base&&t in S.base),r=r||!!(b.public&&t in b.public),r=r||!!(S.extra&&t in S.extra),r=r||!!(e&&b.private&&t in b.private)}}),Object.defineProperty(this,"get",{value:function(t,e){var r;return S.base&&t in S.base?r=S.base:b.public&&t in b.public?r=b.public:S.extra&&t in S.extra?r=S.extra:e&&b.private&&t in b.private&&(r=b.private),r&&r[t]||null}}),Object.defineProperty(this,"toJSON",{value:function(t,e){Array.isArray(t)&&(e=t,t=!1);var r={};return r=i(r,S.base,S.public,"boolean"==typeof t&&t?S.private:{},S.extra),r=l(r,e||[])}}),Object.defineProperty(this,"toPEM",{value:function(t){if(null===t&&(t=!1),!v.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var e=t?b.private:b.public;if(!e)throw new Error("Invalid key");return v.convertToPEM.call(this,e,t)}}),Object.defineProperty(this,"toObject",{value:function(t,e){Array.isArray(t)&&(e=t,t=!1);var r={};return r=i(r,S.base,b.public,"boolean"==typeof t&&t?b.private:{},S.extra),r=l(r,(e||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(t,e,r){if(-1===this.algorithms("sign").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var n=v.signKey.call(this,t,b);return n?(r=r?s(r):{},v.signProps&&(r=i(r,v.signProps.call(this,t,r))),p.sign(t,n,e,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(t,e,r,n){if(-1===this.algorithms("verify").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var a=v.verifyKey.call(this,t,b);return a?(n=n?s(n):{},v.verifyProps&&(n=i(n,v.verifyProps.call(this,t,n))),p.verify(t,a,e,r,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(t,e,r){if(-1===this.algorithms("encrypt").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var n=v.encryptKey.call(this,t,b);return n?(r=r?s(r):{},v.encryptProps&&(r=i(r,v.encryptProps.call(this,t,r))),p.encrypt(t,n,e,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(t,e,r){if(-1===this.algorithms("decrypt").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var n=v.decryptKey.call(this,t,b);return n?(r=r?s(r):{},v.decryptProps&&(r=i(r,v.decryptProps.call(this,t,r))),p.decrypt(t,n,e,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(t,e,r){if(-1===this.algorithms("wrap").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var n=v.wrapKey.call(this,t,b);return n?(r=r?s(r):{},v.wrapProps&&(r=i(r,v.wrapProps.call(this,t,r))),p.encrypt(t,n,e,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(t,e,r){if(-1===this.algorithms("unwrap").indexOf(t))return Promise.reject(new Error("unsupported algorithm"));var n=v.unwrapKey.call(this,t,b);return n?(r=r?s(r):{},v.unwrapProps&&(r=i(r,v.unwrapProps.call(this,t,r))),p.decrypt(t,n,e,r)):Promise.reject(new Error("improper key"))}})};t.exports=v}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){var r=t.replace("SHA-","SHA").toLowerCase(),n={name:t},o=function(t){var n=i.md[r].create();return n.update(t.toString("binary")),n=e.from(n.digest().bytes(),"binary"),Promise.resolve(n)},s=function(t){var r;return r=a.subtleCrypto.digest(n,t),r=r.then(function(t){return t=e.from(t)})},u=function(t){var e=a.nodeCrypto.createHash(r);return e.update(t),e.digest()};return a.setupFallback(u,s,o)}/*!
 * algorithms/sha.js - Cryptographic Secure Hash Algorithms, versions 1 and 2
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(3),a=r(6),o={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(t){o[t]={digest:n(t)}}),t.exports=o}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){/*!
 * deps/ciphermodes/pack.js - Pack/Unpack Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var n=r(38),i=t.exports={intToBigEndian:function(t,r,n){if("number"==typeof t)switch(arguments.length){case 1:r=e.alloc(4),i.intToBigEndian(t,r,0);break;case 3:r[n]=255&t>>>24,r[++n]=255&t>>>16,r[++n]=255&t>>>8,r[++n]=255&t;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:r=e.alloc(4*t.length),i.intToBigEndian(t,r,0);break;case 3:for(var a=0;a<t.length;++a)i.intToBigEndian(t[a],r,n),n+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},longToBigEndian:function(t,r,n){if(Array.isArray(t))switch(arguments.length){case 1:r=e.alloc(8*t.length),i.longToBigEndian(t,r,0);break;case 3:for(var a=0;a<t.length;++a)i.longToBigEndian(t[a],r,n),n+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:r=e.alloc(8),i.longToBigEndian(t,r,0);break;case 3:var o=t.low,s=t.high;i.intToBigEndian(s,r,n),i.intToBigEndian(o,r,n+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},bigEndianToInt:function(t,e,r){switch(arguments.length){case 2:var n=t[e]<<24;return n|=(255&t[++e])<<16,n|=(255&t[++e])<<8,n|=255&t[++e];case 3:for(var a=0;a<r.length;++a)r[a]=i.bigEndianToInt(t,e),e+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(t,e,r){switch(arguments.length){case 2:var a=i.bigEndianToInt(t,e),o=i.bigEndianToInt(t,e+4);return new n(o,a);case 3:for(var s=0;s<r.length;++s)r[s]=i.bigEndianToLong(t,e),e+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";/*!
 * jws/index.js - JSON Web Signature (JWS) Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n={createSign:r(74).createSign,createVerify:r(110).createVerify};t.exports=n},function(t,e,r){var n=r(1);r(2),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(1);r(14),r(2),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,i=null,a={};return a.start=function(a,o){if(null!==a)if("string"==typeof a){if(!((a=a.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');e=n.md.algorithms[a].create()}else e=a;if(null===o)o=t;else{if("string"==typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var s=o;o=n.util.createBuffer();for(var u=0;u<s.length;++u)o.putByte(s[u])}var c=o.length();c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var s=o.at(u);r.putByte(54^s),i.putByte(92^s)}if(c<e.blockLength)for(var s=e.blockLength-c,u=0;u<s;++u)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},a.update=function(t){e.update(t)},a.getMac=function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()},a.digest=a.getMac,a}},function(t,e,r){(function(e){var n=r(1);r(29),r(14),r(2);var i,a=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(31)),t.exports=n.pbkdf2=a.pbkdf2=function(t,r,a,o,s,u){function c(){if(C>p)return u(null,E);y.start(null,null),y.update(r),y.update(n.util.int32ToBytes(C)),g=m=y.digest().getBytes(),b=2,l()}function l(){if(b<=a)return y.start(null,null),y.update(m),v=y.digest().getBytes(),g=n.util.xorBytes(g,v,f),m=v,++b,n.util.setImmediate(l);E+=C<p?g:g.substr(0,d),++C,c()}if("function"==typeof s&&(u=s,s=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===s||"object"!=typeof s)&&(i.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),t=e.from(t,"binary"),r=e.from(r,"binary"),u?4===i.pbkdf2Sync.length?i.pbkdf2(t,r,a,o,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):i.pbkdf2(t,r,a,o,s,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,r,a,o).toString("binary"):i.pbkdf2Sync(t,r,a,o,s).toString("binary");if(void 0!==s&&null!==s||(s="sha1"),"string"==typeof s){if(!(s in n.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=n.md[s].create()}var f=s.digestLength;if(o>4294967295*f){var h=new Error("Derived key is too long.");if(u)return u(h);throw h}var p=Math.ceil(o/f),d=o-(p-1)*f,y=n.hmac.create();y.start(s,t);var g,v,m,E="";if(!u){for(var C=1;C<=p;++C){y.start(null,null),y.update(r),y.update(n.util.int32ToBytes(C)),g=m=y.digest().getBytes();for(var b=2;b<=a;++b)y.start(null,null),y.update(m),v=y.digest().getBytes(),g=n.util.xorBytes(g,v,f),m=v;E+=C<p?g:g.substr(0,d)}return E}var b,C=1;c()}}).call(e,r(0).Buffer)},function(t,e){},function(t,e,r){function n(){s=String.fromCharCode(128),s+=a.util.fillString(String.fromCharCode(0),64),u=!0}function i(t,e,r){for(var n,i,a,o,s,u,c,l,f=r.length();f>=64;){for(i=t.h0,a=t.h1,o=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,c=s^a&(o^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=s^a&(o^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=a&o|s&(a^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=a^o^s,n=(i<<5|i>>>27)+c+u+3395469782+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+o|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,f-=64}}var a=r(1);r(14),r(2);var o=t.exports=a.sha1=a.sha1||{};a.md.sha1=a.md.algorithms.sha1=o,o.create=function(){u||n();var t=null,e=a.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,n=0;n<r;++n)o.fullMessageLength.push(0);return e=a.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o},o.start(),o.update=function(n,s){"utf8"===s&&(n=a.util.encodeUtf8(n));var u=n.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=u[1],u[1]=u[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(n),i(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var n=a.util.createBuffer();n.putBytes(e.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;n.putBytes(s.substr(0,o.blockLength-c));for(var l,f,h=8*o.fullMessageLength[0],p=0;p<o.fullMessageLength.length-1;++p)l=8*o.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,n.putInt32(h>>>0),h=l>>>0;n.putInt32(h);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};i(d,r,n);var y=a.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y},o};var s=null,u=!1},function(t,e,r){function n(t,e){var r=function(){return new s.des.Algorithm(t,e)};s.cipher.registerAlgorithm(t,r)}function i(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,C=0;C<g;C++){var b=t.getInt32(),S=t.getInt32();e=252645135&(b>>>4^S),S^=e,b^=e<<4,e=65535&(S>>>-16^b),b^=e,S^=e<<-16,e=858993459&(b>>>2^S),S^=e,b^=e<<2,e=65535&(S>>>-16^b),b^=e,S^=e<<-16,e=1431655765&(b>>>1^S),S^=e,b^=e<<1,e=16711935&(S>>>8^b),b^=e,S^=e<<8,e=1431655765&(b>>>1^S),S^=e,b^=e<<1,e=b<<8|S>>>20&240,b=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=e;for(var w=0;w<m.length;++w){m[w]?(b=b<<2|b>>>26,S=S<<2|S>>>26):(b=b<<1|b>>>27,S=S<<1|S>>>27),b&=-15,S&=-15;var A=r[b>>>28]|n[b>>>24&15]|i[b>>>20&15]|a[b>>>16&15]|o[b>>>12&15]|s[b>>>8&15]|u[b>>>4&15],T=c[S>>>28]|l[S>>>24&15]|f[S>>>20&15]|h[S>>>16&15]|p[S>>>12&15]|d[S>>>8&15]|y[S>>>4&15];e=65535&(T>>>16^A),v[E++]=A^e,v[E++]=T^e<<16}}return v}function a(t,e,r,n){var i,a=32===t.length?3:9;i=3===a?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,s=e[0],g=e[1];o=252645135&(s>>>4^g),g^=o,s^=o<<4,o=65535&(s>>>16^g),g^=o,s^=o<<16,o=858993459&(g>>>2^s),s^=o,g^=o<<2,o=16711935&(g>>>8^s),s^=o,g^=o<<8,o=1431655765&(s>>>1^g),g^=o,s^=o<<1,s=s<<1|s>>>31,g=g<<1|g>>>31;for(var v=0;v<a;v+=3){for(var m=i[v+1],E=i[v+2],C=i[v];C!=m;C+=E){var b=g^t[C],S=(g>>>4|g<<28)^t[C+1];o=s,s=g,g=o^(c[b>>>24&63]|f[b>>>16&63]|p[b>>>8&63]|y[63&b]|u[S>>>24&63]|l[S>>>16&63]|h[S>>>8&63]|d[63&S])}o=s,s=g,g=o}s=s>>>1|s<<31,g=g>>>1|g<<31,o=1431655765&(s>>>1^g),g^=o,s^=o<<1,o=16711935&(g>>>8^s),s^=o,g^=o<<8,o=858993459&(g>>>2^s),s^=o,g^=o<<2,o=65535&(s>>>16^g),g^=o,s^=o<<16,o=252645135&(s>>>4^g),g^=o,s^=o<<4,r[0]=s,r[1]=g}function o(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),n="DES-"+r;e=t.decrypt?s.cipher.createDecipher(n,t.key):s.cipher.createCipher(n,t.key);var i=e.start;return e.start=function(t,r){var n=null;r instanceof s.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=t,i.call(e,r)},e}var s=r(1);r(28),r(45),r(2),t.exports=s.des=s.des||{},s.des.startEncrypting=function(t,e,r,n){var i=o({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},s.des.createEncryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!1,mode:e})},s.des.startDecrypting=function(t,e,r,n){var i=o({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},s.des.createDecryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!0,mode:e})},s.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return a(r._keys,t,e,!1)},decrypt:function(t,e){return a(r._keys,t,e,!0)}}}),r._init=!1},s.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=s.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=i(e),this._init=!0}},n("DES-ECB",s.cipher.modes.ecb),n("DES-CBC",s.cipher.modes.cbc),n("DES-CFB",s.cipher.modes.cfb),n("DES-OFB",s.cipher.modes.ofb),n("DES-CTR",s.cipher.modes.ctr),n("3DES-ECB",s.cipher.modes.ecb),n("3DES-CBC",s.cipher.modes.cbc),n("3DES-CFB",s.cipher.modes.cfb),n("3DES-OFB",s.cipher.modes.ofb),n("3DES-CTR",s.cipher.modes.ctr);var u=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],c=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],l=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],f=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],h=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],p=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],y=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},function(t,e,r){function n(t,e){"string"==typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],e.type&&e.type===r.type?n=r:e.name&&e.name===r.name?n=r:e.shortName&&e.shortName===r.shortName&&(n=r);return n}function i(t){for(var e,r,n=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]),i=t.attributes,a=0;a<i.length;++a){e=i[a];var o=e.value,s=f.Type.PRINTABLESTRING;"valueTagClass"in e&&(s=e.valueTagClass)===f.Type.UTF8&&(o=l.util.encodeUtf8(o)),r=f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.type).getBytes()),f.create(f.Class.UNIVERSAL,s,!1,o)])]),n.value.push(r)}return n}function a(t){for(var e,r=0;r<t.length;++r){if(e=t[r],void 0===e.name&&(e.type&&e.type in h.oids?e.name=h.oids[e.type]:e.shortName&&e.shortName in d&&(e.name=h.oids[d[e.shortName]])),void 0===e.type){if(!(e.name&&e.name in h.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=e,n}e.type=h.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in d&&(e.shortName=d[e.name]),e.type===p.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=f.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(h.certificateExtensionToAsn1(o(e.extensions[i])))}if(void 0===e.value){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function o(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in h.oids&&(t.name=h.oids[t.id]),void 0===t.id){if(!(t.name&&t.name in h.oids)){var r=new Error("Extension ID not specified.");throw r.extension=t,r}t.id=h.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var n=0,a=0,o=0;t.digitalSignature&&(a|=128,n=7),t.nonRepudiation&&(a|=64,n=6),t.keyEncipherment&&(a|=32,n=5),t.dataEncipherment&&(a|=16,n=4),t.keyAgreement&&(a|=8,n=3),t.keyCertSign&&(a|=4,n=2),t.cRLSign&&(a|=2,n=1),t.encipherOnly&&(a|=1,n=0),t.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);0!==o?s+=String.fromCharCode(a)+String.fromCharCode(o):0!==a&&(s+=String.fromCharCode(a)),t.value=f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,s)}else if("basicConstraints"===t.name)t.value=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(f.create(f.Class.UNIVERSAL,f.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);var u=t.value.value;for(var c in t)!0===t[c]&&(c in p?u.push(f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(p[c]).getBytes())):-1!==c.indexOf(".")&&u.push(f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(c).getBytes())))}else if("nsCertType"===t.name){var n=0,a=0;t.client&&(a|=128,n=7),t.server&&(a|=64,n=6),t.email&&(a|=32,n=5),t.objsign&&(a|=16,n=4),t.reserved&&(a|=8,n=3),t.sslCA&&(a|=4,n=2),t.emailCA&&(a|=2,n=1),t.objCA&&(a|=1,n=0);var s=String.fromCharCode(n);0!==a&&(s+=String.fromCharCode(a)),t.value=f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,s)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);for(var d,y=0;y<t.altNames.length;++y){d=t.altNames[y];var s=d.value;if(7===d.type&&d.ip){if(null===(s=l.util.bytesFromIP(d.ip))){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===d.type&&(s=d.oid?f.oidToDer(f.oidToDer(d.oid)):f.oidToDer(s));t.value.value.push(f.create(f.Class.CONTEXT_SPECIFIC,d.type,!1,s))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=f.create(f.Class.UNIVERSAL,f.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var g=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=g.toHex(),t.value=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,g.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);var u=t.value.value;if(t.keyIdentifier){var v=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;u.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!1,v))}if(t.authorityCertIssuer){var m=[f.create(f.Class.CONTEXT_SPECIFIC,4,!0,[i(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];u.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var E=l.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);u.push(f.create(f.Class.CONTEXT_SPECIFIC,2,!1,E))}}else if("cRLDistributionPoints"===t.name){t.value=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);for(var d,u=t.value.value,C=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]),b=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[]),y=0;y<t.altNames.length;++y){d=t.altNames[y];var s=d.value;if(7===d.type&&d.ip){if(null===(s=l.util.bytesFromIP(d.ip))){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===d.type&&(s=d.oid?f.oidToDer(f.oidToDer(d.oid)):f.oidToDer(s));b.value.push(f.create(f.Class.CONTEXT_SPECIFIC,d.type,!1,s))}C.value.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[b])),u.push(C)}if(void 0===t.value){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function s(t,e){switch(t){case p["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.hash.algorithmOid).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.mgf.algorithmOid).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(e.mgf.hash.algorithmOid).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(f.create(f.Class.CONTEXT_SPECIFIC,2,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(e.saltLength).getBytes())])),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,r);default:return f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")}}function u(t){var e=f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,o=f.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===f.Type.UTF8&&(a=l.util.encodeUtf8(a));var s=!1;"valueConstructed"in i&&(s=i.valueConstructed);var u=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(i.type).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SET,!0,[f.create(f.Class.UNIVERSAL,o,s,a)])]);e.value.push(u)}return e}function c(t){return t>=b&&t<S?f.create(f.Class.UNIVERSAL,f.Type.UTCTIME,!1,f.dateToUtcTime(t)):f.create(f.Class.UNIVERSAL,f.Type.GENERALIZEDTIME,!1,f.dateToGeneralizedTime(t))}var l=r(1);r(17),r(9),r(33),r(14),r(80),r(13),r(18),r(35),r(21),r(2);var f=l.asn1,h=t.exports=l.pki=l.pki||{},p=h.oids,d={};d.CN=p.commonName,d.commonName="CN",d.C=p.countryName,d.countryName="C",d.L=p.localityName,d.localityName="L",d.ST=p.stateOrProvinceName,d.stateOrProvinceName="ST",d.O=p.organizationName,d.organizationName="O",d.OU=p.organizationalUnitName,d.organizationalUnitName="OU",d.E=p.emailAddress,d.emailAddress="E";var y=l.pki.rsa.publicKeyValidator,g={name:"Certificate",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:f.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:f.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:f.Class.UNIVERSAL,type:f.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:f.Class.UNIVERSAL,type:f.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:f.Class.UNIVERSAL,type:f.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:f.Class.UNIVERSAL,type:f.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},y,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:f.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:f.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:f.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:f.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},v={name:"rsapss",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:f.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:f.Class.UNIVERSAL,type:f.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:f.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:f.Class.UNIVERSAL,type:f.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:f.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:f.Class.UNIVERSAL,type:f.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:f.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:f.Class.UNIVERSAL,type:f.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},m={name:"CertificationRequestInfo",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},y,{name:"CertificationRequestInfo.attributes",tagClass:f.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:f.Class.UNIVERSAL,type:f.Type.SET,constructed:!0}]}]}]},E={name:"CertificationRequest",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[m,{name:"CertificationRequest.signatureAlgorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:f.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};h.RDNAttributesAsArray=function(t,e){for(var r,n,i,a=[],o=0;o<t.value.length;++o){r=t.value[o];for(var s=0;s<r.value.length;++s)i={},n=r.value[s],i.type=f.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in p&&(i.name=p[i.type],i.name in d&&(i.shortName=d[i.name])),e&&(e.update(i.type),e.update(i.value)),a.push(i)}return a},h.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=f.derToOid(n.value[0].value),a=n.value[1].value,o=0;o<a.length;++o){var s={};if(s.type=i,s.value=a[o].value,s.valueTagClass=a[o].type,s.type in p&&(s.name=p[s.type],s.name in d&&(s.shortName=d[s.name])),s.type===p.extensionRequest){s.extensions=[];for(var u=0;u<s.value.length;++u)s.extensions.push(h.certificateExtensionFromAsn1(s.value[u]))}e.push(s)}return e};var C=function(t,e,r){var n={};if(t!==p["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:p.sha1},mgf:{algorithmOid:p.mgf1,hash:{algorithmOid:p.sha1}},saltLength:20});var i={},a=[];if(!f.validate(e,v,i,a)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=a,o}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=f.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=f.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=f.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n};h.certificateFromPem=function(t,e,r){var n=l.pem.decode(t)[0];if("CERTIFICATE"!==n.type&&"X509 CERTIFICATE"!==n.type&&"TRUSTED CERTIFICATE"!==n.type){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=f.fromDer(n.body,r);return h.certificateFromAsn1(a,e)},h.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:f.toDer(h.certificateToAsn1(t)).getBytes()};return l.pem.encode(r,{maxline:e})},h.publicKeyFromPem=function(t){var e=l.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=f.fromDer(e.body);return h.publicKeyFromAsn1(n)},h.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:f.toDer(h.publicKeyToAsn1(t)).getBytes()};return l.pem.encode(r,{maxline:e})},h.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:f.toDer(h.publicKeyToRSAPublicKey(t)).getBytes()};return l.pem.encode(r,{maxline:e})},h.getPublicKeyFingerprint=function(t,e){e=e||{};var r,n=e.md||l.md.sha1.create(),i=e.type||"RSAPublicKey";switch(i){case"RSAPublicKey":r=f.toDer(h.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=f.toDer(h.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(r);var a=n.digest();if("hex"===e.encoding){var o=a.toHex();return e.delimiter?o.match(/.{2}/g).join(e.delimiter):o}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},h.certificationRequestFromPem=function(t,e,r){var n=l.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==n.type){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=f.fromDer(n.body,r);return h.certificationRequestFromAsn1(a,e)},h.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:f.toDer(h.certificationRequestToAsn1(t)).getBytes()};return l.pem.encode(r,{maxline:e})},h.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return n(t.issuer,e)},t.issuer.addField=function(e){a([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return n(t.subject,e)},t.subject.addField=function(e){a([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){a(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){a(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)o(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],e.id&&r.id===e.id?n=r:e.name&&r.name===e.name&&(n=r);return n},t.sign=function(e,r){t.md=r||l.md.sha1.create();var n=p[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=h.getTBSCertificate(t);var a=f.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=n.attributes,a.actualIssuer=i.attributes,a}var o=e.md;if(null===o){if(e.signatureOid in p){switch(p[e.signatureOid]){case"sha1WithRSAEncryption":o=l.md.sha1.create();break;case"md5WithRSAEncryption":o=l.md.md5.create();break;case"sha256WithRSAEncryption":o=l.md.sha256.create();break;case"sha384WithRSAEncryption":o=l.md.sha384.create();break;case"sha512WithRSAEncryption":o=l.md.sha512.create();break;case"RSASSA-PSS":o=l.md.sha256.create()}}if(null===o){var a=new Error("Could not compute certificate digest. Unknown signature OID.");throw a.signatureOid=e.signatureOid,a}var s=e.tbsCertificate||h.getTBSCertificate(e),u=f.toDer(s);o.update(u.getBytes())}if(null!==o){var c;switch(e.signatureOid){case p.sha1WithRSAEncryption:c=void 0;break;case p["RSASSA-PSS"]:var d,y;if(void 0===(d=p[e.signatureParameters.mgf.hash.algorithmOid])||void 0===l.md[d]){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=d,a}if(void 0===(y=p[e.signatureParameters.mgf.algorithmOid])||void 0===l.mgf[y]){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=y,a}if(y=l.mgf[y].create(l.md[d].create()),void 0===(d=p[e.signatureParameters.hash.algorithmOid])||void 0===l.md[d])throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:d};c=l.pss.create(l.md[d].create(),y,e.signatureParameters.saltLength)}r=t.publicKey.verify(o.digest().getBytes(),e.signature,c)}return r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,o,s=0;r&&s<n.attributes.length;++s)a=n.attributes[s],o=i.attributes[s],a.type===o.type&&a.value===o.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return h.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=p.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return l.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t},h.certificateFromAsn1=function(t,e){var r={},i=[];if(!f.validate(t,g,r,i)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=i,o}var s=f.derToOid(r.publicKeyOid);if(s!==h.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=h.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=l.util.createBuffer(r.certSerialNumber);u.serialNumber=c.toHex(),u.signatureOid=l.asn1.derToOid(r.certSignatureOid),u.signatureParameters=C(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=l.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=C(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(f.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(f.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(f.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(f.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=d[0],u.validity.notAfter=d[1],u.tbsCertificate=r.tbsCertificate,e){if(u.md=null,u.signatureOid in p){var s=p[u.signatureOid];switch(s){case"sha1WithRSAEncryption":u.md=l.md.sha1.create();break;case"md5WithRSAEncryption":u.md=l.md.md5.create();break;case"sha256WithRSAEncryption":u.md=l.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=l.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=l.md.sha512.create();break;case"RSASSA-PSS":u.md=l.md.sha256.create()}}if(null===u.md){var o=new Error("Could not compute certificate digest. Unknown signature OID.");throw o.signatureOid=u.signatureOid,o}var y=f.toDer(u.tbsCertificate);u.md.update(y.getBytes())}var v=l.md.sha1.create();u.issuer.getField=function(t){return n(u.issuer,t)},u.issuer.addField=function(t){a([t]),u.issuer.attributes.push(t)},u.issuer.attributes=h.RDNAttributesAsArray(r.certIssuer,v),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=v.digest().toHex();var m=l.md.sha1.create();return u.subject.getField=function(t){return n(u.subject,t)},u.subject.addField=function(t){a([t]),u.subject.attributes.push(t)},u.subject.attributes=h.RDNAttributesAsArray(r.certSubject,m),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=m.digest().toHex(),r.certExtensions?u.extensions=h.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=h.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},h.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(h.certificateExtensionFromAsn1(n.value[i]));return e},h.certificateExtensionFromAsn1=function(t){var e={};if(e.id=f.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===f.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in p)if(e.name=p[e.id],"keyUsage"===e.name){var r=f.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=128==(128&n),e.nonRepudiation=64==(64&n),e.keyEncipherment=32==(32&n),e.dataEncipherment=16==(16&n),e.keyAgreement=8==(8&n),e.keyCertSign=4==(4&n),e.cRLSign=2==(2&n),e.encipherOnly=1==(1&n),e.decipherOnly=128==(128&i)}else if("basicConstraints"===e.name){var r=f.fromDer(e.value);r.value.length>0&&r.value[0].type===f.Type.BOOLEAN?e.cA=0!==r.value[0].value.charCodeAt(0):e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===f.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),null!==a&&(e.pathLenConstraint=f.derToInteger(a))}else if("extKeyUsage"===e.name)for(var r=f.fromDer(e.value),o=0;o<r.value.length;++o){var s=f.derToOid(r.value[o].value);s in p?e[p[s]]=!0:e[s]=!0}else if("nsCertType"===e.name){var r=f.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=128==(128&n),e.server=64==(64&n),e.email=32==(32&n),e.objsign=16==(16&n),e.reserved=8==(8&n),e.sslCA=4==(4&n),e.emailCA=2==(2&n),e.objCA=1==(1&n)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.altNames=[];for(var u,r=f.fromDer(e.value),c=0;c<r.value.length;++c){u=r.value[c];var h={type:u.type,value:u.value};switch(e.altNames.push(h),u.type){case 1:case 2:case 6:break;case 7:h.ip=l.util.bytesToIP(u.value);break;case 8:h.oid=f.derToOid(u.value)}}}else if("subjectKeyIdentifier"===e.name){var r=f.fromDer(e.value);e.subjectKeyIdentifier=l.util.bytesToHex(r.value)}return e},h.certificationRequestFromAsn1=function(t,e){var r={},i=[];if(!f.validate(t,E,r,i)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=i,o}var s=f.derToOid(r.publicKeyOid);if(s!==h.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=h.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=l.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=C(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=l.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=C(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){if(u.md=null,u.signatureOid in p){var s=p[u.signatureOid];switch(s){case"sha1WithRSAEncryption":u.md=l.md.sha1.create();break;case"md5WithRSAEncryption":u.md=l.md.md5.create();break;case"sha256WithRSAEncryption":u.md=l.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=l.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=l.md.sha512.create();break;case"RSASSA-PSS":u.md=l.md.sha256.create()}}if(null===u.md){var o=new Error("Could not compute certification request digest. Unknown signature OID.");throw o.signatureOid=u.signatureOid,o}var c=f.toDer(u.certificationRequestInfo);u.md.update(c.getBytes())}var d=l.md.sha1.create();return u.subject.getField=function(t){return n(u.subject,t)},u.subject.addField=function(t){a([t]),u.subject.attributes.push(t)},u.subject.attributes=h.RDNAttributesAsArray(r.certificationRequestInfoSubject,d),u.subject.hash=d.digest().toHex(),u.publicKey=h.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return n(u,t)},u.addAttribute=function(t){a([t]),u.attributes.push(t)},u.attributes=h.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},h.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return n(t.subject,e)},t.subject.addField=function(e){a([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return n(t,e)},t.addAttribute=function(e){a([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){a(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){a(e),t.attributes=e},t.sign=function(e,r){t.md=r||l.md.sha1.create();var n=p[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=h.getCertificationRequestInfo(t);var a=f.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){if(t.signatureOid in p){switch(p[t.signatureOid]){case"sha1WithRSAEncryption":r=l.md.sha1.create();break;case"md5WithRSAEncryption":r=l.md.md5.create();break;case"sha256WithRSAEncryption":r=l.md.sha256.create();break;case"sha384WithRSAEncryption":r=l.md.sha384.create();break;case"sha512WithRSAEncryption":r=l.md.sha512.create();break;case"RSASSA-PSS":r=l.md.sha256.create()}}if(null===r){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=t.signatureOid,n}var i=t.certificationRequestInfo||h.getCertificationRequestInfo(t),a=f.toDer(i);r.update(a.getBytes())}if(null!==r){var o;switch(t.signatureOid){case p.sha1WithRSAEncryption:break;case p["RSASSA-PSS"]:var s,u;if(void 0===(s=p[t.signatureParameters.mgf.hash.algorithmOid])||void 0===l.md[s]){var n=new Error("Unsupported MGF hash function.");throw n.oid=t.signatureParameters.mgf.hash.algorithmOid,n.name=s,n}if(void 0===(u=p[t.signatureParameters.mgf.algorithmOid])||void 0===l.mgf[u]){var n=new Error("Unsupported MGF function.");throw n.oid=t.signatureParameters.mgf.algorithmOid,n.name=u,n}if(u=l.mgf[u].create(l.md[s].create()),void 0===(s=p[t.signatureParameters.hash.algorithmOid])||void 0===l.md[s]){var n=new Error("Unsupported RSASSA-PSS hash function.");throw n.oid=t.signatureParameters.hash.algorithmOid,n.name=s,n}o=l.pss.create(l.md[s].create(),u,t.signatureParameters.saltLength)}e=t.publicKey.verify(r.digest().getBytes(),t.signature,o)}return e},t};var b=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z");h.getTBSCertificate=function(t){var e=c(t.validity.notBefore),r=c(t.validity.notAfter),n=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.CONTEXT_SPECIFIC,0,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes())]),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,l.util.hexToBytes(t.serialNumber)),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.siginfo.algorithmOid).getBytes()),s(t.siginfo.algorithmOid,t.siginfo.parameters)]),i(t.issuer),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e,r]),i(t.subject),h.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(f.create(f.Class.CONTEXT_SPECIFIC,1,!0,[f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(f.create(f.Class.CONTEXT_SPECIFIC,2,!0,[f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(h.certificateExtensionsToAsn1(t.extensions)),n},h.getCertificationRequestInfo=function(t){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(t.version).getBytes()),i(t.subject),h.publicKeyToAsn1(t.publicKey),u(t)])},h.distinguishedNameToAsn1=function(t){return i(t)},h.certificateToAsn1=function(t){var e=t.tbsCertificate||h.getTBSCertificate(t);return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e,f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.signatureOid).getBytes()),s(t.signatureOid,t.signatureParameters)]),f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},h.certificateExtensionsToAsn1=function(t){var e=f.create(f.Class.CONTEXT_SPECIFIC,3,!0,[]),r=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(h.certificateExtensionToAsn1(t[n]));return e},h.certificateExtensionToAsn1=function(t){var e=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);e.value.push(f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.id).getBytes())),t.critical&&e.value.push(f.create(f.Class.UNIVERSAL,f.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=f.toDer(r).getBytes()),e.value.push(f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,r)),e},h.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||h.getCertificationRequestInfo(t);return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[e,f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(t.signatureOid).getBytes()),s(t.signatureOid,t.signatureParameters)]),f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},h.createCaStore=function(t){function e(t){return r(t),n.certs[t.hash]||null}function r(t){if(!t.hash){var e=l.md.sha1.create();t.attributes=h.RDNAttributesAsArray(i(t),e),t.hash=e.digest().toHex()}}var n={certs:{}};if(n.getIssuer=function(t){return e(t.issuer)},n.addCertificate=function(t){if("string"==typeof t&&(t=l.pki.certificateFromPem(t)),r(t.subject),!n.hasCertificate(t))if(t.subject.hash in n.certs){var e=n.certs[t.subject.hash];l.util.isArray(e)||(e=[e]),e.push(t),n.certs[t.subject.hash]=e}else n.certs[t.subject.hash]=t},n.hasCertificate=function(t){"string"==typeof t&&(t=l.pki.certificateFromPem(t));var r=e(t.subject);if(!r)return!1;l.util.isArray(r)||(r=[r]);for(var n=f.toDer(h.certificateToAsn1(t)).getBytes(),i=0;i<r.length;++i){if(n===f.toDer(h.certificateToAsn1(r[i])).getBytes())return!0}return!1},n.listAllCertificates=function(){var t=[];for(var e in n.certs)if(n.certs.hasOwnProperty(e)){var r=n.certs[e];if(l.util.isArray(r))for(var i=0;i<r.length;++i)t.push(r[i]);else t.push(r)}return t},n.removeCertificate=function(t){var i;if("string"==typeof t&&(t=l.pki.certificateFromPem(t)),r(t.subject),!n.hasCertificate(t))return null;var a=e(t.subject);if(!l.util.isArray(a))return i=n.certs[t.subject.hash],delete n.certs[t.subject.hash],i;for(var o=f.toDer(h.certificateToAsn1(t)).getBytes(),s=0;s<a.length;++s){o===f.toDer(h.certificateToAsn1(a[s])).getBytes()&&(i=a[s],a.splice(s,1))}return 0===a.length&&delete n.certs[t.subject.hash],i},t)for(var a=0;a<t.length;++a){var o=t[a];n.addCertificate(o)}return n},h.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},h.verifyCertificateChain=function(t,e,r){"function"==typeof r&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;void 0===i&&(i=new Date);var a=!0,o=null,s=0;do{var u=e.shift(),c=null,f=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:h.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),null===o){if(c=e[0]||t.getIssuer(u),null===c&&u.isIssuer(u)&&(f=!0,c=u),c){var p=c;l.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){c=p.shift();try{d=c.verify(u)}catch(t){}}d||(o={message:"Certificate signature is invalid.",error:h.certificateError.bad_certificate})}null!==o||c&&!f||t.hasCertificate(u)||(o={message:"Certificate is not trusted.",error:h.certificateError.unknown_ca})}if(null===o&&c&&!u.isIssuer(c)&&(o={message:"Certificate issuer is invalid.",error:h.certificateError.bad_certificate}),null===o)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===o&&g<u.extensions.length;++g){var v=u.extensions[g];!v.critical||v.name in y||(o={message:"Certificate has an unsupported critical extension.",error:h.certificateError.unsupported_certificate})}if(null===o&&(!a||0===e.length&&(!c||f))){var m=u.getExtension("basicConstraints"),E=u.getExtension("keyUsage");if(null!==E&&(E.keyCertSign&&null!==m||(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:h.certificateError.bad_certificate})),null!==o||null===m||m.cA||(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:h.certificateError.bad_certificate}),null===o&&null!==E&&"pathLenConstraint"in m){s-1>m.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:h.certificateError.bad_certificate})}}var C=null===o||o.error,b=r.verify?r.verify(C,s,n):C;if(!0!==b)throw!0===C&&(o={message:"The application rejected the certificate.",error:h.certificateError.bad_certificate}),(b||0===b)&&("object"!=typeof b||l.util.isArray(b)?"string"==typeof b&&(o.error=b):(b.message&&(o.message=b.message),b.error&&(o.error=b.error))),o;o=null,a=!1,++s}while(e.length>0);return!0}},function(t,e,r){var n=r(1);r(10),r(2),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,i=e.digestLength,a=t.salt||null;"string"==typeof a&&(a=n.util.createBuffer(a));var o;if("saltLength"in t)o=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");o=a.length()}if(null!==a&&a.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||n.random,u={};return u.encode=function(t,u){var c,l=u-1,f=Math.ceil(l/8),h=t.digest().getBytes();if(f<i+o+2)throw new Error("Message is too long to encrypt.");var p;p=null===a?s.getBytesSync(o):a.bytes();var d=new n.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(p),e.start(),e.update(d.getBytes());var y=e.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,f-o-i-2),g.putByte(1),g.putBytes(p);var v=g.getBytes(),m=f-i-1,E=r.generate(y,m),C="";for(c=0;c<m;c++)C+=String.fromCharCode(v.charCodeAt(c)^E.charCodeAt(c));var b=65280>>8*f-l&255;return(C=String.fromCharCode(C.charCodeAt(0)&~b)+C.substr(1))+y+String.fromCharCode(188)},u.verify=function(t,a,s){var u,c=s-1,l=Math.ceil(c/8);if(a=a.substr(-l),l<i+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var f=l-i-1,h=a.substr(0,f),p=a.substr(f,i),d=65280>>8*l-c&255;if(0!=(h.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(p,f),g="";for(u=0;u<f;u++)g+=String.fromCharCode(h.charCodeAt(u)^y.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~d)+g.substr(1);var v=l-i-o-2;for(u=0;u<v;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=g.substr(-o),E=new n.util.ByteBuffer;return E.fillWithByte(0,8),E.putBytes(t),E.putBytes(m),e.start(),e.update(E.getBytes()),p===e.digest().getBytes()},u}},function(t,e,r){"use strict";/*!
 * algorithms/index.js - Cryptographic Algorithms Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var n=[r(92),r(94),r(39),r(57),r(98),r(99),r(101),r(60),r(37),r(102),r(103),r(104),r(25)],i={},a={},o={},s={},u={},c={};n.forEach(function(t){Object.keys(t).forEach(function(e){var r=t[e];"function"==typeof r.encrypt&&(u[e]=r.encrypt),"function"==typeof r.decrypt&&(c[e]=r.decrypt),"function"==typeof r.sign&&(o[e]=r.sign),"function"==typeof r.verify&&(s[e]=r.verify),"function"==typeof r.digest&&(i[e]=r.digest),"function"==typeof r.derive&&(a[e]=r.derive)})}),e.digest=function(t,e,r){var n=i[t];return n?n(e,r):Promise.reject(new Error("unsupported algorithm: "+t))},e.derive=function(t,e,r){var n=a[t];return n?n(e,r):Promise.reject(new Error("unsupported algorithm: "+t))},e.sign=function(t,e,r,n){var i=o[t];return i?i(e,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.verify=function(t,e,r,n,i){var a=s[t];return a?a(e,r,n,i||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.encrypt=function(t,e,r,n){var i=u[t];return i?i(e,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+t))},e.decrypt=function(t,e,r,n){var i=c[t];return i?i(e,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+t))}},function(t,e,r){"use strict";(function(e){function n(t){function r(t,e){return t=(t||a.HASHLENGTH[i])/8,t>e.length?Promise.reject(new Error("invalid key length")):Promise.resolve(e)}var n=t.replace("HS","SHA").toLowerCase(),i=t.replace("HS","SHA-"),s=function(t,i,a){a=a||{};var s;return s=r(a.length,t),s=s.then(function(){var r=o.hmac.create();return r.start(n,t.toString("binary")),r.update(i.toString("binary")),r=e.from(r.digest().bytes(),"binary"),{data:i,mac:r}})},c=function(t,n,a){a=a||{};var o,s={name:"HMAC",hash:{name:i}};return o=r(a.length,t),o=o.then(function(){return u.subtleCrypto.importKey("raw",t,s,!0,["sign"])}),o=o.then(function(t){return u.subtleCrypto.sign(s,t,n)}),o=o.then(function(t){var r=e.from(t);return{data:n,mac:r}})},l=function(t,e,i){i=i||{};var a;return a=r(i.length,t),a=a.then(function(){var r=u.nodeCrypto.createHmac(n,t);r.update(e);var i=r.digest();return{data:e,mac:i}})};return u.setupFallback(l,c,s)}function i(t){function r(t,e,r){t=(t||a.HASHLENGTH[i])/8;for(var n=!0,o=0;t>o;o++)n=n&&e[o]===r[o];return n}var n=t.replace("HS","SHA").toLowerCase(),i=t.replace("HS","SHA-"),c=function(t,i,a,u){u=u||{};var c=o.hmac.create();return c.start(n,new s(t)),c.update(i.toString("binary")),c=e.from(c.digest().bytes(),"binary"),r(u.length,a,c)?Promise.resolve({data:i,mac:a,valid:!0}):Promise.reject(new Error("verification failed"))},l=function(t,n,a,o){o=o||{};var s,c={name:"HMAC",hash:{name:i}};return o.length?(s=u.subtleCrypto.importKey("raw",t,c,!0,["sign"]),s=s.then(function(t){return u.subtleCrypto.sign(c,t,n)}),s=s.then(function(t){var n=e.from(t);return r(o.length,a,n)})):(s=u.subtleCrypto.importKey("raw",t,c,!0,["verify"]),s=s.then(function(t){return u.subtleCrypto.verify(c,t,a,n)})),s=s.then(function(t){return t?{data:n,mac:a,valid:!0}:Promise.reject(new Error("verifaction failed"))})},f=function(t,e,i,a){a=a||{};var o=u.nodeCrypto.createHmac(n,t);o.update(e);var s=o.digest();if(!r(a.length,i,s))throw new Error("verification failed");return{data:e,mac:s,valid:!0}};return u.setupFallback(f,l,c)}/*!
 * algorithms/hmac.js - HMAC-based "signatures"
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var a=r(7),o=r(3),s=r(19),u=r(6),c={};["HS1","HS256","HS384","HS512"].forEach(function(t){c[t]={sign:n(t),verify:i(t)}}),t.exports=c}).call(e,r(0).Buffer)},function(t,e){function r(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function n(t){return!0===(t&&t.__isLong__)}function i(t,e){var r,n,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(n=f[t])?n:(r=o(t,(0|t)<0?-1:0,!0),i&&(f[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(n=l[t])?n:(r=o(t,t<0?-1:0,!1),i&&(l[t]=r),r))}function a(t,e){if(isNaN(t))return e?m:v;if(e){if(t<0)return m;if(t>=d)return w}else{if(t<=-y)return A;if(t+1>=y)return S}return t<0?a(-t,e).neg():o(t%p|0,t/p|0,e)}function o(t,e,n){return new r(t,e,n)}function s(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"==typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return s(t.substring(1),e,r).neg();for(var i=a(h(r,8)),o=v,u=0;u<t.length;u+=8){var c=Math.min(8,t.length-u),l=parseInt(t.substring(u,u+c),r);if(c<8){var f=a(h(r,c));o=o.mul(f).add(a(l))}else o=o.mul(i),o=o.add(a(l))}return o.unsigned=e,o}function u(t,e){return"number"==typeof t?a(t,e):"string"==typeof t?s(t,e):o(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}t.exports=r;var c=null;try{c=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var l={},f={};r.fromInt=i,r.fromNumber=a,r.fromBits=o;var h=Math.pow;r.fromString=s,r.fromValue=u;var p=4294967296,d=p*p,y=d/2,g=i(1<<24),v=i(0);r.ZERO=v;var m=i(0,!0);r.UZERO=m;var E=i(1);r.ONE=E;var C=i(1,!0);r.UONE=C;var b=i(-1);r.NEG_ONE=b;var S=o(-1,2147483647,!1);r.MAX_VALUE=S;var w=o(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var A=o(0,-2147483648,!1);r.MIN_VALUE=A;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var e=a(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=a(h(t,6),this.unsigned),o=this,s="";;){var u=o.div(i),c=o.sub(u.mul(i)).toInt()>>>0,l=c.toString(t);if(o=u,o.isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(t){return n(t)||(t=u(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(t){if(n(t)||(t=u(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(E)},T.neg=T.negate,T.add=function(t){n(t)||(t=u(t));var e=this.high>>>16,r=65535&this.high,i=this.low>>>16,a=65535&this.low,s=t.high>>>16,c=65535&t.high,l=t.low>>>16,f=65535&t.low,h=0,p=0,d=0,y=0;return y+=a+f,d+=y>>>16,y&=65535,d+=i+l,p+=d>>>16,d&=65535,p+=r+c,h+=p>>>16,p&=65535,h+=e+s,h&=65535,o(d<<16|y,h<<16|p,this.unsigned)},T.subtract=function(t){return n(t)||(t=u(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return v;if(n(t)||(t=u(t)),c){return o(c.mul(this.low,this.high,t.low,t.high),c.get_high(),this.unsigned)}if(t.isZero())return v;if(this.eq(A))return t.isOdd()?A:v;if(t.eq(A))return this.isOdd()?A:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return a(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,l=t.high>>>16,f=65535&t.high,h=t.low>>>16,p=65535&t.low,d=0,y=0,m=0,E=0;return E+=s*p,m+=E>>>16,E&=65535,m+=i*p,y+=m>>>16,m&=65535,m+=s*h,y+=m>>>16,m&=65535,y+=r*p,d+=y>>>16,y&=65535,y+=i*h,d+=y>>>16,y&=65535,y+=s*f,d+=y>>>16,y&=65535,d+=e*p+r*h+i*f+s*l,d&=65535,o(m<<16|E,d<<16|y,this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(n(t)||(t=u(t)),t.isZero())throw Error("division by zero");if(c){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;return o((this.unsigned?c.div_u:c.div_s)(this.low,this.high,t.low,t.high),c.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?m:v;var e,r,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return m;if(t.gt(this.shru(1)))return C;i=m}else{if(this.eq(A)){if(t.eq(E)||t.eq(b))return A;if(t.eq(A))return E;return e=this.shr(1).div(t).shl(1),e.eq(v)?t.isNegative()?E:b:(r=this.sub(t.mul(e)),i=e.add(r.div(t)))}if(t.eq(A))return this.unsigned?m:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=v}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),l=s<=48?1:h(2,s-48),f=a(e),p=f.mul(t);p.isNegative()||p.gt(r);)e-=l,f=a(e,this.unsigned),p=f.mul(t);f.isZero()&&(f=E),i=i.add(f),r=r.sub(p)}return i},T.div=T.divide,T.modulo=function(t){if(n(t)||(t=u(t)),c){return o((this.unsigned?c.rem_u:c.rem_s)(this.low,this.high,t.low,t.high),c.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return o(~this.low,~this.high,this.unsigned)},T.and=function(t){return n(t)||(t=u(t)),o(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return n(t)||(t=u(t)),o(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return n(t)||(t=u(t)),o(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):o(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return n(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):o(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(n(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;if(t<32){return o(this.low>>>t|e<<32-t,e>>>t,this.unsigned)}return 32===t?o(e,0,this.unsigned):o(e>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},r.fromBytes=function(t,e,n){return n?r.fromBytesLE(t,e):r.fromBytesBE(t,e)},r.fromBytesLE=function(t,e){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},r.fromBytesBE=function(t,e){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e,r){"use strict";(function(e){function n(t,r){for(var n=Math.max(t.length,r.length),i=e.alloc(n),a=0;n>a;a++)i[a]=(t[a]||0)^(r[a]||0);return i}function i(t,e){for(var r=[],n=0;t.length>n;n+=e)r.push(t.slice(n,n+e));return r}function a(t){var r=Math.floor(t/4294967296),n=t%4294967296,i=e.alloc(8);return i[0]=255&r>>>24,i[1]=255&r>>>16,i[2]=255&r>>>8,i[3]=255&r>>>0,i[4]=255&n>>>24,i[5]=255&n>>>16,i[6]=255&n>>>8,i[7]=255&n>>>0,i}function o(t){function r(e,r){if(t!==e.length<<3)throw new Error("invalid key size");if(0<r.length&&0!=r.length%8)throw new Error("invalid data length")}var o=function(t,o){try{r(t,o)}catch(t){return Promise.reject(t)}var s,u,h,p=c.cipher.createCipher("AES",new l(t)),d=i(o,8);s=f;for(var y=0;6>y;y++)for(var g=0;d.length>g;g++)h=d.length*y+g+1,u=e.concat([s,d[g]]),p.start(),p.update(new l(u)),p.finish(),u=e.from(p.output.bytes(),"binary"),s=n(u.slice(0,8),a(h)),d[g]=u.slice(8,16);d=[s].concat(d);var v=e.concat(d);return Promise.resolve({data:v})},s=function(t,n){try{r(t,n)}catch(t){return Promise.reject(t)}var i={name:"AES-KW"},a=[u.subtleCrypto.importKey("raw",n,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),u.subtleCrypto.importKey("raw",t,i,!0,["wrapKey"])];return a=Promise.all(a),a=a.then(function(t){return u.subtleCrypto.wrapKey("raw",t[0],t[1],i)}),a=a.then(function(t){return t=e.from(t),{data:t}})},h=function(o,s){try{r(o,s)}catch(t){return Promise.reject(t)}var c,l,h,p=i(s,8),d=e.alloc(16);c=f;for(var y=0;6>y;y++)for(var g=0;p.length>g;g++){h=p.length*y+g+1,l=e.concat([c,p[g]]);var v=u.nodeCrypto.createCipheriv("AES"+t,o,d);l=v.update(l),c=n(l.slice(0,8),a(h)),p[g]=l.slice(8,16)}p=[c].concat(p);var m=e.concat(p);return Promise.resolve({data:m})};return u.setupFallback(h,s,o)}function s(t){function r(e,r){if(t!==e.length<<3)throw new Error("invalid key size");if(0<r.length-8&&0!=r.length%8)throw new Error("invalid data length")}var o=function(t,o){try{r(t,o)}catch(t){return Promise.reject(t)}var s,u,h,p=c.cipher.createDecipher("AES",new l(t)),d=i(o,8);s=d[0],d=d.slice(1);for(var y=5;0<=y;--y)for(var g=d.length-1;0<=g;--g)h=d.length*y+g+1,u=n(s,a(h)),u=e.concat([u,d[g]]),p.start(),p.update(new l(u)),p.finish(),u=e.from(p.output.bytes(),"binary"),s=u.slice(0,8),d[g]=u.slice(8,16);if(s.toString()!==f.toString())return Promise.reject(new Error("decryption failed"));var v=e.concat(d);return Promise.resolve(v)},s=function(t,n){try{r(t,n)}catch(t){return Promise.reject(t)}var i={name:"AES-KW"},a=u.subtleCrypto.importKey("raw",t,i,!0,["unwrapKey"]);return a=a.then(function(t){return u.subtleCrypto.unwrapKey("raw",n,t,i,{name:"HMAC",hash:"SHA-256"},!0,["sign"])}),a=a.then(function(t){return u.subtleCrypto.exportKey("raw",t)}),a=a.then(function(t){return t=e.from(t)})},h=function(o,s){try{r(o,s)}catch(t){return Promise.reject(t)}var c,l,h,p=i(s,8),d=e.alloc(16);c=p[0],p=p.slice(1);for(var y=5;0<=y;--y)for(var g=p.length-1;0<=g;--g){h=p.length*y+g+1,l=n(c,a(h)),l=e.concat([l,p[g],d]);var v=u.nodeCrypto.createDecipheriv("AES"+t,o,d);l=v.update(l),c=l.slice(0,8),p[g]=l.slice(8,16)}if(c.toString()!==f.toString())return Promise.reject(new Error("decryption failed"));var m=e.concat(p);return Promise.resolve(m)};return u.setupFallback(h,s,o)}/*!
 * algorithms/aes-kw.js - AES-KW Key-Wrapping
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var u=r(6),c=r(3),l=r(19),f=e.from("a6a6a6a6a6a6a6a6","hex"),h={};["A128KW","A192KW","A256KW"].forEach(function(t){var e=parseInt(/A(\d+)KW/g.exec(t)[1]);h[t]={encrypt:o(e),decrypt:s(e)}}),t.exports=h}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t,e){var r=e?["x","y"]:["d"];return r=r.map(function(e){return new y.jsbn.BigInteger(t[e].toString("hex"),16)}),r=[t.crv].concat(r),(e?d.asPublicKey:d.asPrivateKey).apply(d,r)}function i(t,e){var r=p(t);return(e?["x","y"]:["x","y","d"]).forEach(function(t){r[t]=g.base64url.encode(r[t])}),delete r.key_ops,delete r.use,delete r.alg,e&&delete r.d,r}function a(t,e){var r=p(t);return(e?["x","y"]:["d"]).forEach(function(t){r[t]=g.asBuffer(r[t],"base64url")}),r}function o(t,r){return t=a(t,r),r?e.concat([m,t.x,t.y]):t.d}function s(t){return v[t||""]||NaN}function u(t){switch(t){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}function c(t,r){var n=t.crv;n=u(n),n=y.asn1.oidToDer(n);var i,a,o;return r?(i="EC PRIVATE KEY",a=e.concat([e.from([0,4]),t.x,t.y]).toString("binary"),t=t.d.toString("binary"),o=y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.SEQUENCE,!0,[y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.INTEGER,!1,""),y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.OCTETSTRING,!1,t),y.asn1.create(y.asn1.Class.CONTEXT_SPECIFIC,0,!0,[y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.OID,!1,n.bytes())]),y.asn1.create(y.asn1.Class.CONTEXT_SPECIFIC,1,!0,[y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.BITSTRING,!1,a)])])):(i="PUBLIC KEY",t=e.concat([e.from([0,4]),t.x,t.y]).toString("binary"),o=y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.SEQUENCE,!0,[y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.SEQUENCE,!0,[y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.OID,!1,y.asn1.oidToDer(E).bytes()),y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.OID,!1,n.bytes())]),y.asn1.create(y.asn1.Class.UNIVERSAL,y.asn1.Type.BITSTRING,!1,t)])),o=y.asn1.toDer(o).bytes(),y.pem.encode({type:i,body:o})}function l(t,r){var n=0;if(48!==t[n++])throw new Error(C);var i=t[n++];if(129===i&&(i=t[n++]),i>t.length-n)throw new Error(C);if(2!==t[n++])throw new Error(C);var a=t[n++];if(a>t.length-n-2)throw new Error(C);if(a>r+1)throw new Error(C);var o=n;if(n+=a,2!==t[n++])throw new Error(C);var s=t[n++];if(s!==t.length-n)throw new Error(C);if(s>r+1)throw new Error(C);var u=n;if((n+=s)!==t.length)throw new Error(C);var c=r-a,l=r-s,f=e.alloc(c+a+l+s);for(n=0;n<c;++n)f[n]=0;var h=Math.max(-c,0);t.copy(f,n,o+h,o+a),n=r;for(var p=n;n<p+l;++n)f[n]=0;var d=Math.max(-l,0);return t.copy(f,n,u+d,u+s),f}function f(t,e,r){for(var n=0;e+n<r&&0===t[e+n];)++n;return t[e+n]>=128&&--n,n}function h(t,r){var n=f(t,0,r),i=f(t,r,t.length),a=r-n,o=r-i,s=a+o+4,u=s<128,c=e.alloc((u?2:3)+s),l=0;return c[l++]=48,u?c[l++]=s:(c[l++]=129,c[l++]=255&s),c[l++]=2,c[l++]=a,n<0?(c[l++]=0,l+=t.copy(c,l,0,r)):l+=t.copy(c,l,n,r),c[l++]=2,c[l++]=o,i<0?(c[l++]=0,t.copy(c,l,r)):t.copy(c,l,r+i),c}/*!
 * algorithms/ec-util.js - Elliptic Curve Utility Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var p=r(5).clone,d=r(58),y=r(3),g=r(4),v={"P-256":256,"P-384":384,"P-521":521},m=e.from([4]),E="1.2.840.10045.2.1",C="Could not extract parameters from DER signature";t.exports={convertToForge:n,convertToJWK:i,convertToObj:a,convertToBuffer:o,curveSize:s,derToConcat:l,concatToDer:h,convertToPEM:c,EC_OID:E}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t,e){var r=e?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return r=r.map(function(e){return new s.jsbn.BigInteger(t[e].toString("hex"),16)}),(e?s.pki.rsa.setPublicKey:s.pki.rsa.setPrivateKey).apply(s.pki.rsa,r)}function i(t,e){var r=o(t);return(e?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach(function(t){r[t]=u.base64url.encode(r[t])}),delete r.key_ops,delete r.use,delete r.alg,e&&(delete r.d,delete r.p,delete r.q,delete r.dp,delete r.dq,delete r.qi),r}function a(t,e){var r=e?"__cachedPublicPem":"__cachedPrivatePem";if(t[r])return t[r];var i;return i=e?s.pki.publicKeyToPem(n(t,e)):s.pki.privateKeyToPem(n(t,e)),Object.defineProperty(t,r,{value:i}),i}/*!
 * algorithms/rsa-util.js - RSA Utility Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var o=r(5).clone,s=r(3),u=r(4);t.exports={convertToForge:n,convertToJWK:i,convertToPem:a}},function(t,e,r){"use strict";/*!
 * jwe/index.js - JSON Web Encryption (JWE) Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n={createEncrypt:r(111).createEncrypt,createDecrypt:r(121).createDecrypt};t.exports=n},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,r){(function(e,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
!function(e,r){t.exports=r()}(0,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function n(t){return"function"==typeof t}function i(t){K=t}function a(t){V=t}function o(){return void 0!==D?function(){D(u)}:s()}function s(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<x;t+=2){(0,q[t])(q[t+1]),q[t]=void 0,q[t+1]=void 0}x=0}function c(t,e){var r=this,n=new this.constructor(f);void 0===n[Q]&&I(n);var i=r._state;if(i){var a=arguments[i-1];V(function(){return A(i,n,a,r._result)})}else S(r,n,t,e);return n}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(f);return m(r,t),r}function f(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function d(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function y(t,e,r){V(function(t){var n=!1,i=d(r,e,function(r){n||(n=!0,e!==r?m(t,r):C(t,r))},function(e){n||(n=!0,b(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,b(t,i))},t)}function g(t,e){e._state===Z?C(t,e._result):e._state===X?b(t,e._result):S(e,void 0,function(e){return m(t,e)},function(e){return b(t,e)})}function v(t,e,r){e.constructor===t.constructor&&r===c&&e.constructor.resolve===l?g(t,e):void 0===r?C(t,e):n(r)?y(t,e,r):C(t,e)}function m(e,r){if(e===r)b(e,h());else if(t(r)){var n=void 0;try{n=r.then}catch(t){return void b(e,t)}v(e,r,n)}else C(e,r)}function E(t){t._onerror&&t._onerror(t._result),w(t)}function C(t,e){t._state===Y&&(t._result=e,t._state=Z,0!==t._subscribers.length&&V(w,t))}function b(t,e){t._state===Y&&(t._state=X,t._result=e,V(E,t))}function S(t,e,r,n){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+Z]=r,i[a+X]=n,0===a&&t._state&&V(w,t)}function w(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)n=e[o],i=e[o+r],n?A(r,n,i,a):i(a);t._subscribers.length=0}}function A(t,e,r,i){var a=n(r),o=void 0,s=void 0,u=!0;if(a){try{o=r(i)}catch(t){u=!1,s=t}if(e===o)return void b(e,p())}else o=i;e._state!==Y||(a&&u?m(e,o):!1===u?b(e,s):t===Z?C(e,o):t===X&&b(e,o))}function T(t,e){try{e(function(e){m(t,e)},function(e){b(t,e)})}catch(e){b(t,e)}}function _(){return J++}function I(t){t[Q]=J++,t._state=void 0,t._result=void 0,t._subscribers=[]}function B(){return new Error("Array Methods must be provided an Array")}function k(t){return new $(this,t).promise}function N(t){var e=this;return new e(O(t)?function(r,n){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(r,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function R(t){var e=this,r=new e(f);return b(r,t),r}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=tt}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var O=U,x=0,D=void 0,K=void 0,V=function(t,e){q[x]=t,q[x+1]=e,2===(x+=2)&&(K?K(u):W())},j="undefined"!=typeof window?window:void 0,M=j||{},z=M.MutationObserver||M.WebKitMutationObserver,H="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),G="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,q=new Array(1e3),W=void 0;W=H?function(){return function(){return e.nextTick(u)}}():z?function(){var t=0,e=new z(u),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():G?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===j?function(){try{var t=Function("return this")().require("vertx");return D=t.runOnLoop||t.runOnContext,o()}catch(t){return s()}}():s();var Q=Math.random().toString(36).substring(2),Y=void 0,Z=1,X=2,J=0,$=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(f),this.promise[Q]||I(this.promise),O(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):b(this.promise,B())}return t.prototype._enumerate=function(t){for(var e=0;this._state===Y&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===l){var i=void 0,a=void 0,o=!1;try{i=t.then}catch(t){o=!0,a=t}if(i===c&&t._state!==Y)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===tt){var s=new r(f);o?b(s,a):v(s,t,i),this._willSettleAt(s,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===Y&&(this._remaining--,t===X?b(n,r):this._result[e]=r),0===this._remaining&&C(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;S(t,void 0,function(t){return r._settledAt(Z,e,t)},function(t){return r._settledAt(X,e,t)})},t}(),tt=function(){function t(e){this[Q]=_(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!=typeof e&&P(),this instanceof t?T(this,e):F())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,r=e.constructor;return n(t)?e.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):e.then(t,t)},t}();return tt.prototype.then=c,tt.all=k,tt.race=N,tt.resolve=l,tt.reject=R,tt._setScheduler=i,tt._setAsap=a,tt._asap=V,tt.polyfill=L,tt.Promise=tt,tt})}).call(e,r(15),r(12))},function(t,e,r){function n(t){if("string"==typeof t&&(t=o.util.createBuffer(t)),o.util.isArray(t)&&t.length>4){var e=t;t=o.util.createBuffer();for(var r=0;r<e.length;++r)t.putByte(e[r])}return o.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function i(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}var o=r(1);r(2),o.cipher=o.cipher||{};var s=t.exports=o.cipher.modes=o.cipher.modes||{};s.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},s.ecb.prototype.start=function(t){},s.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},s.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},s.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},s.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},s.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},s.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=n(t.iv),this._prev=this._iv.slice(0)}},s.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},s.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},s.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},s.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},s.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},s.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=n(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},s.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},s.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},s.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=n(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},s.ofb.prototype.decrypt=s.ofb.prototype.encrypt,s.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0},s.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=n(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)e.putInt32(t.getInt32()^this._outBlock[a]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(t.getInt32()^this._outBlock[a]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}i(this._inBlock)},s.ctr.prototype.decrypt=s.ctr.prototype.encrypt,s.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=o.util.createBuffer(),this._partialBytes=0,this._R=3774873600},s.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=o.util.createBuffer(t.iv);this._cipherLength=0;var r;if(r="additionalData"in t?o.util.createBuffer(t.additionalData):o.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=o.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(12===n)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*n)))}this._inBlock=this._j0.slice(0),i(this._inBlock),this._partialBytes=0,r=o.util.createBuffer(r),this._aDataLength=a(8*r.length());var s=r.length()%this.blockSize;for(s&&r.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])},s.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(t.getInt32()^this._outBlock[a]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),i(this._inBlock)},s.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),i(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},s.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=o.util.createBuffer();var n=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},s.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},s.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},s.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>4*(7-r%8)&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e},s.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},s.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),o=0;o<i;++o){var s=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*e;s[u]=1<<e-1<<c,a[o]=this.generateSubHashTable(this.multiply(s,t),e)}return a},s.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var o=1;o<a;++o){var s=i[a],u=i[o];i[a+o]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}},function(t,e,r){var n=r(1);r(2),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var i=new n.util.ByteBuffer,a=Math.ceil(r/t.digestLength),o=0;o<a;o++){var s=new n.util.ByteBuffer;s.putInt32(o),t.start(),t.update(e+s.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},function(t,e,r){function n(t,e,r){r||(r=i.md.sha1.create());for(var n="",a=Math.ceil(e/r.digestLength),o=0;o<a;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}var i=r(1);r(2),r(10),r(32);var a=t.exports=i.pkcs1=i.pkcs1||{};a.encode_rsa_oaep=function(t,e,r){var a,o,s,u;"string"==typeof r?(a=r,o=arguments[3]||void 0,s=arguments[4]||void 0):r&&(a=r.label||void 0,o=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=i.md.sha1.create(),u||(u=s);var c=Math.ceil(t.n.bitLength()/8),l=c-2*s.digestLength-2;if(e.length>l){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=l,f}a||(a=""),s.update(a,"raw");for(var h=s.digest(),p="",d=l-e.length,y=0;y<d;y++)p+="\0";var g=h.getBytes()+p+""+e;if(o){if(o.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=o.length,f.digestLength=s.digestLength,f}}else o=i.random.getBytes(s.digestLength);var v=n(o,c-s.digestLength-1,u),m=i.util.xorBytes(g,v,g.length),E=n(m,s.digestLength,u);return"\0"+i.util.xorBytes(o,E,o.length)+m},a.decode_rsa_oaep=function(t,e,r){var a,o,s;"string"==typeof r?(a=r,o=arguments[3]||void 0):r&&(a=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=e.length,c.expectedLength=u,c}if(void 0===o?o=i.md.sha1.create():o.start(),s||(s=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var l=o.digest().getBytes(),f=e.charAt(0),h=e.substring(1,o.digestLength+1),p=e.substring(1+o.digestLength),d=n(p,o.digestLength,s),y=i.util.xorBytes(h,d,h.length),g=n(y,u-o.digestLength-1,s),v=i.util.xorBytes(p,g,p.length),m=v.substring(0,o.digestLength),c="\0"!==f,E=0;E<o.digestLength;++E)c|=l.charAt(E)!==m.charAt(E);for(var C=1,b=o.digestLength,S=o.digestLength;S<v.length;S++){var w=v.charCodeAt(S),A=1&w^1;c|=w&(C?65534:0),C&=A,b+=C}if(c||1!==v.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return v.substring(b+1)}},function(t,e,r){function n(){s=String.fromCharCode(128),s+=a.util.fillString(String.fromCharCode(0),64),c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=!0}function i(t,e,r){for(var n,i,a,o,s,u,l,f,h,p,d,y,g,v,m,E=r.length();E>=64;){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=e[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=n+e[l-7]+i+e[l-16]|0;for(f=t.h0,h=t.h1,p=t.h2,d=t.h3,y=t.h4,g=t.h5,v=t.h6,m=t.h7,l=0;l<64;++l)o=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),s=v^y&(g^v),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&h|p&(f^h),n=m+o+s+c[l]+e[l],i=a+u,m=v,v=g,g=y,y=d+n>>>0,d=p,p=h,h=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+p|0,t.h3=t.h3+d|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+v|0,t.h7=t.h7+m|0,E-=64}}var a=r(1);r(14),r(2);var o=t.exports=a.sha256=a.sha256||{};a.md.sha256=a.md.algorithms.sha256=o,o.create=function(){u||n();var t=null,e=a.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,n=0;n<r;++n)o.fullMessageLength.push(0);return e=a.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o},o.start(),o.update=function(n,s){"utf8"===s&&(n=a.util.encodeUtf8(n));var u=n.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=u[1],u[1]=u[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(n),i(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var n=a.util.createBuffer();n.putBytes(e.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;n.putBytes(s.substr(0,o.blockLength-c));for(var l,f,h=8*o.fullMessageLength[0],p=0;p<o.fullMessageLength.length-1;++p)l=8*o.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,n.putInt32(h>>>0),h=l>>>0;n.putInt32(h);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};i(d,r,n);var y=a.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y.putInt32(d.h5),y.putInt32(d.h6),y.putInt32(d.h7),y},o};var s=null,u=!1,c=null},function(t,e,r){(function(e){var n=r(1);r(2);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||e.versions["node-webkit"]||(i=r(31)),(t.exports=n.prng=n.prng||{}).create=function(t){function e(t){if(s.pools[0].messageLength>=32)return a(),t();var e=32-s.pools[0].messageLength<<5;s.seedFile(e,function(e,r){if(e)return t(e);s.collect(r),a(),t()})}function r(){if(s.pools[0].messageLength>=32)return a();var t=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(t)),a()}function a(){s.reseeds=4294967295===s.reseeds?0:s.reseeds+1;var t=s.plugin.md.create();t.update(s.keyBytes);for(var e=1,r=0;r<32;++r)s.reseeds%e==0&&(t.update(s.pools[r].digest().getBytes()),s.pools[r].start()),e<<=1;s.keyBytes=t.digest().getBytes(),t.start(),t.update(s.keyBytes);var n=t.digest().getBytes();s.key=s.plugin.formatKey(s.keyBytes),s.seed=s.plugin.formatSeed(n),s.generated=0}function o(t){var e=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var a=n.util.createBuffer();if(e)for(;a.length()<t;){var o=Math.max(1,Math.min(t-a.length(),65536)/4),s=new Uint32Array(Math.floor(o));try{e(s);for(var u=0;u<s.length;++u)a.putInt32(s[u])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(a.length()<t)for(var c,l,f,h=Math.floor(65536*Math.random());a.length()<t;){l=16807*(65535&h),c=16807*(h>>16),l+=(32767&c)<<16,l+=c>>15,l=(2147483647&l)+(l>>31),h=4294967295&l;for(var u=0;u<3;++u)f=h>>>(u<<3),f^=Math.floor(256*Math.random()),a.putByte(String.fromCharCode(255&f))}return a.getBytes(t)}for(var s={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},u=t.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return s.pools=c,s.pool=0,s.generate=function(t,r){function i(f){if(f)return r(f);if(l.length()>=t)return r(null,l.getBytes(t));if(s.generated>1048575&&(s.key=null),null===s.key)return n.util.nextTick(function(){e(i)});var h=a(s.key,s.seed);s.generated+=h.length,l.putBytes(h),s.key=u(a(s.key,o(s.seed))),s.seed=c(a(s.key,s.seed)),n.util.setImmediate(i)}if(!r)return s.generateSync(t);var a=s.plugin.cipher,o=s.plugin.increment,u=s.plugin.formatKey,c=s.plugin.formatSeed,l=n.util.createBuffer();s.key=null,i()},s.generateSync=function(t){var e=s.plugin.cipher,i=s.plugin.increment,a=s.plugin.formatKey,o=s.plugin.formatSeed;s.key=null;for(var u=n.util.createBuffer();u.length()<t;){s.generated>1048575&&(s.key=null),null===s.key&&r();var c=e(s.key,s.seed);s.generated+=c.length,u.putBytes(c),s.key=a(e(s.key,i(s.seed))),s.seed=o(e(s.key,s.seed))}return u.getBytes(t)},i?(s.seedFile=function(t,e){i.randomBytes(t,function(t,r){if(t)return e(t);e(null,r.toString())})},s.seedFileSync=function(t){return i.randomBytes(t).toString()}):(s.seedFile=function(t,e){try{e(null,o(t))}catch(t){e(t)}},s.seedFileSync=o),s.collect=function(t){for(var e=t.length,r=0;r<e;++r)s.pools[s.pool].update(t.substr(r,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(t,e){for(var r="",n=0;n<e;n+=8)r+=String.fromCharCode(t>>n&255);s.collect(r)},s.registerWorker=function(t){if(t===self)s.seedFile=function(t,e){function r(t){var n=t.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),e(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:t}}})};else{var e=function(e){var r=e.data;r.forge&&r.forge.prng&&s.seedFile(r.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})};t.addEventListener("message",e)}},s}}).call(e,r(15))},function(t,e,r){var n=r(1);r(9),r(2);var i=n.asn1,a=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=a;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};a.contentInfoValidator=o;var s={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};a.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},a.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};a.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},a.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){function n(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new n(null)}function a(t,e,r,n,i,a){for(;--a>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i}function o(t,e,r,n,i,a){for(var o=32767&e,s=e>>15;--a>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=s*u+c*o;u=o*u+((32767&l)<<15)+r.data[n]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),r.data[n++]=1073741823&u}return i}function s(t,e,r,n,i,a){for(var o=16383&e,s=e>>14;--a>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=s*u+c*o;u=o*u+((16383&l)<<14)+r.data[n]+i,i=(u>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return i}function u(t){return ae.charAt(t)}function c(t,e){var r=oe[t.charCodeAt(e)];return null==r?-1:r}function l(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function f(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function h(t){var e=i();return e.fromInt(t),e}function p(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,a=!1,o=0;--i>=0;){var s=8==r?255&t[i]:c(t,i);s<0?"-"==t.charAt(i)&&(a=!0):(a=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&n.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function y(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%e;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(i=!0,a=u(r));o>=0;)s<e?(r=(this.data[o]&(1<<s)-1)<<e-s,r|=this.data[--o]>>(s+=this.DB-e)):(r=this.data[o]>>(s-=e)&n,s<=0&&(s+=this.DB,--o)),r>0&&(i=!0),i&&(a+=u(r));return i?a:"0"}function g(){var t=i();return n.ZERO.subTo(this,t),t}function v(){return this.s<0?this.negate():this}function m(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0}function E(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function C(){return this.t<=0?0:this.DB*(this.t-1)+E(this.data[this.t-1]^this.s&this.DM)}function b(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function S(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function w(t,e){var r,n=t%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+o+1]=this.data[r]>>i|s,s=(this.data[r]&a)<<n;for(r=o-1;r>=0;--r)e.data[r]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function A(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(e.t=0);var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&a)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function T(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function _(t,e){var r=this.abs(),i=t.abs(),a=r.t;for(e.t=a+i.t;--a>=0;)e.data[a]=0;for(a=0;a<i.t;++a)e.data[a+r.t]=r.am(0,i.data[a],e,a,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)}function I(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function B(t,e,r){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=i());var s=i(),u=this.s,c=t.s,l=this.DB-E(a.data[a.t-1]);l>0?(a.lShiftTo(l,s),o.lShiftTo(l,r)):(a.copyTo(s),o.copyTo(r));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,v=r.t,m=v-f,C=null==e?i():e;for(s.dlShiftTo(m,C),r.compareTo(C)>=0&&(r.data[r.t++]=1,r.subTo(C,r)),n.ONE.dlShiftTo(f,C),C.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--m>=0;){var b=r.data[--v]==h?this.DM:Math.floor(r.data[v]*d+(r.data[v-1]+g)*y);if((r.data[v]+=s.am(0,b,r,m,0,f))<b)for(s.dlShiftTo(m,C),r.subTo(C,r);r.data[v]<--b;)r.subTo(C,r)}null!=e&&(r.drShiftTo(f,e),u!=c&&n.ZERO.subTo(e,e)),r.t=f,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&n.ZERO.subTo(r,r)}}}function k(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e}function N(t){this.m=t}function R(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function P(t){return t}function F(t){t.divRemTo(this.m,null,t)}function L(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function U(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function x(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function D(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e}function K(t){var e=i();return t.copyTo(e),this.reduce(e),e}function V(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function j(t,e){t.squareTo(e),this.reduce(e)}function M(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function z(){return 0==(this.t>0?1&this.data[0]:this.s)}function H(t,e){if(t>4294967295||t<1)return n.ONE;var r=i(),a=i(),o=e.convert(this),s=E(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,a),(t&1<<s)>0)e.mulTo(a,o,r);else{var u=r;r=a,a=u}return e.revert(r)}function G(t,e){var r;return r=t<256||e.isEven()?new N(e):new x(e),this.exp(t,r)}function q(){var t=i();return this.copyTo(t),t}function W(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Q(){return 0==this.t?this.s:this.data[0]<<24>>24}function Y(){return 0==this.t?this.s:this.data[0]<<16>>16}function Z(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=h(r),a=i(),o=i(),s="";for(this.divRemTo(n,a,o);a.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,a.divRemTo(n,a,o);return o.intValue().toString(t)+s}function $(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),a=!1,o=0,s=0,u=0;u<t.length;++u){var l=c(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(a=!0):(s=e*s+l,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),a&&n.ZERO.subTo(this,this)}function tt(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var i=new Array,a=7&t;i.length=1+(t>>3),e.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}}function et(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}function rt(t){return 0==this.compareTo(t)}function nt(t){return this.compareTo(t)<0?this:t}function it(t){return this.compareTo(t)>0?this:t}function at(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function ot(t,e){return t&e}function st(t){var e=i();return this.bitwiseTo(t,ot,e),e}function ut(t,e){return t|e}function ct(t){var e=i();return this.bitwiseTo(t,ut,e),e}function lt(t,e){return t^e}function ft(t){var e=i();return this.bitwiseTo(t,lt,e),e}function ht(t,e){return t&~e}function pt(t){var e=i();return this.bitwiseTo(t,ht,e),e}function dt(){for(var t=i(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function yt(t){var e=i();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function gt(t){var e=i();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function vt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function mt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+vt(this.data[t]);return this.s<0?this.t*this.DB:-1}function Et(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function Ct(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Et(this.data[r]^e);return t}function bt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function St(t,e){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function wt(t){return this.changeBit(t,ut)}function At(t){return this.changeBit(t,ht)}function Tt(t){return this.changeBit(t,lt)}function _t(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function It(t){var e=i();return this.addTo(t,e),e}function Bt(t){var e=i();return this.subTo(t,e),e}function kt(t){var e=i();return this.multiplyTo(t,e),e}function Nt(t){var e=i();return this.divRemTo(t,e,null),e}function Rt(t){var e=i();return this.divRemTo(t,null,e),e}function Pt(t){var e=i(),r=i();return this.divRemTo(t,e,r),new Array(e,r)}function Ft(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Lt(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Ut(){}function Ot(t){return t}function xt(t,e,r){t.multiplyTo(e,r)}function Dt(t,e){t.squareTo(e)}function Kt(t){return this.exp(t,new Ut)}function Vt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function jt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Mt(t){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function zt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function Ht(t){return t}function Gt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function qt(t,e){t.squareTo(e),this.reduce(e)}function Wt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Qt(t,e){var r,n,a=t.bitLength(),o=h(1);if(a<=0)return o;r=a<18?1:a<48?3:a<144?4:a<768?5:6,n=a<8?new N(e):e.isEven()?new Mt(e):new x(e);var s=new Array,u=3,c=r-1,l=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=i();for(n.sqrTo(s[1],f);u<=l;)s[u]=i(),n.mulTo(f,s[u-2],s[u]),u+=2}var p,d,y=t.t-1,g=!0,v=i();for(a=E(t.data[y])-1;y>=0;){for(a>=c?p=t.data[y]>>a-c&l:(p=(t.data[y]&(1<<a+1)-1)<<c-a,y>0&&(p|=t.data[y-1]>>this.DB+a-c)),u=r;0==(1&p);)p>>=1,--u;if((a-=u)<0&&(a+=this.DB,--y),g)s[p].copyTo(o),g=!1;else{for(;u>1;)n.sqrTo(o,v),n.sqrTo(v,o),u-=2;u>0?n.sqrTo(o,v):(d=o,o=v,v=d),n.mulTo(v,s[p],o)}for(;y>=0&&0==(t.data[y]&1<<a);)n.sqrTo(o,v),d=o,o=v,v=d,--a<0&&(a=this.DB-1,--y)}return n.revert(o)}function Yt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function Zt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function Xt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return n.ZERO;for(var r=t.clone(),i=this.clone(),a=h(1),o=h(0),s=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&a.subTo(s,a),o.subTo(u,o)):(i.subTo(r,i),e&&s.subTo(a,s),u.subTo(o,u))}return 0!=i.compareTo(n.ONE)?n.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Jt(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(r.data[0]==se[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<se.length;){for(var n=se[e],i=e+1;i<se.length&&n<ue;)n*=se[i++];for(n=r.modInt(n);e<i;)if(n%se[e++]==0)return!1}return r.millerRabin(t)}function $t(t){var e=this.subtract(n.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i,a=e.shiftRight(r),o=te(),s=0;s<t;++s){do{i=new n(this.bitLength(),o)}while(i.compareTo(n.ONE)<=0||i.compareTo(e)>=0);var u=i.modPow(a,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<r&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(n.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}function te(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}var ee=r(1);t.exports=ee.jsbn=ee.jsbn||{};var re;ee.jsbn.BigInteger=n,"undefined"==typeof navigator?(n.prototype.am=s,re=28):"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=o,re=30):"Netscape"!=navigator.appName?(n.prototype.am=a,re=26):(n.prototype.am=s,re=28),n.prototype.DB=re,n.prototype.DM=(1<<re)-1,n.prototype.DV=1<<re;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-re,n.prototype.F2=2*re-52;var ne,ie,ae="0123456789abcdefghijklmnopqrstuvwxyz",oe=new Array;for(ne="0".charCodeAt(0),ie=0;ie<=9;++ie)oe[ne++]=ie;for(ne="a".charCodeAt(0),ie=10;ie<36;++ie)oe[ne++]=ie;for(ne="A".charCodeAt(0),ie=10;ie<36;++ie)oe[ne++]=ie;N.prototype.convert=R,N.prototype.revert=P,N.prototype.reduce=F,N.prototype.mulTo=L,N.prototype.sqrTo=U,x.prototype.convert=D,x.prototype.revert=K,x.prototype.reduce=V,x.prototype.mulTo=M,x.prototype.sqrTo=j,n.prototype.copyTo=l,n.prototype.fromInt=f,n.prototype.fromString=p,n.prototype.clamp=d,n.prototype.dlShiftTo=b,n.prototype.drShiftTo=S,n.prototype.lShiftTo=w,n.prototype.rShiftTo=A,n.prototype.subTo=T,n.prototype.multiplyTo=_,n.prototype.squareTo=I,n.prototype.divRemTo=B,n.prototype.invDigit=O,n.prototype.isEven=z,n.prototype.exp=H,n.prototype.toString=y,n.prototype.negate=g,n.prototype.abs=v,n.prototype.compareTo=m,n.prototype.bitLength=C,n.prototype.mod=k,n.prototype.modPowInt=G,n.ZERO=h(0),n.ONE=h(1),Ut.prototype.convert=Ot,Ut.prototype.revert=Ot,Ut.prototype.mulTo=xt,Ut.prototype.sqrTo=Dt,Mt.prototype.convert=zt,Mt.prototype.revert=Ht,Mt.prototype.reduce=Gt,Mt.prototype.mulTo=Wt,Mt.prototype.sqrTo=qt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ue=(1<<26)/se[se.length-1];n.prototype.chunkSize=Z,n.prototype.toRadix=J,n.prototype.fromRadix=$,n.prototype.fromNumber=tt,n.prototype.bitwiseTo=at,n.prototype.changeBit=St,n.prototype.addTo=_t,n.prototype.dMultiply=Ft,n.prototype.dAddOffset=Lt,n.prototype.multiplyLowerTo=Vt,n.prototype.multiplyUpperTo=jt,n.prototype.modInt=Zt,n.prototype.millerRabin=$t,n.prototype.clone=q,n.prototype.intValue=W,n.prototype.byteValue=Q,n.prototype.shortValue=Y,n.prototype.signum=X,n.prototype.toByteArray=et,n.prototype.equals=rt,n.prototype.min=nt,n.prototype.max=it,n.prototype.and=st,n.prototype.or=ct,n.prototype.xor=ft,n.prototype.andNot=pt,n.prototype.not=dt,n.prototype.shiftLeft=yt,n.prototype.shiftRight=gt,n.prototype.getLowestSetBit=mt,n.prototype.bitCount=Ct,n.prototype.testBit=bt,n.prototype.setBit=wt,n.prototype.clearBit=At,n.prototype.flipBit=Tt,n.prototype.add=It,n.prototype.subtract=Bt,n.prototype.multiply=kt,n.prototype.divide=Nt,n.prototype.remainder=Rt,n.prototype.divideAndRemainder=Pt,n.prototype.modPow=Qt,n.prototype.modInverse=Xt,n.prototype.pow=Kt,n.prototype.gcd=Yt,n.prototype.isProbablePrime=Jt},function(t,e,r){var n=r(1);r(2),r(51),r(10),function(){function e(t,e,n,i){return"workers"in n?a(t,e,n,i):r(t,e,n,i)}function r(t,e,r,n){var a=o(t,e),u=s(a.bitLength());"millerRabinTests"in r&&(u=r.millerRabinTests);var c=10;"maxBlockTime"in r&&(c=r.maxBlockTime),i(a,t,e,0,u,c,n)}function i(t,e,r,a,s,u,c){var f=+new Date;do{if(t.bitLength()>e&&(t=o(e,r)),t.isProbablePrime(s))return c(null,t);t.dAddOffset(l[a++%8],0)}while(u<0||+new Date-f<u);n.util.setImmediate(function(){i(t,e,r,a,s,u,c)})}function a(t,e,i,a){function s(){function r(r){if(!d){--s;var i=r.data;if(i.found){for(var l=0;l<n.length;++l)n[l].terminate();return d=!0,a(null,new c(i.prime,16))}u.bitLength()>t&&(u=o(t,e));var p=u.toString(16);r.target.postMessage({hex:p,workLoad:f}),u.dAddOffset(h,0)}}l=Math.max(1,l);for(var n=[],i=0;i<l;++i)n[i]=new Worker(p);for(var s=l,i=0;i<l;++i)n[i].addEventListener("message",r);var d=!1}if("undefined"==typeof Worker)return r(t,e,i,a);var u=o(t,e),l=i.workers,f=i.workLoad||100,h=30*f/8,p=i.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores(function(t,e){t&&(e=2),l=e-1,s()});s()}function o(t,e){var r=new c(t,e),n=t-1;return r.testBit(n)||r.bitwiseTo(c.ONE.shiftLeft(n),h,r),r.dAddOffset(31-r.mod(f).byteValue(),0),r}function s(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}if(n.prime)return void(t.exports=n.prime);var u=t.exports=n.prime=n.prime||{},c=n.jsbn.BigInteger,l=[6,4,2,4,2,4,6,2],f=new c(null);f.fromInt(30);var h=function(t,e){return t|e};u.generateProbablePrime=function(t,r,i){"function"==typeof r&&(i=r,r={}),r=r||{};var a=r.algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var o=r.prng||n.random,s={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===a.name)return e(t,s,a.options,i);throw new Error("Invalid prime generation algorithm: "+a.name)}}()},function(t,e,r){function n(t,e){return t.start().update(e).digest().getBytes()}function i(t){var e;if(t){if(!(e=l.oids[c.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return a(e)}function a(t){var e=s.md;switch(t){case"hmacWithSHA224":e=s.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(e&&t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function o(t,e,r,n){var i=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,t),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==n&&i.value.push(c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,s.util.hexToBytes(r.toString(16))),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(l.oids[n]).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])),i}var s=r(1);if(r(17),r(9),r(33),r(14),r(13),r(30),r(18),r(10),r(82),r(21),r(2),void 0===u)var u=s.jsbn.BigInteger;var c=s.asn1,l=s.pki=s.pki||{};t.exports=l.pbe=s.pbe=s.pbe||{};var f=l.oids,h={name:"EncryptedPrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},p={name:"PBES2Algorithms",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},d={name:"pkcs-12PbeParams",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"iterations"}]};l.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,u,h=s.random.getBytesSync(r.saltSize),p=r.count,d=c.integerToDer(p);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,g,v;switch(r.algorithm){case"aes128":n=16,y=16,g=f["aes128-CBC"],v=s.aes.createEncryptionCipher;break;case"aes192":n=24,y=16,g=f["aes192-CBC"],v=s.aes.createEncryptionCipher;break;case"aes256":n=32,y=16,g=f["aes256-CBC"],v=s.aes.createEncryptionCipher;break;case"des":n=8,y=8,g=f.desCBC,v=s.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var E="hmacWith"+r.prfAlgorithm.toUpperCase(),C=a(E),b=s.pkcs5.pbkdf2(e,h,p,n,C),S=s.random.getBytesSync(y),w=v(b);w.start(S),w.update(c.toDer(t)),w.finish(),u=w.output.getBytes();var A=o(h,d,n,E);i=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f.pkcs5PBES2).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f.pkcs5PBKDF2).getBytes()),A]),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(g).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,S)])])])}else{if("3des"!==r.algorithm){var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}n=24;var T=new s.util.ByteBuffer(h),b=l.pbe.generatePkcs12Key(e,T,1,p,n),S=l.pbe.generatePkcs12Key(e,T,2,p,n),w=s.des.createEncryptionCipher(b);w.start(S),w.update(c.toDer(t)),w.finish(),u=w.output.getBytes(),i=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(f["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,h),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,d.getBytes())])])}return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[i,c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,u)])},l.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!c.validate(t,h,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var o=c.derToOid(n.encryptionOid),u=l.pbe.getCipher(o,n.encryptionParams,e),f=s.util.createBuffer(n.encryptedData);return u.update(f),u.finish()&&(r=c.fromDer(u.output)),r},l.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:c.toDer(t).getBytes()};return s.pem.encode(r,{maxline:e})},l.encryptedPrivateKeyFromPem=function(t){var e=s.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return c.fromDer(e.body)},l.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=l.wrapRsaPrivateKey(l.privateKeyToAsn1(t));return n=l.encryptPrivateKeyInfo(n,e,r),l.encryptedPrivateKeyToPem(n)}var i,a,o,u;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,a=s.random.getBytesSync(16),u=s.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,a=s.random.getBytesSync(16),u=s.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,a=s.random.getBytesSync(16),u=s.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,a=s.random.getBytesSync(8),u=s.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,a=s.random.getBytesSync(8),u=s.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var h=s.pbe.opensslDeriveBytes(e,a.substr(0,8),o),p=u(h);p.start(a),p.update(c.toDer(l.privateKeyToAsn1(t))),p.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:s.util.bytesToHex(a).toUpperCase()},body:p.output.getBytes()};return s.pem.encode(d)},l.decryptRsaPrivateKey=function(t,e){var r=null,n=s.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&"ENCRYPTED"===n.procType.type){var a,o;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,o=s.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,o=s.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,o=s.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,o=s.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,o=s.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,o=function(t){return s.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,o=function(t){return s.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,o=function(t){return s.rc2.createDecryptionCipher(t,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var u=s.util.hexToBytes(n.dekInfo.parameters),f=s.pbe.opensslDeriveBytes(e,u.substr(0,8),a),h=o(f);if(h.start(u),h.update(s.util.createBuffer(n.body)),!h.finish())return r;r=h.output.getBytes()}else r=n.body;return r="ENCRYPTED PRIVATE KEY"===n.type?l.decryptPrivateKeyInfo(c.fromDer(r),e):c.fromDer(r),null!==r&&(r=l.privateKeyFromAsn1(r)),r},l.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var o,u;if(void 0===a||null===a){if(!("sha1"in s.md))throw new Error('"sha1" hash algorithm unavailable.');a=s.md.sha1.create()}var c=a.digestLength,l=a.blockLength,f=new s.util.ByteBuffer,h=new s.util.ByteBuffer;if(null!==t&&void 0!==t){for(u=0;u<t.length;u++)h.putInt16(t.charCodeAt(u));h.putInt16(0)}var p=h.length(),d=e.length(),y=new s.util.ByteBuffer;y.fillWithByte(r,l);var g=l*Math.ceil(d/l),v=new s.util.ByteBuffer;for(u=0;u<g;u++)v.putByte(e.at(u%d));var m=l*Math.ceil(p/l),E=new s.util.ByteBuffer;for(u=0;u<m;u++)E.putByte(h.at(u%p));var C=v;C.putBuffer(E);for(var b=Math.ceil(i/c),S=1;S<=b;S++){var w=new s.util.ByteBuffer;w.putBytes(y.bytes()),w.putBytes(C.bytes());for(var A=0;A<n;A++)a.start(),a.update(w.getBytes()),w=a.digest();var T=new s.util.ByteBuffer;for(u=0;u<l;u++)T.putByte(w.at(u%c));var _=Math.ceil(d/l)+Math.ceil(p/l),I=new s.util.ByteBuffer;for(o=0;o<_;o++){var B=new s.util.ByteBuffer(C.getBytes(l)),k=511;for(u=T.length()-1;u>=0;u--)k>>=8,k+=T.at(u)+B.at(u),B.setAt(u,255&k);I.putBuffer(B)}C=I,f.putBuffer(w)}return f.truncate(f.length()-i),f},l.pbe.getCipher=function(t,e,r){switch(t){case l.oids.pkcs5PBES2:return l.pbe.getCipherForPBES2(t,e,r);case l.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case l.oids["pbewithSHAAnd40BitRC2-CBC"]:return l.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},l.pbe.getCipherForPBES2=function(t,e,r){var n={},a=[];if(!c.validate(e,p,n,a)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=a,o}if((t=c.derToOid(n.kdfOid))!==l.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if((t=c.derToOid(n.encOid))!==l.oids["aes128-CBC"]&&t!==l.oids["aes192-CBC"]&&t!==l.oids["aes256-CBC"]&&t!==l.oids["des-EDE3-CBC"]&&t!==l.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var u=n.kdfSalt,f=s.util.createBuffer(n.kdfIterationCount);f=f.getInt(f.length()<<3);var h,d;switch(l.oids[t]){case"aes128-CBC":h=16,d=s.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,d=s.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,d=s.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,d=s.des.createDecryptionCipher;break;case"desCBC":h=8,d=s.des.createDecryptionCipher}var y=i(n.prfOid),g=s.pkcs5.pbkdf2(r,u,f,h,y),v=n.encIv,m=d(g);return m.start(v),m},l.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},a=[];if(!c.validate(e,d,n,a)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=a,o}var u=s.util.createBuffer(n.salt),f=s.util.createBuffer(n.iterations);f=f.getInt(f.length()<<3);var h,p,y;switch(t){case l.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:h=24,p=8,y=s.des.startDecrypting;break;case l.oids["pbewithSHAAnd40BitRC2-CBC"]:h=5,p=8,y=function(t,e){var r=s.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var g=i(n.prfOid),v=l.pbe.generatePkcs12Key(r,u,1,f,h,g);return g.start(),y(v,l.pbe.generatePkcs12Key(r,u,2,f,p,g))},l.pbe.opensslDeriveBytes=function(t,e,r,i){if(void 0===i||null===i){if(!("md5"in s.md))throw new Error('"md5" hash algorithm unavailable.');i=s.md.md5.create()}null===e&&(e="");for(var a=[n(i,t+e)],o=16,u=1;o<r;++u,o+=16)a.push(n(i,a[u-1]+t+e));return a.join("").substr(0,r)}},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){function r(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=r},function(t,e,r){"use strict";(function(e){/*!
 * deps/ciphermodes/gcm/helpers.js - AES-GCM Helper Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var n=r(38),i=r(5).fill,a=r(26),o=3774873600,s=new n(o>>8),u=t.exports={E1:o,E1B:225,E1L:s,LOOKUP:function(){for(var t=[],e=0;e<256;++e){for(var r=0,n=7;n>=0;--n)0!=(e&1<<n)&&(r^=o>>>7-n);t.push(r)}return t}(),arrayCopy:function(t,e,r,n,i){if(e<0||n<0||i<0)throw new TypeError("Invalid input.");if(r instanceof Uint8Array){if(n>=r.length||n+i>r.length)throw new TypeError("Invalid input.");(0!==e||i<t.length)&&(t=t instanceof Uint8Array?t.subarray(e,e+i):t.slice(e,e+i)),r.set(t,n)}else for(var a=0;a<i;++a)r[n+a]=t[e+a]},arrayEqual:function(t,e){t=t||[],e=e||[];for(var r=Math.min(t.length,e.length),n=t.length===e.length,i=0;i<r;i++)n=n&&void 0!==t[i]&&void 0!==e[i]&&t[i]===e[i];return n},asBytes:function(t,r){switch(arguments.length){case 1:return r=e.alloc(16),a.intToBigEndian(t,r,0),r;case 2:a.intToBigEndian(t,r,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(t,e){switch(arguments.length){case 1:return e=[],i(e,0,0,4),a.bigEndianToInt(t,0,e),e;case 2:a.bigEndianToInt(t,0,e);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var t=[],e=0;e<4;++e)t.push(1<<31);return t},shiftRight:function(t,e){var r,n;switch(arguments.length){case 1:return r=t[0],t[0]=r>>>1,n=r<<31,r=t[1],t[1]=r>>>1|n,n=r<<31,r=t[2],t[2]=r>>>1|n,n=r<<31,r=t[3],t[3]=r>>>1|n,r<<31&4294967295;case 2:return r=t[0],e[0]=r>>>1,n=r<<31,r=t[1],e[1]=r>>>1|n,n=r<<31,r=t[2],e[2]=r>>>1|n,n=r<<31,r=t[3],e[3]=r>>>1|n,r<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(t,e,r){var n,i,a;switch(arguments.length){case 2:return i=t[0],n=32-e,t[0]=i>>>e,a=i<<n,i=t[1],t[1]=i>>>e|a,a=i<<n,i=t[2],t[2]=i>>>e|a,a=i<<n,i=t[3],t[3]=i>>>e|a,i<<n;case 3:return i=t[0],n=32-e,r[0]=i>>>e,a=i<<n,i=t[1],r[1]=i>>>e|a,a=i<<n,i=t[2],r[2]=i>>>e|a,a=i<<n,i=t[3],r[3]=i>>>e|a,i<<n;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(t,e,r){switch(arguments.length){case 2:t[0]^=e[0],t[1]^=e[1],t[2]^=e[2],t[3]^=e[3];break;case 3:r[0]=t[0]^e[0],r[1]=t[1]^e[1],r[2]=t[2]^e[2],r[3]=t[3]^e[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(t,e){for(var r=t.slice(),n=[],i=0;i<4;++i)for(var a=e[i],o=31;o>=0;--o)0!=(a&1<<o)&&u.xor(n,r),0!==u.shiftRight(r)&&(r[0]^=u.E1);u.arrayCopy(n,0,t,0,4)},multiplyP:function(t,e){switch(arguments.length){case 1:0!==u.shiftRight(t)&&(t[0]^=u.E1);break;case 2:0!==u.shiftRight(t,e)&&(e[0]^=u.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(t,e){var r;switch(arguments.length){case 1:r=u.shiftRightN(t,8),t[0]^=u.LOOKUP[r>>>24];break;case 2:r=u.shiftRightN(t,8,e),e[0]^=u.LOOKUP[r>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){return t=t.replace("CONCAT-",""),function(r,n){function o(){if(f===h++)return e.concat(p).slice(0,s);var t=e.alloc(4+r.length+c.length);return t.writeUInt32BE(h,0),r.copy(t,4),c.copy(t,4+r.length),l(t).then(function(t){return p.push(t),o()})}n=n||{};var s=n.length,u=i.HASHLENGTH[t];if(!s)return Promise.reject(new Error("invalid key length"));if(!n.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var c=n.otherInfo,l=a[t].digest,f=Math.ceil(s/u),h=0,p=[];return o()}}/*!
 * algorithms/concat.js - Concat Key Derivation
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(7),a=r(25),o={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(t){o[t]={derive:n(t)}}),t.exports=o}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(t){function n(t){return new h(t,16)}function i(e,r){r||(r=Math.ceil(e.bitLength()/8)),r*=2;var n=e.toString(16);for(n=n.substring(Math.max(n.length-r,0));r>n.length;)n="0"+n;return t.from(n,"hex")}function a(e){return"string"==typeof e&&(e=t.from(e,"binary")),n(e.toString("hex"))}function o(t){return Math.ceil(t.getN().bitLength()/8)}function s(t){var e=d[t];if(!e)throw new TypeError("unsupported named curve: "+t);return e}function u(t,e){var r=t.getN().bitLength(),n=8*e.length,i=a(e);return r<n&&(i=i.shiftRight(n-r)),i}function c(t,e,r){var n=s(t),a=n.getCurve(),u=new p.ECPointFp(a,a.fromBigInteger(e),a.fromBigInteger(r));this.curve=t,this.params=n,this.point=u;var c=o(n);this.x=i(e,c),this.y=i(r,c)}function l(t,e){var r=s(t);this.curve=t,this.params=r;var n=o(r);this.d=i(e,n)}var f=r(3),h=f.jsbn.BigInteger,p=r(59),d=r(100);c.prototype.isValid=function(){return this.params.curve.contains(this.point)},c.prototype.verify=function(t,e){var r=this.params.getN(),n=this.params.getG(),i=a(e.r),o=a(e.s);if(i.compareTo(h.ONE)<0||i.compareTo(r)>=0)return!1;if(o.compareTo(h.ONE)<0||i.compareTo(r)>=0)return!1;var s=u(this.params,t),c=o.modInverse(r),l=s.multiply(c).mod(r),f=i.multiply(c).mod(r),p=n.multiplyTwo(l,this.point,f).getX().toBigInteger();return p=p.mod(r),p.equals(i)},l.prototype.toPublicKey=function(){var t=a(this.d),e=this.params.getG().multiply(t);return new c(this.curve,e.getX().toBigInteger(),e.getY().toBigInteger())},l.prototype.sign=function(t){var e,r,n,s,c,l=o(this.params),p=this.params.getN(),d=this.params.getG(),y=u(this.params,t),g=a(this.d);do{do{do{n=a(f.random.getBytes(l))}while(n.equals(h.ZERO)||n.compareTo(p)>=0);s=d.multiply(n).getX().toBigInteger(),e=s.mod(p)}while(e.equals(h.ZERO));c=g.multiply(e),c=y.add(c),r=n.modInverse(p).multiply(c).mod(p)}while(r.equals(h.ONE));var v=o(this.params);return e=i(e,v),r=i(r,v),{r:e,s:r}},l.prototype.isValid=function(){var t=a(this.d),e=this.params.getN().subtract(h.ONE);return t.compareTo(h.ONE)>=0&&t.compareTo(e)<0},l.prototype.computeSecret=function(t){var e=a(this.d),r=t.point.multiply(e).getX().toBigInteger();return r=i(r,o(this.params))},e.generateKeyPair=function(t){var e=s(t),r=e.getN(),n=f.random.getBytes(o(e));n=a(n);var i=r.subtract(h.ONE),u=n.mod(i).add(h.ONE),c=new l(t,u);return{private:c,public:c.toPublicKey()}},e.asPublicKey=function(e,r,i){return"string"==typeof r?r=n(r):t.isBuffer(r)&&(r=a(r)),"string"==typeof i?i=n(i):t.isBuffer(i)&&(i=a(i)),new c(e,r,i)},e.asPrivateKey=function(e,r){return"string"==typeof r?r=n(r):t.isBuffer(r)&&(r=a(r)),new l(e,r)}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(){return new V(null)}function i(t){this.r2=n(),this.q3=n(),V.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function a(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function o(t){return t}function s(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function u(t,e){t.squareTo(e),this.reduce(e)}function c(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function l(t,e){this.x=e,this.p=t}function f(t){return t===this||this.p.equals(t.p)&&this.x.equals(t.x)}function h(){return this.x}function p(){return new l(this.p,this.x.negate().mod(this.p))}function d(t){return new l(this.p,this.x.add(t.toBigInteger()).mod(this.p))}function y(t){return new l(this.p,this.x.subtract(t.toBigInteger()).mod(this.p))}function g(t){return new l(this.p,this.x.multiply(t.toBigInteger()).mod(this.p))}function v(){return new l(this.p,this.x.pow(2).mod(this.p))}function m(t){return new l(this.p,this.x.multiply(t.toBigInteger().modInverse(this.p)).mod(this.p))}function E(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=n||V.ONE,this.zinv=null}function C(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var t=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)}function b(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var t=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(t),this.curve.fromBigInteger(t)}function S(t){if(t===this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,r;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.p),!!e.equals(V.ZERO)&&(r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.p),r.equals(V.ZERO))}function w(){return null==this.x&&null==this.y||this.z.equals(V.ZERO)&&!this.y.toBigInteger().equals(V.ZERO)}function A(){return new E(this.curve,this.x,this.y.negate(),this.z)}function T(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.p),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.p);if(V.ZERO.equals(r))return V.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new V("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=r.pow(2),s=o.multiply(r),u=i.multiply(o),c=e.pow(2).multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(s).multiply(r).mod(this.curve.p),f=u.multiply(n).multiply(e).subtract(a.multiply(s)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(s)).mod(this.curve.p),h=s.multiply(this.z).multiply(t.z).mod(this.curve.p);return new E(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(f),h)}function _(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new V("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.p),a=this.curve.a.toBigInteger(),o=e.pow(2).multiply(t);V.ZERO.equals(a)||(o=o.add(this.z.pow(2).multiply(a))),o=o.mod(this.curve.p);var s=o.pow(2).subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.p),u=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.pow(2).multiply(o)).mod(this.curve.p),c=n.pow(2).multiply(n).shiftLeft(3).mod(this.curve.p);return new E(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(u),c)}function I(t){if(this.isInfinity())return this;if(0===t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new V("3")),i=this.negate(),a=this;for(e=n.bitLength()-2;e>0;--e){a=a.twice();var o=n.testBit(e);o!==r.testBit(e)&&(a=a.add(o?this:i))}return a}function B(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(e);n>=0;)i=i.twice(),t.testBit(n)?i=r.testBit(n)?i.add(a):i.add(this):r.testBit(n)&&(i=i.add(e)),--n;return i}function k(t,e,r){this.p=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new E(this,null,null),this.reducer=new i(this.p)}function N(){return this.p}function R(){return this.a}function P(){return this.b}function F(t){return t===this||this.p.equals(t.p)&&this.a.equals(t.a)&&this.b.equals(t.b)}function L(t){var e=t.getX().toBigInteger(),r=t.getY().toBigInteger(),n=this.a.toBigInteger(),i=this.b.toBigInteger(),a=this.p,o=r.pow(2).mod(a),s=e.pow(3).add(n.multiply(e)).add(i).mod(a);return o.equals(s)}function U(){return this.infinity}function O(t){return new l(this.p,t)}function x(t){this.reducer.reduce(t)}function D(t){switch(parseInt(t.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new E(this,this.fromBigInteger(new V(r,16)),this.fromBigInteger(new V(n,16)));default:return null}}function K(t){if(t.isInfinity())return"00";var e=t.getX().toBigInteger().toString(16),r=t.getY().toBigInteger().toString(16),n=this.getP().toString(16).length;for(n%2!=0&&n++;e.length<n;)e="0"+e;for(;r.length<n;)r="0"+r;return"04"+e+r}var V=r(3).jsbn.BigInteger;i.prototype.convert=a,i.prototype.revert=o,i.prototype.reduce=s,i.prototype.mulTo=c,i.prototype.sqrTo=u,l.prototype.equals=f,l.prototype.toBigInteger=h,l.prototype.negate=p,l.prototype.add=d,l.prototype.subtract=y,l.prototype.multiply=g,l.prototype.square=v,l.prototype.divide=m,E.prototype.getX=C,E.prototype.getY=b,E.prototype.equals=S,E.prototype.isInfinity=w,E.prototype.negate=A,E.prototype.add=T,E.prototype.twice=_,E.prototype.multiply=I,E.prototype.multiplyTwo=B,k.prototype.getP=N,k.prototype.getA=R,k.prototype.getB=P,k.prototype.equals=F,k.prototype.contains=L,k.prototype.getInfinity=U,k.prototype.fromBigInteger=O,k.prototype.reduce=x,k.prototype.decodePointHex=D,k.prototype.encodePointHex=K,t.exports={ECFieldElementFp:l,ECPointFp:E,ECCurveFp:k}},function(t,e,r){"use strict";(function(e){function n(t){var r=t.replace("HKDF-",""),n=t.replace("HKDF-SHA-","HS");return function(t,o){function s(t,r){return p===y++?e.concat(d).slice(0,h):(r||(r=e.alloc(0)),r=e.concat([r,f,e.from([y])]),r=n(t,r),r=r.then(function(e){return r=e.mac,d.push(r),s(t,r)}))}var u=i.HASHLENGTH[r]/8;"string"==typeof n&&(n=a[n].sign),o=o||{};var c=o.salt;c&&0!==c.length||(c=e.alloc(u));var l,f=o.info||e.alloc(0),h=o.length||u,p=Math.ceil(h/u),d=[],y=0;return l=n(c,t,{length:8*c.length}),l=l.then(function(t){return s(t.mac)})}}/*!
 * algorithms/hkdf.js - HMAC-based Extract-and-Expand Key Derivation
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(7),a=r(37),o={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(t){o[t]={derive:n(t)}}),t.exports=o}).call(e,r(0).Buffer)},function(t,e,r){"use strict";/*!
 * jwk/constants.js - Constants for JWKs
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
t.exports={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"}},function(t,e,r){"use strict";/*!
 * util/algconfig.js - Functions for managing algorithm set options
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
function n(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(t,e,r){var i=[];return i.push("^"),t&&(t=n(t),i.push(t)),e&&i.push(t||r?".*":".+"),r&&(r=n(r),i.push(r)),i.push("$"),i.join("")}var a=function(t){t?"string"==typeof t&&(t=t.split(" ")):t=[];var e,r=[],n=[],a=[],o=[],s=/^(!)?([^*]*)(\*?)([^*]*)$/;t.forEach(function(t){if(t){s.lastIndex=0;var u=s.exec(t);u&&(e="("+i(u[2],u[3],u[4])+")",u[1]?(o.push(e),n.push(u[0])):(a.push(e),r.push(u[0])))}}),a=a.length?new RegExp(a.join("|")):null,o=o.length?new RegExp(o.join("|")):null,r.length||(r=["*"]),Object.defineProperty(this,"spec",{value:r.join(" ")+" "+n.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(t){var e=Boolean(t);return e&&a&&(a.lastIndex=0,e=a.test(t)),e&&o&&(o.lastIndex=0,e=!o.test(t)),e}})};t.exports=a},function(t,e,r){"use strict";/*!
 * jwe/helpers.js - JWE Internal Helper Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(7),i=r(16);t.exports={slice:function(t,e){return Array.prototype.slice.call(t,e||0)},generateCEK:function(t){var e=i.createKeyStore(),r=n.KEYLENGTH[t];if(r)return e.generate("oct",r);throw new Error("unsupported encryption algorithm")}}},function(t,e,r){"use strict";var n=r(11).assign,i=r(112),a=r(115),o=r(69),s={};n(s,i,a,o),t.exports=s},function(t,e,r){"use strict";function n(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=i,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}var i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=n},function(t,e,r){"use strict";function n(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var i=r(11),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,e.string2buf=function(t){var e,r,n,a,o,s=t.length,u=0;for(a=0;a<s;a++)r=t.charCodeAt(a),55296==(64512&r)&&a+1<s&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(u),o=0,a=0;o<u;a++)r=t.charCodeAt(a),55296==(64512&r)&&a+1<s&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},e.buf2binstring=function(t){return n(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,i,a,o,u=e||t.length,c=new Array(2*u);for(i=0,r=0;r<u;)if((a=t[r++])<128)c[i++]=a;else if((o=s[a])>4)c[i++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&r<u;)a=a<<6|63&t[r++],o--;o>1?c[i++]=65533:a<65536?c[i++]=a:(a-=65536,c[i++]=55296|a>>10&1023,c[i++]=56320|1023&a)}return n(c,i)},e.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+s[t[r]]>e?r:e}},function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,r){"use strict";(function(e,n,i){/*!
 * index.js - Main Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
"undefined"==typeof Promise&&r(44).polyfill(),void 0===e&&((n||window).Buffer=r(0).Buffer),void 0===i&&((n||window).process=r(15)),i.version||(i.version="");var a=r(27);t.exports={JWA:r(36),JWE:r(42),JWK:r(16),JWS:a,util:r(4),parse:r(122),canYouSee:a.createVerify}}).call(e,r(0).Buffer,r(12),r(15))},function(t,e,r){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function i(t){var e=n(t),r=e[0],i=e[1];return 3*(r+i)/4-i}function a(t,e,r){return 3*(e+r)/4-r}function o(t){var e,r,i=n(t),o=i[0],s=i[1],u=new h(a(t,o,s)),c=0,l=s>0?o-4:o;for(r=0;r<l;r+=4)e=f[t.charCodeAt(r)]<<18|f[t.charCodeAt(r+1)]<<12|f[t.charCodeAt(r+2)]<<6|f[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===s&&(e=f[t.charCodeAt(r)]<<2|f[t.charCodeAt(r+1)]>>4,u[c++]=255&e),1===s&&(e=f[t.charCodeAt(r)]<<10|f[t.charCodeAt(r+1)]<<4|f[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u}function s(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function u(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(s(n));return i.join("")}function c(t){for(var e,r=t.length,n=r%3,i=[],a=0,o=r-n;a<o;a+=16383)i.push(u(t,a,a+16383>o?o:a+16383));return 1===n?(e=t[r-1],i.push(l[e>>2]+l[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(l[e>>10]+l[e>>4&63]+l[e<<2&63]+"=")),i.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=c;for(var l=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=p.length;d<y;++d)l[d]=p[d],f[p.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+t[e+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+t[e+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[r+p]=255&o,p+=d,o/=256,c-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";(function(e){function n(t,e){var r=t,n=1,i=e;if(0===arguments.length)throw new Error("at least one signatory must be provided");1===arguments.length?(i=t,n=0,r={}):s.isKey(t)||t&&"kty"in t||t&&"key"in t&&(s.isKey(t.key)||"kty"in t.key)?(i=t,n=0,r={}):r=c(t),Array.isArray(i)||(i=u(arguments,n)),r=a(c(f),r);var o=r.fields||{},p=r.format;if(p||(p=r.compact?"compact":"general"),("compact"===p||"flattened"===p)&&1<i.length)throw new Error("too many signatories for compact or flattened JSON serialization");var d="*"===r.protect;return r.compact&&(d=!0),i=i.map(function(t,e){var r;return t&&"kty"in t?(r=s.asKey(t),r=r.then(function(t){return{key:t}})):t?(r=s.asKey(t.key),r=r.then(function(e){return{header:t.header,reference:t.reference,protect:t.protect,key:e}})):r=Promise.reject(new Error("missing key for signatory "+e)),r=r.then(function(t){var e=t.key,r=t.header||{};r=a(a({},o),r),t.header=r,r.alg||(r.alg=e.algorithms(s.MODE_SIGN)[0]||"");var n=t.reference;delete t.reference,void 0===n?(n=["kid","jku","x5c","x5t","x5u"].some(function(t){return t in r}),n=n?null:"kid"):"boolean"==typeof n&&(n=n?"kid":null);var i;if(n)if(i=e.toJSON(),"jwk"===n){if("oct"===e.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=i}else n in i&&(r[n]=i[n]);var u=t.protect;if(d||"*"===u)u=Object.keys(r);else if("string"===u)u=[u];else if(Array.isArray(u))u=u.concat();else{if(u)return Promise.reject(new Error("protect must be a list of fields"));u=[]}return u=l(u),t.protected=u,t=Object.freeze(t)})}),new h({format:p},i)}/*!
 * jws/sign.js - Sign to JWS
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(5),a=r(8),o=r(4),s=r(16),u=r(108).slice,c=i.clone,l=i.uniq,f=r(109),h=function(t,r){var n=!1,i=t.format||"general",a=e.alloc(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===i},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return i},enumerable:!0}),Object.defineProperty(this,"update",{value:function(t,r){if(n)throw new Error("already final");return null!=t&&(t=o.asBuffer(t,r),a=a.length?e.concat([a,t],a.length+t.length):t),this}}),Object.defineProperty(this,"final",{value:function(t,s){if(n)return Promise.reject(new Error("already final"));this.update(t,s),n=!0;var u;switch(u=Promise.all(r),u=u.then(function(t){return a=o.base64url.encode(a),t=t.map(function(t){var r={},n=0,i=c(t.header),s=Object.keys(i).length;t.protected.forEach(function(t){t in i&&(r[t]=i[t],n++,delete i[t],s--)}),n>0?(r=JSON.stringify(r),r=o.base64url.encode(r)):r="";var u=e.from(r+"."+a,"ascii");return t=t.key.sign(t.header.alg,u,t.header),t=t.then(function(t){var e={};return 0<n&&(e.protected=r),0<s&&(e.header=i),e.signature=o.base64url.encode(t.mac),e})}),t=[Promise.resolve(a)].concat(t),Promise.all(t)}),u=u.then(function(t){return{payload:t[0],signatures:t.slice(1)}}),i){case"compact":u=u.then(function(t){var e=[t.signatures[0].protected,t.payload,t.signatures[0].signature];return e=e.join(".")});break;case"flattened":u=u.then(function(t){var e={};e.payload=t.payload;var r=t.signatures[0];return r.protected&&(e.protected=r.protected),r.header&&(e.header=r.header),e.signature=r.signature,e})}return u}})};t.exports={signer:h,createSign:n}}).call(e,r(0).Buffer)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(t){function n(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;e.setTimeout=function(){return new n(a.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(a.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(77),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,r(12))},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return c[u]=n,s(u),u++}function i(t){delete c[t]}function a(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function o(t){if(l)setTimeout(o,0,t);else{var e=c[t];if(e){l=!0;try{a(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){o(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&o(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var r=f.createElement("script");r.onreadystatechange=function(){o(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function(){s=function(t){setTimeout(o,0,t)}}(),h.setImmediate=n,h.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(12),r(15))},function(t,e,r){(function(e){function r(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var o=0,s=t.at(r);o<a.length;++o)s+=a[o]<<8,a[o]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}var n={};t.exports=n;var i={};n.encode=function(t,e,n){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var i="";if(t instanceof Uint8Array){var a=0,o=e.length,s=e.charAt(0),u=[0];for(a=0;a<t.length;++a){for(var c=0,l=t[a];c<u.length;++c)l+=u[c]<<8,u[c]=l%o,l=l/o|0;for(;l>0;)u.push(l%o),l=l/o|0}for(a=0;0===t[a]&&a<t.length-1;++a)i+=s;for(a=u.length-1;a>=0;--a)i+=e[u[a]]}else i=r(t,e);if(n){var f=new RegExp(".{1,"+n+"}","g");i=i.match(f).join("\r\n")}return i},n.decode=function(t,r){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof r)throw new TypeError('"alphabet" must be a string.');var n=i[r];if(!n){n=i[r]=[];for(var a=0;a<r.length;++a)n[r.charCodeAt(a)]=a}t=t.replace(/\s/g,"");for(var o=r.length,s=r.charAt(0),u=[0],a=0;a<t.length;a++){var c=n[t.charCodeAt(a)];if(void 0===c)return;for(var l=0,f=c;l<u.length;++l)f+=u[l]*o,u[l]=255&f,f>>=8;for(;f>0;)u.push(255&f),f>>=8}for(var h=0;t[h]===s&&h<t.length-1;++h)u.push(0);return void 0!==e?e.from(u.reverse()):new Uint8Array(u.reverse())}}).call(e,r(0).Buffer)},function(t,e,r){function n(t){var e={},r=[];if(!d.validate(t,y.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:p.pki.RDNAttributesAsArray(e.issuer),serialNumber:p.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:d.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function i(t){return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(t.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:t.issuer}),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,p.util.hexToBytes(t.serialNumber))]),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.encryptedContent.algorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")]),d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function a(t){for(var e=[],r=0;r<t.length;++r)e.push(n(t[r]));return e}function o(t){for(var e=[],r=0;r<t.length;++r)e.push(i(t[r]));return e}function s(t){var e=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(t.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:t.issuer}),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,p.util.hexToBytes(t.serialNumber))]),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.digestAlgorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.signatureAlgorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])),e.value.push(d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(c(i))}e.value.push(r)}return e}function u(t){for(var e=[],r=0;r<t.length;++r)e.push(s(t[r]));return e}function c(t){var e;if(t.type===p.pki.oids.contentType)e=d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.value).getBytes());else if(t.type===p.pki.oids.messageDigest)e=d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===p.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if("string"==typeof i){var a=Date.parse(i);i=isNaN(a)?13===i.length?d.utcTimeToDate(i):d.generalizedTimeToDate(i):new Date(a)}e=i>=r&&i<n?d.create(d.Class.UNIVERSAL,d.Type.UTCTIME,!1,d.dateToUtcTime(i)):d.create(d.Class.UNIVERSAL,d.Type.GENERALIZEDTIME,!1,d.dateToGeneralizedTime(i))}return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.type).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[e])])}function l(t){return[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(p.pki.oids.data).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.algorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,t.parameter.getBytes())]),d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,t.content.getBytes())])]}function f(t,e,r){var n={},i=[];if(!d.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(d.derToOid(n.contentType)!==p.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(p.util.isArray(n.encryptedContent))for(var s=0;s<n.encryptedContent.length;++s){if(n.encryptedContent[s].type!==d.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[s].value}else o=n.encryptedContent;t.encryptedContent={algorithm:d.derToOid(n.encAlgorithm),parameter:p.util.createBuffer(n.encParameter.value),content:p.util.createBuffer(o)}}if(n.content){var o="";if(p.util.isArray(n.content))for(var s=0;s<n.content.length;++s){if(n.content[s].type!==d.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[s].value}else o=n.content;t.content=p.util.createBuffer(o)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function h(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case p.pki.oids["aes128-CBC"]:case p.pki.oids["aes192-CBC"]:case p.pki.oids["aes256-CBC"]:e=p.aes.createDecryptionCipher(t.encryptedContent.key);break;case p.pki.oids.desCBC:case p.pki.oids["des-EDE3-CBC"]:e=p.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}var p=r(1);r(17),r(9),r(33),r(13),r(18),r(50),r(10),r(2),r(34);var d=p.asn1,y=t.exports=p.pkcs7=p.pkcs7||{};y.messageFromPem=function(t){var e=p.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=d.fromDer(e.body);return y.messageFromAsn1(n)},y.messageToPem=function(t,e){var r={type:"PKCS7",body:d.toDer(t.toAsn1()).getBytes()};return p.pem.encode(r,{maxline:e})},y.messageFromAsn1=function(t){var e={},r=[];if(!d.validate(t,y.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i,a=d.derToOid(e.contentType);switch(a){case p.pki.oids.envelopedData:i=y.createEnvelopedData();break;case p.pki.oids.encryptedData:i=y.createEncryptedData();break;case p.pki.oids.signedData:i=y.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+a+" is not (yet) supported.")}return i.fromAsn1(e.content.value[0]),i},y.createSignedData=function(){function t(){for(var t={},e=0;e<r.signers.length;++e){var n=r.signers[e],i=n.digestAlgorithm;i in t||(t[i]=p.md[p.pki.oids[i]].create()),0===n.authenticatedAttributes.length?n.md=t[i]:n.md=p.md[p.pki.oids[i]].create()}r.digestAlgorithmIdentifiers=[];for(var i in t)r.digestAlgorithmIdentifiers.push(d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(i).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")]));return t}function e(t){var e;if(r.detachedContent?e=r.detachedContent:(e=r.contentInfo.value[1],e=e.value[0]),!e)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var n=d.derToOid(r.contentInfo.value[0].value),i=d.toDer(e);i.getByte(),d.getBerValueLength(i),i=i.getBytes();for(var a in t)t[a].start().update(i);for(var o=new Date,s=0;s<r.signers.length;++s){var l=r.signers[s];if(0===l.authenticatedAttributes.length){if(n!==p.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var y=l.authenticatedAttributes[h];y.type===p.pki.oids.messageDigest?y.value=t[l.digestAlgorithm].digest():y.type===p.pki.oids.signingTime&&(y.value||(y.value=o)),f.value.push(c(y)),l.authenticatedAttributesAsn1.value.push(c(y))}i=d.toDer(f).getBytes(),l.md.start().update(i)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}r.signerInfos=u(r.signers)}var r=null;return r={type:p.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(f(r,t,y.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[],r.rawCapture.certificates)for(var e=r.rawCapture.certificates.value,n=0;n<e.length;++n)r.certificates.push(p.pki.certificateFromAsn1(e[n]))},toAsn1:function(){r.contentInfo||r.sign();for(var t=[],e=0;e<r.certificates.length;++e)t.push(p.pki.certificateToAsn1(r.certificates[e]));var n=[],i=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(r.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return t.length>0&&i.value[0].value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,t)),n.length>0&&i.value[0].value.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,n)),i.value[0].value.push(d.create(d.Class.UNIVERSAL,d.Type.SET,!0,r.signerInfos)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(r.type).getBytes()),i])},addSigner:function(t){var e=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;"string"==typeof i&&(i=p.pki.certificateFromPem(i)),e=i.issuer.attributes,n=i.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=p.pki.privateKeyFromPem(a));var o=t.digestAlgorithm||p.pki.oids.sha1;switch(o){case p.pki.oids.sha1:case p.pki.oids.sha256:case p.pki.oids.sha384:case p.pki.oids.sha512:case p.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var s=t.authenticatedAttributes||[];if(s.length>0){for(var u=!1,c=!1,l=0;l<s.length;++l){var f=s[l];if(u||f.type!==p.pki.oids.contentType){if(c||f.type!==p.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}r.signers.push({key:a,version:1,issuer:e,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:p.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:s,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},("object"!=typeof r.content||null===r.contentInfo)&&(r.contentInfo=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(p.pki.oids.data).getBytes())]),"content"in r)){var i;r.content instanceof p.util.ByteBuffer?i=r.content.bytes():"string"==typeof r.content&&(i=p.util.encodeUtf8(r.content)),n.detached?r.detachedContent=d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,i):r.contentInfo.value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,i)]))}if(0!==r.signers.length){e(t())}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=p.pki.certificateFromPem(t)),r.certificates.push(t)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},y.createEncryptedData=function(){var t=null;return t={type:p.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){f(t,e,y.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),h(t)}}},y.createEnvelopedData=function(){var t=null;return t={type:p.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=f(t,e,y.asn1.envelopedDataValidator);t.recipients=a(r.recipientInfos.value)},toAsn1:function(){return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.type).getBytes()),d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(t.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,o(t.recipients)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,l(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(a[s].type!==r[s].type||a[s].value!==r[s].value){o=!1;break}if(o)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case p.pki.oids.rsaEncryption:case p.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=p.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}h(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:p.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case p.pki.oids["aes128-CBC"]:n=16,i=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["aes192-CBC"]:n=24,i=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["aes256-CBC"]:n=32,i=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=p.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=p.util.createBuffer(p.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=p.util.createBuffer(p.random.getBytes(i));var o=a(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var s=0;s<t.recipients.length;++s){var u=t.recipients[s];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case p.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}},function(t,e,r){var n=r(1);r(46),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){var n=r(1);r(9),r(13),r(53),r(18),r(30),r(83),r(35),r(21),r(2),r(34);var i=n.asn1,a=t.exports=n.pki=n.pki||{};a.pemToDer=function(t){var e=n.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},a.privateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=i.fromDer(e.body);return a.privateKeyFromAsn1(o)},a.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:i.toDer(a.privateKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},a.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:i.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})}},function(t,e,r){var n=r(1);r(2);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],a=[1,2,3,5],o=function(t,e){return t<<e&65535|(65535&t)>>16-e},s=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,a=t,o=t.length(),s=e,u=Math.ceil(s/8),c=255>>(7&s);for(r=o;r<128;r++)a.putByte(i[a.at(r-1)+a.at(r-o)&255]);for(a.setAt(128-u,i[a.at(128-u)&c]),r=127-u;r>=0;r--)a.setAt(r,i[a.at(r+1)^a.at(r+u)]);return a};var u=function(t,e,r){var i,u,c,l,f=!1,h=null,p=null,d=null,y=[];for(t=n.rc2.expandKey(t,e),c=0;c<64;c++)y.push(t.getInt16Le());r?(i=function(t){for(c=0;c<4;c++)t[c]+=y[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=o(t[c],a[c]),l++},u=function(t){for(c=0;c<4;c++)t[c]+=y[63&t[(c+3)%4]]}):(i=function(t){for(c=3;c>=0;c--)t[c]=s(t[c],a[c]),t[c]-=y[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),l--},u=function(t){for(c=3;c>=0;c--)t[c]-=y[63&t[(c+3)%4]]});var g=function(t){var e=[];for(c=0;c<4;c++){var n=h.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),e.push(65535&n)}l=r?0:63;for(var i=0;i<t.length;i++)for(var a=0;a<t[i][0];a++)t[i][1](e);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(e[c]):e[c]^=d.getInt16Le()),p.putInt16Le(e[c])},v=null;return v={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),f=!1,h=n.util.createBuffer(),p=e||new n.util.createBuffer,d=t,v.output=p},update:function(t){for(f||h.putBuffer(t);h.length()>=8;)g([[5,i],[1,u],[6,i],[1,u],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,h,!r);else{var n=8===h.length()?8:8-h.length();h.fillWithByte(n,n)}if(e&&(f=!0,v.update()),!r&&(e=0===h.length()))if(t)e=t(8,p,!r);else{var i=p.length(),a=p.at(i-1);a>i?e=!1:p.truncate(a)}return e}}};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},function(t,e,r){function n(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var o=0;o<t[a].safeBags.length;o++){var s=t[a].safeBags[o];void 0!==n&&s.type!==n||(null!==e?void 0!==s.attributes[e]&&s.attributes[e].indexOf(r)>=0&&i.push(s):i.push(s))}return i}function i(t){if(t.composed||t.constructed){for(var e=c.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function a(t,e,r,n){if(e=l.fromDer(e,r),e.tagClass!==l.Class.UNIVERSAL||e.type!==l.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<e.value.length;a++){var u=e.value[a],c={},h=[];if(!l.validate(u,p,c,h)){var d=new Error("Cannot read ContentInfo.");throw d.errors=h,d}var y={encrypted:!1},g=null,v=c.content.value[0];switch(l.derToOid(c.contentType)){case f.oids.data:if(v.tagClass!==l.Class.UNIVERSAL||v.type!==l.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");g=i(v).value;break;case f.oids.encryptedData:g=o(v,n),y.encrypted=!0;break;default:var d=new Error("Unsupported PKCS#12 contentType.");throw d.contentType=l.derToOid(c.contentType),d}y.safeBags=s(g,r,n),t.safeContents.push(y)}}function o(t,e){var r={},n=[];if(!l.validate(t,c.pkcs7.asn1.encryptedDataValidator,r,n)){var a=new Error("Cannot read EncryptedContentInfo.");throw a.errors=n,a}var o=l.derToOid(r.contentType);if(o!==f.oids.data){var a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw a.oid=o,a}o=l.derToOid(r.encAlgorithm);var s=f.pbe.getCipher(o,r.encParameter,e),u=i(r.encryptedContentAsn1),h=c.util.createBuffer(u.value);if(s.update(h),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function s(t,e,r){if(!e&&0===t.length)return[];if(t=l.fromDer(t,e),t.tagClass!==l.Class.UNIVERSAL||t.type!==l.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],o={},s=[];if(!l.validate(a,y,o,s)){var c=new Error("Cannot read SafeBag.");throw c.errors=s,c}var h={type:l.derToOid(o.bagId),attributes:u(o.bagAttributes)};n.push(h);var p,d,g=o.bagValue.value[0];switch(h.type){case f.oids.pkcs8ShroudedKeyBag:if(null===(g=f.decryptPrivateKeyInfo(g,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case f.oids.keyBag:try{h.key=f.privateKeyFromAsn1(g)}catch(t){h.key=null,h.asn1=g}continue;case f.oids.certBag:p=v,d=function(){if(l.derToOid(o.certId)!==f.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=l.derToOid(o.certId),t}var r=l.fromDer(o.cert,e);try{h.cert=f.certificateFromAsn1(r,!0)}catch(t){h.cert=null,h.asn1=r}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=h.type,c}if(void 0!==p&&!l.validate(g,p,o,s)){var c=new Error("Cannot read PKCS#12 "+p.name);throw c.errors=s,c}d()}return n}function u(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var n={},i=[];if(!l.validate(t[r],g,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var o=l.derToOid(n.oid);if(void 0!==f.oids[o]){e[f.oids[o]]=[];for(var s=0;s<n.values.length;++s)e[f.oids[o]].push(n.values[s].value)}}return e}var c=r(1);r(9),r(29),r(13),r(50),r(53),r(10),r(21),r(32),r(2),r(34);var l=c.asn1,f=c.pki,h=t.exports=c.pkcs12=c.pkcs12||{},p={name:"ContentInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},d={name:"PFX",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"version"},p,{name:"PFX.macData",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:l.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},y={name:"SafeBag",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},g={name:"Attribute",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,capture:"values"}]},v={name:"CertBag",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:l.Class.UNIVERSAL,type:l.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};h.pkcs12FromAsn1=function(t,e,r){"string"==typeof e?(r=e,e=!0):void 0===e&&(e=!0);var o={},s=[];if(!l.validate(t,d,o,s)){var u=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw u.errors=u,u}var p={version:o.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=c.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=n(p.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=n(p.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=n(p.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return n(p.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return n(p.safeContents,"localKeyId",t,e)}};if(3!==o.version.charCodeAt(0)){var u=new Error("PKCS#12 PFX of version other than 3 not supported.");throw u.version=o.version.charCodeAt(0),u}if(l.derToOid(o.contentType)!==f.oids.data){var u=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw u.oid=l.derToOid(o.contentType),u}var y=o.content.value[0];if(y.tagClass!==l.Class.UNIVERSAL||y.type!==l.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(y=i(y),o.mac){var g=null,v=0,m=l.derToOid(o.macAlgorithm);switch(m){case f.oids.sha1:g=c.md.sha1.create(),v=20;break;case f.oids.sha256:g=c.md.sha256.create(),v=32;break;case f.oids.sha384:g=c.md.sha384.create(),v=48;break;case f.oids.sha512:g=c.md.sha512.create(),v=64;break;case f.oids.md5:g=c.md.md5.create(),v=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+m);var E=new c.util.ByteBuffer(o.macSalt),C="macIterations"in o?parseInt(c.util.bytesToHex(o.macIterations),16):1,b=h.generateKey(r,E,3,C,v,g),S=c.hmac.create();S.start(g,b),S.update(y.value);if(S.getMac().getBytes()!==o.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return a(p,y.value,e,r),p},h.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i,a=n.localKeyId;if(null!==a)a=c.util.hexToBytes(a);else if(n.generateLocalKeyId)if(e){var o=c.util.isArray(e)?e[0]:e;"string"==typeof o&&(o=f.certificateFromPem(o));var s=c.md.sha1.create();s.update(l.toDer(f.certificateToAsn1(o)).getBytes()),a=s.digest().getBytes()}else a=c.random.getBytes(20);var u=[];null!==a&&u.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.localKeyId).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,a)])])),"friendlyName"in n&&u.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.friendlyName).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(i=l.create(l.Class.UNIVERSAL,l.Type.SET,!0,u));var p=[],d=[];null!==e&&(d=c.util.isArray(e)?e:[e]);for(var y=[],g=0;g<d.length;++g){e=d[g],"string"==typeof e&&(e=f.certificateFromPem(e));var v=0===g?i:void 0,m=f.certificateToAsn1(e),E=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.certBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.x509Certificate).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(m).getBytes())])])]),v]);y.push(E)}if(y.length>0){var C=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,y),b=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(C).getBytes())])]);p.push(b)}var S=null;if(null!==t){var w=f.wrapRsaPrivateKey(f.privateKeyToAsn1(t));S=null===r?l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.keyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[w]),i]):l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.pkcs8ShroudedKeyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[f.encryptPrivateKeyInfo(w,r,n)]),i]);var A=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[S]),T=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(A).getBytes())])]);p.push(T)}var _,I=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,p);if(n.useMac){var s=c.md.sha1.create(),B=new c.util.ByteBuffer(c.random.getBytes(n.saltSize)),k=n.count,t=h.generateKey(r,B,3,k,20),N=c.hmac.create();N.start(s,t),N.update(l.toDer(I).getBytes());var R=N.getMac();_=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.sha1).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,R.getBytes())]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,B.getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(k).getBytes())])}return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(3).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(I).getBytes())])]),_])},h.generateKey=c.pbe.generatePkcs12Key},function(t,e,r){function n(){u=String.fromCharCode(128),u+=a.util.fillString(String.fromCharCode(0),128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],f={},f["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],f["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],f["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],f["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],c=!0}function i(t,e,r){for(var n,i,a,o,s,u,c,f,h,p,d,y,g,v,m,E,C,b,S,w,A,T,_,I,B,k,N,R,P,F,L,U,O,x,D,K=r.length();K>=128;){for(P=0;P<16;++P)e[P][0]=r.getInt32()>>>0,e[P][1]=r.getInt32()>>>0;for(;P<80;++P)U=e[P-2],F=U[0],L=U[1],n=((F>>>19|L<<13)^(L>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|L>>>19)^(L<<3|F>>>29)^(F<<26|L>>>6))>>>0,x=e[P-15],F=x[0],L=x[1],a=((F>>>1|L<<31)^(F>>>8|L<<24)^F>>>7)>>>0,o=((F<<31|L>>>1)^(F<<24|L>>>8)^(F<<25|L>>>7))>>>0,O=e[P-7],D=e[P-16],L=i+O[1]+o+D[1],e[P][0]=n+O[0]+a+D[0]+(L/4294967296>>>0)>>>0,e[P][1]=L>>>0;for(g=t[0][0],v=t[0][1],m=t[1][0],E=t[1][1],C=t[2][0],b=t[2][1],S=t[3][0],w=t[3][1],A=t[4][0],T=t[4][1],_=t[5][0],I=t[5][1],B=t[6][0],k=t[6][1],N=t[7][0],R=t[7][1],P=0;P<80;++P)c=((A>>>14|T<<18)^(A>>>18|T<<14)^(T>>>9|A<<23))>>>0,f=((A<<18|T>>>14)^(A<<14|T>>>18)^(T<<23|A>>>9))>>>0,h=(B^A&(_^B))>>>0,p=(k^T&(I^k))>>>0,s=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,u=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&m|C&(g^m))>>>0,y=(v&E|b&(v^E))>>>0,L=R+f+p+l[P][1]+e[P][1],n=N+c+h+l[P][0]+e[P][0]+(L/4294967296>>>0)>>>0,i=L>>>0,L=u+y,a=s+d+(L/4294967296>>>0)>>>0,o=L>>>0,N=B,R=k,B=_,k=I,_=A,I=T,L=w+i,A=S+n+(L/4294967296>>>0)>>>0,T=L>>>0,S=C,w=b,C=m,b=E,m=g,E=v,L=i+o,g=n+a+(L/4294967296>>>0)>>>0,v=L>>>0;L=t[0][1]+v,t[0][0]=t[0][0]+g+(L/4294967296>>>0)>>>0,t[0][1]=L>>>0,L=t[1][1]+E,t[1][0]=t[1][0]+m+(L/4294967296>>>0)>>>0,t[1][1]=L>>>0,L=t[2][1]+b,t[2][0]=t[2][0]+C+(L/4294967296>>>0)>>>0,t[2][1]=L>>>0,L=t[3][1]+w,t[3][0]=t[3][0]+S+(L/4294967296>>>0)>>>0,t[3][1]=L>>>0,L=t[4][1]+T,t[4][0]=t[4][0]+A+(L/4294967296>>>0)>>>0,t[4][1]=L>>>0,L=t[5][1]+I,t[5][0]=t[5][0]+_+(L/4294967296>>>0)>>>0,t[5][1]=L>>>0,L=t[6][1]+k,t[6][0]=t[6][0]+B+(L/4294967296>>>0)>>>0,t[6][1]=L>>>0,L=t[7][1]+R,t[7][0]=t[7][0]+N+(L/4294967296>>>0)>>>0,t[7][1]=L>>>0,K-=128}}var a=r(1);r(14),r(2);var o=t.exports=a.sha512=a.sha512||{};a.md.sha512=a.md.algorithms.sha512=o;var s=a.sha384=a.sha512.sha384=a.sha512.sha384||{};s.create=function(){return o.create("SHA-384")},a.md.sha384=a.md.algorithms.sha384=s,a.sha512.sha256=a.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},a.md["sha512/256"]=a.md.algorithms["sha512/256"]=a.sha512.sha256,a.sha512.sha224=a.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},a.md["sha512/224"]=a.md.algorithms["sha512/224"]=a.sha512.sha224,o.create=function(t){if(c||n(),void 0===t&&(t="SHA-512"),!(t in f))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=f[t],r=null,o=a.util.createBuffer(),s=new Array(80),l=0;l<80;++l)s[l]=new Array(2);var h=64;switch(t){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28}var p={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16};return p.start=function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var t=p.messageLengthSize/4,n=0;n<t;++n)p.fullMessageLength.push(0);o=a.util.createBuffer(),r=new Array(e.length);for(var n=0;n<e.length;++n)r[n]=e[n].slice(0);return p},p.start(),p.update=function(t,e){"utf8"===e&&(t=a.util.encodeUtf8(t));var n=t.length;p.messageLength+=n,n=[n/4294967296>>>0,n>>>0];for(var u=p.fullMessageLength.length-1;u>=0;--u)p.fullMessageLength[u]+=n[1],n[1]=n[0]+(p.fullMessageLength[u]/4294967296>>>0),p.fullMessageLength[u]=p.fullMessageLength[u]>>>0,n[0]=n[1]/4294967296>>>0;return o.putBytes(t),i(r,s,o),(o.read>2048||0===o.length())&&o.compact(),p},p.digest=function(){var e=a.util.createBuffer();e.putBytes(o.bytes());var n=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize,c=n&p.blockLength-1;e.putBytes(u.substr(0,p.blockLength-c));for(var l,f,h=8*p.fullMessageLength[0],d=0;d<p.fullMessageLength.length-1;++d)l=8*p.fullMessageLength[d+1],f=l/4294967296>>>0,h+=f,e.putInt32(h>>>0),h=l>>>0;e.putInt32(h);for(var y=new Array(r.length),d=0;d<r.length;++d)y[d]=r[d].slice(0);i(y,s,e);var g,v=a.util.createBuffer();g="SHA-512"===t?y.length:"SHA-384"===t?y.length-2:y.length-4;for(var d=0;d<g;++d)v.putInt32(y[d][0]),d===g-1&&"SHA-512/224"===t||v.putInt32(y[d][1]);return v},p};var u=null,c=!1,l=null,f=null},function(t,e,r){t.exports=r(86).default,t.exports.default=t.exports},function(t,e,r){"use strict";(function(t){function n(e,r){return void 0===r&&(r="utf8"),o(t.isBuffer(e)?e.toString("base64"):t.from(e,r).toString("base64"))}function i(e,r){return void 0===r&&(r="utf8"),t.from(a(e),"base64").toString(r)}function a(t){return t=t.toString(),u.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function o(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(e){return t.from(a(e),"base64")}Object.defineProperty(e,"__esModule",{value:!0});var u=r(87),c=n;c.encode=n,c.decode=i,c.toBase64=a,c.fromBase64=o,c.toBuffer=s,e.default=c}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(t){function r(e){var r=e.length,n=r%4;if(!n)return e;var i=r,a=4-n,o=r+a,s=t.alloc(o);for(s.write(e);a--;)s.write("=",i++);return s.toString()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r}).call(e,r(0).Buffer)},function(t,e,r){"use strict";/*!
 * util/utf8.js - Implementation of UTF-8 Encoder/Decoder
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=e;n.encode=function(t){var e=encodeURIComponent(t||"");return e=e.replace(/%([0-9a-fA-F]{2})/g,function(t,e){return e=parseInt(e,16),String.fromCharCode(e)})},n.decode=function(t){var e=(t||"").replace(/[\u0080-\u00ff]/g,function(t){return"%"+(256|t.charCodeAt(0)).toString(16).substring(1)});return e=decodeURIComponent(e)}},function(t,e,r){var n=r(90),i=r(91),a=i;a.v1=n,a.v4=i,t.exports=a},function(t,e,r){function n(t,e,r){var n=e&&r||0,l=e||[];t=t||{};var f=t.node||i,h=void 0!==t.clockseq?t.clockseq:a;if(null==f||null==h){var p=o();null==f&&(f=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=a=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:c+1,g=d-u+(y-c)/1e4;if(g<0&&void 0===t.clockseq&&(h=h+1&16383),(g<0||d>u)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=d,c=y,a=h,d+=122192928e5;var v=(1e4*(268435455&d)+y)%4294967296;l[n++]=v>>>24&255,l[n++]=v>>>16&255,l[n++]=v>>>8&255,l[n++]=255&v;var m=d/4294967296*1e4&268435455;l[n++]=m>>>8&255,l[n++]=255&m,l[n++]=m>>>24&15|16,l[n++]=m>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(var E=0;E<6;++E)l[n+E]=f[E];return e||s(l)}var i,a,o=r(54),s=r(55),u=0,c=0;t.exports=n},function(t,e,r){function n(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[n+s]=o[s];return e||a(o)}var i=r(54),a=r(55);t.exports=n},function(t,e,r){"use strict";(function(e){function n(t){if(16!==t.length)throw new Error("invalid iv")}function i(t){var r=function(t,r,i){try{n(i)}catch(t){return Promise.reject(t)}var a=Promise.resolve();return a=a.then(function(){var n=g.cipher.createCipher("AES-CBC",new v(t));return n.start({iv:new v(i)}),n.update(new v(r)),n.finish()?e.from(n.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})},i=function(t,r,i){try{n(i)}catch(t){return Promise.reject(t)}var a=Promise.resolve();return a=a.then(function(){var e={name:"AES-CBC"};return p.subtleCrypto.importKey("raw",t,e,!0,["encrypt"])}),a=a.then(function(t){var e={name:"AES-CBC",iv:i};return p.subtleCrypto.encrypt(e,t,r)}),a=a.then(function(t){return t=e.from(t)})},a=function(r,i,a){try{n(a)}catch(t){return Promise.reject(t)}var o=Promise.resolve(i);return o=o.then(function(n){var i="AES-"+t+"-CBC",o=p.nodeCrypto.createCipheriv(i,r,a);return e.concat([o.update(n),o.final()])})};return p.setupFallback(a,i,r)}function a(t){var r=function(t,r,i){try{n(i)}catch(t){return Promise.reject(t)}var a=Promise.resolve();return a=a.then(function(){var n=g.cipher.createDecipher("AES-CBC",new v(t));return n.start({iv:new v(i)}),n.update(new v(r)),n.finish()?e.from(n.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))})},i=function(t,r,i){try{n(i)}catch(t){return Promise.reject(t)}var a=Promise.resolve();return a=a.then(function(){var e={name:"AES-CBC"};return p.subtleCrypto.importKey("raw",t,e,!0,["decrypt"])}),a=a.then(function(t){var e={name:"AES-CBC",iv:i};return p.subtleCrypto.decrypt(e,t,r)}),a=a.then(function(t){return t=e.from(t)})},a=function(r,i,a){try{n(a)}catch(t){return Promise.reject(t)}var o=Promise.resolve();return o=o.then(function(){var n="AES-"+t+"-CBC",o=p.nodeCrypto.createDecipheriv(n,r,a);return e.concat([o.update(i),o.final()])})};return p.setupFallback(a,i,r)}function o(t,e){if(e<<1!=t.length<<3)throw new Error("invalid encryption key size")}function s(t){var r=i(t);return function(n,i,a){try{o(n,t)}catch(t){return Promise.reject(t)}var s=n.slice(t/8),u=n.slice(0,t/8),c=a.iv||e.alloc(0),l=a.aad||a.adata||e.alloc(0),f=r(s,i,c);return f=f.then(function(r){var n,i=e.concat([l,c,r,p.int64ToBuffer(8*l.length)]);return n=d["HS"+2*t].sign(u,i,{length:t}),n=n.then(function(e){var n=e.mac.slice(0,t/8);return{data:r,tag:n}})})}}function u(t){var r=a(t);return function(n,i,a){try{o(n,t)}catch(t){return Promise.reject(t)}var s=n.slice(t/8),u=n.slice(0,t/8),c=a.iv||e.alloc(0),l=a.aad||a.adata||e.alloc(0),f=a.tag||a.mac||e.alloc(0),h=Promise.resolve();return h=h.then(function(){var r,n=e.concat([l,c,i,p.int64ToBuffer(8*l.length)]);return r=d["HS"+2*t].verify(u,n,f,{length:t}),r=r.then(function(){return i},function(){throw new Error("mac check failed")})}),h=h.then(function(){return r(s,i,c)})}}function c(t,r,n,i){var a=8*t.length,o=a/2,s=Promise.resolve();return s=s.then(function(){return e.concat([p.int32ToBuffer(1),t,p.int32ToBuffer(o),e.from(r,"utf8"),n,i,E])}),s=s.then(function(t){return y["SHA-"+a].digest(t).then(function(t){return t.slice(0,o/8)})}),s=Promise.resolve(s)}function l(t,r,n,i){var a=8*t.length,o=a,s=Promise.resolve();return s=s.then(function(){return e.concat([p.int32ToBuffer(1),t,p.int32ToBuffer(o),e.from(r,"utf8"),n,i,C])}),s=s.then(function(t){return y["SHA-"+a].digest(t).then(function(t){return t.slice(0,o/8)})}),s=Promise.resolve(s)}function f(t,r){var n=i(t);return function(i,a,o){var s,u,f=o.epu||p.int32ToBuffer(0),h=o.epv||p.int32ToBuffer(0),y=o.iv||e.alloc(0),g=o.aad||o.adata||e.alloc(0),v=o.kdata||e.alloc(0),E=[c(i,r,f,h),l(i,r,f,h)],C=Promise.all(E).then(function(t){s=t[0],u=t[1]});return C=C.then(function(){return n(s,a,y)}),C=C.then(function(r){var n=e.concat([g,b,e.from(v),b,e.from(m.base64url.encode(y),"utf8"),b,e.from(m.base64url.encode(r),"utf8")]);return Promise.all([Promise.resolve(r),d["HS"+2*t].sign(u,n,{length:t})])}),C=C.then(function(t){return{data:t[0],tag:t[1].mac}})}}function h(t,r){var n=a(t);return function(i,a,o){var s,u,f=o.epu||p.int32ToBuffer(0),h=o.epv||p.int32ToBuffer(0),y=o.iv||e.alloc(0),g=o.aad||o.adata||e.alloc(0),v=o.kdata||e.alloc(0),E=o.tag||o.mac||e.alloc(0),C=[c(i,r,f,h),l(i,r,f,h)],S=Promise.all(C).then(function(t){s=t[0],u=t[1]});return S=S.then(function(){var r=e.concat([g,b,e.from(v),b,e.from(m.base64url.encode(y),"utf8"),b,e.from(m.base64url.encode(a),"utf8")]);try{return d["HS"+2*t].verify(u,r,E,{loose:!1})}catch(t){throw new Error("mac check failed")}}),S=S.then(function(){return n(s,a,y)})}}/*!
 * algorithms/aes-cbc-hmac-sha2.js - AES-CBC-HMAC-SHA2 Composited Encryption
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var p=r(6),d=r(37),y=r(25),g=r(3),v=r(19),m=r(4),E=e.from("Encryption","utf8"),C=e.from("Integrity","utf8"),b=e.from(".","utf8"),S={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(t){var e=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(t)[1]);S[t]={encrypt:s(e),decrypt:u(e)}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(t){var e=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(t)[1]);S[t]={encrypt:f(e,t),decrypt:h(e,t)}}),t.exports=S}).call(e,r(0).Buffer)},function(t,e){},function(t,e,r){"use strict";(function(e){function n(t,r){function n(e,n){if(t!==e.length<<3)throw new Error("invalid key size");if(!n&&!r)throw new Error("invalid iv");if(n&&12!==n.length)throw new Error("invalid iv")}function i(t){if(r){var e=o.base64url.encode(t.iv),n=o.base64url.encode(t.tag);t={data:t.data,header:{iv:e,tag:n}}}return t}var c=function(t,r,a){var c,l,f=a.iv,h=a.aad||a.adata||e.alloc(0);try{n(t,f)}catch(t){return Promise.reject(t)}return f=f||o.randomBytes(12),c=u.createCipher({key:t,iv:f,additionalData:h}),l=e.alloc(r.length),new Promise(function(t,e){var n=s.CHUNK_SIZE,a=0,o=0;!function s(){var u=Math.min(n,r.length-o);if(a+=c.update(r,o,u,l,a),o+=u,r.length>o)return void setTimeout(s,0);if((a+=c.finish(l,a))!==r.length)return void e(new Error("encryption failed"));var h=c.tag;t(i({data:l,iv:f,tag:h}))}()})},l=function(t,r,s){var u=s.iv,c=s.aad||s.adata||e.alloc(0);try{n(t,u)}catch(t){return Promise.reject(t)}u=u||o.randomBytes(12);var l,f={name:"AES-GCM"};return l=a.subtleCrypto.importKey("raw",t,f,!0,["encrypt"]),l=l.then(function(t){return f.iv=u,f.tagLength=128,c.length&&(f.additionalData=c),a.subtleCrypto.encrypt(f,t,r)}),l=l.then(function(t){var r=t.byteLength-16,n=t.slice(r);n=e.from(n);var a=t.slice(0,r);return a=e.from(a),i({data:a,iv:u,tag:n})})},f=function(t,r,s){var u=s.iv,c=s.aad||s.adata||e.alloc(0);try{n(t,u)}catch(t){return Promise.reject(t)}u=u||o.randomBytes(12);var l,f="aes-"+8*t.length+"-gcm";try{l=a.nodeCrypto.createCipheriv(f,t,u)}catch(t){throw new Error("unsupported algorithm: "+f)}if("function"!=typeof l.setAAD)throw new Error("unsupported algorithm: "+f);return c.length&&l.setAAD(c),i({data:e.concat([l.update(r),l.final()]),iv:u,tag:l.getAuthTag()})};return a.setupFallback(f,l,c)}function i(t){function r(e,r,n){if(t!==e.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv");if(16!==n.length)throw new Error("invalid tag length")}var n=function(t,n,i){var a,o,c=i.aad||i.adata||e.alloc(0),l=i.iv||e.alloc(0),f=i.tag||i.mac||e.alloc(0);try{r(t,l,f)}catch(t){return Promise.reject(t)}return a=u.createDecipher({key:t,iv:l,additionalData:c,tag:f}),o=e.alloc(n.length),new Promise(function(t,e){var r=s.CHUNK_SIZE,i=0,u=0;!function s(){var c=Math.min(r,n.length-u);if(i+=a.update(n,u,c,o,i),u+=c,n.length>u)return void setTimeout(s,0);try{i+=a.finish(o,i)}catch(t){return void e(new Error("decryption failed"))}if(i!==n.length)return void e(new Error("decryption failed"));t(o)}()})},i=function(t,n,i){var o=i.aad||i.adata||e.alloc(0),s=i.iv||e.alloc(0),u=i.tag||i.mac||e.alloc(0);try{r(t,s,u)}catch(t){return Promise.reject(t)}var c,l={name:"AES-GCM"};return c=a.subtleCrypto.importKey("raw",t,l,!0,["decrypt"]),c=c.then(function(t){return l.iv=s,l.tagLength=128,o.length&&(l.additionalData=o),n=e.concat([n,u],n.length+u.length),a.subtleCrypto.decrypt(l,t,n)}),c=c.then(function(t){return t=e.from(t)})},o=function(t,n,i){var o=i.aad||i.adata||e.alloc(0),s=i.iv||e.alloc(0),u=i.tag||i.mac||e.alloc(0);try{r(t,s,u)}catch(t){return Promise.reject(t)}var c,l="aes-"+8*t.length+"-gcm";try{c=a.nodeCrypto.createDecipheriv(l,t,s)}catch(t){throw new Error("unsupported algorithm: "+l)}if("function"!=typeof c.setAAD)throw new Error("unsupported algorithm: "+l);c.setAuthTag(u),o.length&&c.setAAD(o);try{return e.concat([c.update(n),c.final()])}catch(t){throw new Error("decryption failed")}};return a.setupFallback(o,i,n)}/*!
 * algorithms/aes-gcm.js - AES-GCM Encryption and Key-Wrapping
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var a=r(6),o=r(4),s=r(7),u=r(95),c={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(t){var e=/A(\d+)GCM(KW)?/g.exec(t),r=parseInt(e[1]),a="KW"===e[2];c[t]={encrypt:n(r,a),decrypt:i(r)}}),t.exports=c}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=this.blockSize||16}/*!
 * deps/ciphermodes/gcm/index.js - AES-GCM implementation Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(38),a=r(3),o=r(96),s=r(56),u=r(26),c=r(19),l=r(97);t.exports={createCipher:function(t){var e=new a.aes.Algorithm("AES-GCM",n);return e.initialize({key:new c(t.key)}),e.mode.start(t),e.mode},createDecipher:function(t){var e=new a.aes.Algorithm("AES-GCM",n);return e.initialize({key:new c(t.key)}),e.mode._decrypt=!0,e.mode.start(t),e.mode}},n.prototype.start=function(t){if(this.tag=null,!("iv"in(t=t||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=t.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in t&&(this.tag=e.from(t.tag));var r=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=e.alloc(r);var n=t.multiplier;if(null==n&&(n=new o["8k"]),this.multiplier=n,this.H=this.zeroBlock(),l.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var a=this.zeroBlock();u.longToBigEndian(new i(this.nonce.length).multiply(8),a,8),this.gHASHBlock(this.J0,a)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=i.ZERO,this.atLengthPre=i.ZERO,this.counter=e.from(this.J0),this.bufOff=0,this.totalLength=i.ZERO,"additionalData"in t&&this.processAADBytes(t.additionalData,0,t.additionalData.length)},n.prototype.update=function(t,e,r,n,i){for(var a=0;r>0;){var o=Math.min(r,this.bufBlock.length-this.bufOff);t.copy(this.bufBlock,this.bufOff,e,e+o),r-=o,e+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(n,i+a),a+=this.blockSize)}return a},n.prototype.finish=function(t,r){var n=0;this._decrypt&&(n+=this.update(this.tag,0,this.tag.length,t,r)),this.totalLength.isZero()&&this.initCipher();var i=this.bufOff;if(this._decrypt){if(i<this.tagLength)throw new Error("data too short");i-=this.tagLength}i>0&&(this.gCTRPartial(this.bufBlock,0,i,t,r+n),n+=i),this.atLength=this.atLength.add(this.atBlockPos);var a=this.zeroBlock();u.longToBigEndian(this.atLength.multiply(8),a,0),u.longToBigEndian(this.totalLength.multiply(8),a,8),this.gHASHBlock(this.S,a);var o=e.alloc(this.blockSize);if(l.encrypt(this.cipher,this.J0,0,o,0),this.xor(o,this.S),this._decrypt){if(!s.arrayEqual(this.tag,o))throw new Error("mac check in Gcm failed")}else this.tag=e.alloc(this.tagLength),o.copy(this.tag,0,0,this.tagLength);return n},n.prototype.initCipher=function(){this.atLength.greaterThan(i.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(i.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(i.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},n.prototype.outputBlock=function(t,e){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,t,e),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},n.prototype.processAADBytes=function(t,e,r){for(var n=0;n<r;++n)this.atBlock[this.atBlockPos]=t[e+n],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},n.prototype.getNextCounterBlock=function(){for(var t=15;t>=12;--t){var r=this.counter[t]+1&255;if(this.counter[t]=r,0!==r)break}var n=e.alloc(this.blockSize);return l.encrypt(this.cipher,this.counter,0,n,0),n},n.prototype.gCTRBlock=function(t,e,r){var n=this.getNextCounterBlock();this.xor(n,t),n.copy(e,r,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?t:n),this.totalLength=this.totalLength.add(this.blockSize)},n.prototype.gCTRPartial=function(t,e,r,n,i){var a=this.getNextCounterBlock();this.xor(a,t,e,r),a.copy(n,i,0,r),this.gHASHPartial(this.S,this._decrypt?t:a,0,r),this.totalLength=this.totalLength.add(r)},n.prototype.gHASHBlock=function(t,e){this.xor(t,e),this.multiplier.multiplyH(t)},n.prototype.gHASHPartial=function(t,e,r,n){this.xor(t,e,r,n),this.multiplier.multiplyH(t)},n.prototype.xor=function(t,e,r,n){switch(arguments.length){case 2:for(var i=15;i>=0;--i)t[i]^=e[i];break;case 4:for(;n-- >0;)t[n]^=e[r+n];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return t},n.prototype.zeroBlock=function(){return e.alloc(16)}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(){this.H=[],this.M=null}/*!
 * deps/ciphermodes/gcm/multipliers.js - AES-GCM Multipliers
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(56),a=r(26);n.prototype.init=function(t){var e,r,n;if(null==this.M)for(this.M=[],e=0;e<32;++e)for(this.M[e]=[],r=0;r<16;++r)for(this.M[e][r]=[],n=0;n<4;++n)this.M[e][r][n]=0;else if(i.arrayEqual(this.H,t))return;for(this.H=t.slice(),i.asInts(t,this.M[1][8]),r=4;r>=1;r>>=1)i.multiplyP(this.M[1][r+r],this.M[1][r]);for(i.multiplyP(this.M[1][1],this.M[0][8]),r=4;r>=1;r>>=1)i.multiplyP(this.M[0][r+r],this.M[0][r]);for(e=0;;){for(r=2;r<16;r+=r)for(n=1;n<r;++n)i.xor(this.M[e][r],this.M[e][n],this.M[e][r+n]);if(32==++e)return;if(e>1)for(r=8;r>0;r>>=1)i.multiplyP8(this.M[e-2][r],this.M[e][r])}},n.prototype.multiplyH=function(t){for(var e=[],r=15;r>=0;--r){var n=this.M[r+r][15&t[r]];e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],n=this.M[r+r+1][(240&t[r])>>>4],e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3]}a.intToBigEndian(e,t,0)},t.exports={"8k":n}},function(t,e,r){"use strict";function n(t,e,r,n,a){var o=new Array(4),s=new Array(4);i.bigEndianToInt(e,r,o),t.encrypt(o,s),i.intToBigEndian(s,n,a)}/*!
 * deps/ciphermodes/helpers.js - Cipher Helper Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var i=r(26);t.exports={encrypt:n}},function(t,e,r){"use strict";/*!
 * algorithms/dir.js - Direct key mode
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
function n(t){return Promise.resolve({data:t,once:!0,direct:!0})}function i(t){return Promise.resolve(t)}var a={dir:{encrypt:n,decrypt:i}};t.exports=a},function(t,e,r){"use strict";(function(e){function n(t){switch(t){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+t)}}function i(){var t={name:"ECDH"},r=function(t,e){var r=t&&y.convertToForge(t,!0);if(!r||!r.isValid())return Promise.reject(new Error("invalid EC public key"));switch(e){case"jwk":r=y.convertToJWK(t,!0);break;case"buffer":r=y.convertToBuffer(t,!0)}return Promise.resolve(r)},n=function(t,e){e=e||{};var n=e.length||0,i=y.convertToForge(t,!1),a=r(e.public,"forge");return a=a.then(function(t){var e=i.computeSecret(t);if(n){if(e.length<n)return Promise.reject(new Error("key length too large: "+n));e=e.slice(0,n)}return e})},i=function(n,i){n=n||{},i=i||{};var a=i.length||0,o=p(b(t),{namedCurve:n.crv});a||(a=n.d.length);var s=y.convertToJWK(n,!1);s=E.subtleCrypto.importKey("jwk",s,o,!1,["deriveBits"]);var u=r(i.public,"jwk");u=u.then(function(t){return E.subtleCrypto.importKey("jwk",t,o,!1,[])});var c=Promise.all([s,u]);return c=c.then(function(e){var r=e[0],n=e[1],i=p(b(t),{public:n});return E.subtleCrypto.deriveBits(i,r,8*a)}),c=c.then(function(t){return t=e.from(t)})},a=function(t,e){if("function"!=typeof E.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");e=e||{};var n,i=e.length||0;switch(t.crv){case"P-256":n="prime256v1";break;case"P-384":n="secp384r1";break;case"P-521":n="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+n))}var a=y.convertToBuffer(t,!1),o=r(e.public,"buffer");return o=o.then(function(t){var e=E.nodeCrypto.createECDH(n);e.setPrivateKey(a);var r=e.computeSecret(t);if(i){if(r.length<i)return Promise.reject(new Error("key length too large: "+i));r=r.slice(0,i)}return r})};return E.setupFallback(a,i,n)}function a(){return function(t,e){e=e||{};var r;try{if(!(r=e.hash||n(t.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(t){return Promise.reject(t)}var i=["public"],a=A.ECDH.derive(t,w(e,i));return a=a.then(function(t){return v["CONCAT-"+r].derive(t,S(e,i))})}}function o(){return function(t,e){e=e||{};var r;try{if(!(r=e.hash||n(t.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(t){return Promise.reject(t)}var i=["public"],a=A.ECDH.derive(t,w(e,i));return a=a.then(function(t){return g["HKDF-"+r].derive(t,S(e,i))})}}function s(t,r,n){function i(t){return e.concat([E.int32ToBuffer(t.length),t])}var a=n.algorithm||"",o=C.KEYLENGTH[a],s=d.asBuffer(n.apu||"","base64url"),u=d.asBuffer(n.apv||"","base64url"),c=e.concat([i(e.from(a,"utf8")),i(s),i(u),E.int32ToBuffer(o)]),l={public:r,length:o/8,hash:"SHA-256",otherInfo:c};return A["ECDH-CONCAT"].derive(t,l)}function u(){return function(t,e,r){if(r=r||{},!r.epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var n=y.convertToObj(r.epk,!1);if(!t||!t.x||!t.y)return Promise.reject(new Error("missing static public key"));var i=y.convertToObj(t,!0),a=s(n,i,{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(t){return{data:t,once:!0,direct:!0}})}}function c(){return function(t,e,r){if(r=r||{},!r.epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var n=y.convertToObj(r.epk,!0);if(!t||!t.d)return Promise.reject(new Error("missing static private key"));var i=y.convertToObj(t,!1),a=s(i,n,{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(t){return t})}}function l(t){return function(e,r,n){if(n=n||{},!n.epk||!n.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=y.convertToObj(n.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var a=y.convertToObj(e,!0),o=s(i,a,{algorithm:n.alg,apu:n.apu,apv:n.apv});return o=o.then(function(e){return t(e,r)})}}function f(t){return function(e,r,n){if(n=n||{},!n.epk||!n.epk.x||!n.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=y.convertToObj(n.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var a=y.convertToObj(e,!1),o=s(a,i,{algorithm:n.alg,apu:n.apu,apv:n.apv});return o=o.then(function(e){return t(e,r)})}}/*!
 * algorithms/ecdh.js - Elliptic Curve Diffie-Hellman algorithms
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var h=r(5),p=r(8),d=r(4),y=r(40),g=r(60),v=r(57),m=r(39),E=r(6),C=r(7),b=h.clone,S=h.omit,w=h.pick,A=t.exports={};["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(t){var e=/^ECDH(?:-(\w+))?$/g.exec(t||"")[1],r=A[t]=A[t]||{};switch(e||""){case"CONCAT":r.derive=a();break;case"HKDF":r.derive=o();break;case"":r.derive=i();break;default:r.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(t){var e=/^ECDH-ES(?:\+(.+))?/g.exec(t||"")[1],r=A[t]=A[t]||{};e?(e=m[e],e?(r.encrypt=l(e.encrypt),r.decrypt=f(e.decrypt)):r.ecrypt=r.decrypt=null):(r.encrypt=u(),r.decrypt=c())})}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t,e,r,n){this.curve=t,this.g=e,this.n=r,this.h=n}function i(){return this.curve}function a(){return this.g}function o(){return this.n}function s(){return this.h}function u(t){return new c(t,16)}var c=r(3).jsbn.BigInteger,l=r(59);n.prototype.getCurve=i,n.prototype.getG=a,n.prototype.getN=o,n.prototype.getH=s;var f=t.exports={secp256r1:function(){var t=u("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),e=u("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),r=u("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),i=u("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),a=c.ONE,o=new l.ECCurveFp(t,e,r);return new n(o,o.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),i,a)}(),secp384r1:function(){var t=u("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),e=u("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),r=u("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),i=u("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),a=c.ONE,o=new l.ECCurveFp(t,e,r);return new n(o,o.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F"),i,a)}(),secp521r1:function(){var t=u("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),e=u("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),r=u("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),i=u("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),a=c.ONE,o=new l.ECCurveFp(t,e,r);return new n(o,o.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),i,a)}()};f["P-256"]=f.secp256r1,f["P-384"]=f.secp384r1,f["P-521"]=f.secp521r1},function(t,e,r){"use strict";(function(e){function n(t){switch(t){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+t)}}function i(t){var r,i=n(t),a=function(r,n){if(i!==r.crv)return Promise.reject(new Error("invalid curve"));var a,s=o.convertToForge(r,!1);return a=u[t].digest(n),a=a.then(function(t){return t=s.sign(t),t=e.concat([t.r,t.s]),{data:n,mac:t}})},c=function(r,n){if(i!==r.crv)return Promise.reject(new Error("invalid curve"));var a,u=o.convertToJWK(r,!1),c={name:"ECDSA",namedCurve:u.crv,hash:{name:t}};return a=s.subtleCrypto.importKey("jwk",u,c,!0,["sign"]),a=a.then(function(t){return s.subtleCrypto.sign(c,t,n)}),a=a.then(function(t){return t=e.from(t),{data:n,mac:t}})},l=t.toLowerCase().replace("-","");return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(l)>-1&&(r=function(t,e){if(i!==t.crv)return Promise.reject(new Error("invalid curve"));var r;r=Promise.resolve(s.nodeCrypto.createSign(l)),r=r.then(function(t){return t.update(e),t});var n;switch(l.slice(-3)){case"384":n=48;break;case"512":n=66;break;default:n=32}return r=r.then(function(e){return o.derToConcat(e.sign(o.convertToPEM(t,!0)),n)}),r=r.then(function(t){return{data:e,mac:t}})}),s.setupFallback(r,c,a)}function a(t){var e,r=n(t),i=function(e,n,i){if(r!==e.crv)return Promise.reject(new Error("invalid curve"));var a,s=o.convertToForge(e,!0);return a=u[t].digest(n),a=a.then(function(t){var e=i.length/2,r={r:i.slice(0,e),s:i.slice(e)};return s.verify(t,r)?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})},a=function(e,n,i){if(r!==e.crv)return Promise.reject(new Error("invalid curve"));var a,u=o.convertToJWK(e,!0),c={name:"ECDSA",namedCurve:u.crv,hash:{name:t}};return a=s.subtleCrypto.importKey("jwk",u,c,!0,["verify"]),a=a.then(function(t){return s.subtleCrypto.verify(c,t,i,n)}),a=a.then(function(t){return t?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})},c=t.toLowerCase().replace("-","");return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(c)>-1&&(e=function(t,e,n){if(r!==t.crv)return Promise.reject(new Error("invalid curve"));var i;switch(c.slice(-3)){case"384":i=48;break;case"512":i=66;break;default:i=32}var a;return a=Promise.resolve(s.nodeCrypto.createVerify(c)),a=a.then(function(r){return r.update(e),r.end(),r.verify(o.convertToPEM(t,!1),o.concatToDer(n,i))}),a=a.then(function(t){if(!t)throw new Error("verification failed");return{data:e,mac:n,valid:!0}})}),s.setupFallback(e,a,i)}/*!
 * algorithms/ecdsa.js - Elliptic Curve Digitial Signature Algorithms
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var o=r(40),s=r(6),u=r(25),c={};["ES256","ES384","ES512"].forEach(function(t){var e=t.replace(/ES(\d+)/g,function(t,e){return"SHA-"+e});c[t]={sign:i(e),verify:a(e)}}),t.exports=c}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t,r,n){var i="PBES2-"+t+"+"+r,a=[e.from(i,"utf8"),p,n];return e.concat(a)}function i(t){function r(t){t=t||{};var r=t.length||0,n=c.asBuffer(t.salt||e.alloc(0),"base64u4l"),i=t.iterations||0;if(0>=r)throw new Error("invalid key length");if(0>=i)throw new Error("invalid iteration count");return t.length=r,t.salt=n,t.iterations=i,t}var n=function(n,i){try{i=r(i)}catch(t){return Promise.reject(t)}var a=i.length,o=i.salt,u=i.iterations;return new Promise(function(r,i){var c=s.md[t.replace("-","").toLowerCase()].create(),l=function(t,n){t?i(t):(n=e.from(n,"binary"),r(n))};s.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),u,a,c,l)})},i=function(e,n){try{n=r(n)}catch(t){return Promise.reject(t)}var i=n.length,a=n.salt,o=n.iterations,s=Promise.resolve(e);return s=s.then(function(t){return l.subtleCrypto.importKey("raw",t,"PBKDF2",!1,["deriveBits"])}),s=s.then(function(e){var r={name:"PBKDF2",salt:new Uint8Array(a),iterations:o,hash:t};return l.subtleCrypto.deriveBits(r,e,8*i)}),s=s.then(function(t){return c.asBuffer(t)})},a=function(e,n){if(6>l.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBKDF2-"+t);try{n=r(n)}catch(t){return Promise.reject(t)}var i=n.length,a=n.salt,o=n.iterations,s=t.replace("-","");return new Promise(function(t,r){function n(e,n){e?r(e):t(n)}l.nodeCrypto.pbkdf2(e,a,o,i,s,n)})};return l.setupFallback(a,i,n)}function a(t,r){var i="PBKDF2-"+t.replace("HS","SHA-"),a=f.KEYLENGTH[r]/8;return function(o,s,l){l=l||{};var f=c.asBuffer(l.p2s||e.alloc(0),"base64url"),p=l.p2c||d;if(0>=p)throw new Error("invalid iteration count");if(0===f.length)f=c.randomBytes(y);else if(8>f.length)throw new Error("salt too small");var v={p2s:c.base64url.encode(f),p2c:p};f=n(t,r,f),l=u(l,{salt:f,iterations:p,length:a});var m=Promise.resolve(o);return m=m.then(function(t){return g[i].derive(t,l)}),m=m.then(function(t){return h[r].encrypt(t,s)}),m=m.then(function(t){return t.header=u(t.header||{},v),t})}}function o(t,r){var i="PBKDF2-"+t.replace("HS","SHA-"),a=f.KEYLENGTH[r]/8;return function(o,s,l){l=l||{};var f=c.asBuffer(l.p2s||e.alloc(0),"base64url"),p=l.p2c||0;if(0>=p)return Promise.reject(new Error("invalid iteration count"));if(8>f.length)return Promise.reject(new Error("salt too small"));f=n(t,r,f),l=u(l,{salt:f,iterations:p,length:a});var d=Promise.resolve(o);return d=d.then(function(t){return g[i].derive(t,l)}),d=d.then(function(t){return h[r].decrypt(t,s)})}}/*!
 * algorithms/pbes2.js - Password-Based Encryption (v2) Algorithms
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var s=r(3),u=r(8),c=r(4),l=r(6),f=r(7),h=r(39),p=e.from([0]),d=8192,y=16,g={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach(function(t){var e=t.replace("PBKDF2-","");g[t]={derive:i(e)}}),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(t){var e=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(t),r=e[1],n=e[2];g[t]={encrypt:a(r,n),decrypt:o(r,n)}}),t.exports=g}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){return s.nodeCrypto&&s.nodeCrypto.constants&&-1!==Object.keys(l).indexOf(t)}function i(t){var r={name:t};"RSA-OAEP-256"===t?(r.name="RSA-OAEP",r.hash={name:"SHA-256"}):"RSA-OAEP"===t?r.hash={name:"SHA-1"}:r.name="RSAES-PKCS1-v1_5";var i,a=function(t,e){e=new u(e).bytes();var n=c.convertToForge(t,!0),i={};"RSA-OAEP"===r.name&&(i.md=r.hash.name.toLowerCase().replace(/-/g,""),i.md=o.md[i.md].create());var a=n.encrypt(e,r.name.toUpperCase(),i);return a=new u(a).native(),Promise.resolve({data:a})};i="RSAES-PKCS1-v1_5"!==r.name?function(t,n){t=c.convertToJWK(t,!0);var i;return i=s.subtleCrypto.importKey("jwk",t,r,!0,["encrypt"]),i=i.then(function(t){return s.subtleCrypto.encrypt(r,t,n)}),i=i.then(function(t){return{data:e.from(t)}})}:null;var f;return n(t)&&(f=function(e,r){return e=c.convertToPem(e,!0),{data:s.nodeCrypto.publicEncrypt({key:e,padding:s.nodeCrypto.constants[l[t]]},r)}}),s.setupFallback(f,i,a)}function a(t){var r={name:t};"RSA-OAEP-256"===t?(r.name="RSA-OAEP",r.hash={name:"SHA-256"}):"RSA-OAEP"===t?r.hash={name:"SHA-1"}:r.name="RSAES-PKCS1-v1_5";var i,a=function(t,e){e=new u(e).bytes();var n=c.convertToForge(t,!1),i={};"RSA-OAEP"===r.name&&(i.md=r.hash.name.toLowerCase().replace(/-/g,""),i.md=o.md[i.md].create());var a=n.decrypt(e,r.name.toUpperCase(),i);return a=new u(a).native(),Promise.resolve(a)};i="RSAES-PKCS1-v1_5"!==r.name?function(t,n){t=c.convertToJWK(t,!1);var i;return i=s.subtleCrypto.importKey("jwk",t,r,!0,["decrypt"]),i=i.then(function(t){return s.subtleCrypto.decrypt(r,t,n)}),i=i.then(function(t){return e.from(t)})}:null;var f;return n(t)?f=function(e,r){return e=c.convertToPem(e,!1),s.nodeCrypto.privateDecrypt({key:e,padding:s.nodeCrypto.constants[l[t]]},r)}:s.nodeCrypto&&"RSA-OAEP"===t&&(f=function(t,e){return t=c.convertToPem(t,!1),s.nodeCrypto.privateDecrypt(t,e)}),s.setupFallback(f,i,a)}/*!
 * algorithms/rsaes.js - RSA Signatures
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var o=r(3),s=r(6),u=r(19),c=r(41),l={"RSA-OAEP":"RSA_PKCS1_OAEP_PADDING",RSA1_5:"RSA_PKCS1_PADDING"},f={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(t){f[t]={encrypt:i(t),decrypt:a(t)}}),t.exports=f}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(){return l.nodeCrypto&&l.nodeCrypto.constants&&l.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST}function i(t){var r,n=t.replace("RS","SHA").toLowerCase(),i=t.replace("RS","SHA-"),a={name:"RSASSA-PKCS1-V1_5",hash:{name:i}},o=function(t,r){var i=u.md[n].create();i.start(),i.update(r);var a=f.convertToForge(t,!1),o=a.sign(i,"RSASSA-PKCS1-V1_5");return o=e.from(o,"binary"),Promise.resolve({data:r,mac:o})},s=function(t,r){t=f.convertToJWK(t,!1);var n;return n=l.subtleCrypto.importKey("jwk",t,a,!0,["sign"]),n=n.then(function(t){return l.subtleCrypto.sign(a,t,r)}),n=n.then(function(t){var n=e.from(t);return{data:r,mac:n}})},c="RSA-"+i.replace("-","");return l.nodeCrypto&&l.nodeCrypto.getHashes().indexOf(c)>-1&&(r=function(t,e){var r=l.nodeCrypto.createSign(c);return r.update(e),{data:e,mac:r.sign(f.convertToPem(t,!1))}}),l.setupFallback(r,s,o)}function a(t){var e,r=t.replace("RS","SHA").toLowerCase(),n=t.replace("RS","SHA-"),i={name:"RSASSA-PKCS1-V1_5",hash:{name:n}},a=function(t,e,n){var i=u.md[r].create();i.start(),i.update(e),i=i.digest().bytes();var a=f.convertToForge(t,!0),o=n.toString("binary");return a.verify(i,o,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:e,mac:n,valid:!0}):Promise.reject(new Error("verification failed"))},o=function(t,e,r){t=f.convertToJWK(t,!0);var n;return n=l.subtleCrypto.importKey("jwk",t,i,!0,["verify"]),n=n.then(function(t){return l.subtleCrypto.verify(i,t,r,e)}),n=n.then(function(t){return t?{data:e,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})};return l.nodeCrypto&&l.nodeCrypto.getHashes().indexOf(r)>-1&&(e=function(t,e,n){var i=l.nodeCrypto.createVerify(r);return i.update(e),i.end(),i.verify(f.convertToPem(t,!0),n)?{data:e,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),l.setupFallback(e,o,a)}function o(t){var r,i=t.replace("PS","SHA").toLowerCase(),a=t.replace("PS","SHA-"),o={name:"RSA-PSS",hash:{name:a},saltLength:c.HASHLENGTH[a]/8},s=function(t,r){var n=u.md[i].create();n.start(),n.update(r);var o=u.pss.create({md:u.md[i].create(),mgf:u.mgf.mgf1.create(u.md[i].create()),saltLength:c.HASHLENGTH[a]/8}),s=f.convertToForge(t,!1),l=s.sign(n,o);return l=e.from(l,"binary"),Promise.resolve({data:r,mac:l})},h=function(t,r){t=f.convertToJWK(t,!1);var n;return n=l.subtleCrypto.importKey("jwk",t,o,!0,["sign"]),n=n.then(function(t){return l.subtleCrypto.sign(o,t,r)}),n=n.then(function(t){var n=e.from(t);return{data:r,mac:n}})},p="RSA-"+a.replace("-","");return n()&&(r=function(t,e){var r=l.nodeCrypto.createSign(p);return r.update(e),{data:e,mac:r.sign({key:f.convertToPem(t,!1),padding:l.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:l.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST})}}),l.setupFallback(r,h,s)}function s(t){var e,r=t.replace("PS","SHA").toLowerCase(),i=t.replace("PS","SHA-"),a={name:"RSA-PSS",hash:{name:i},saltLength:c.HASHLENGTH[i]/8},o=function(t,e,n){var a=u.md[r].create();a.start(),a.update(e),a=a.digest().bytes();var o=u.pss.create({md:u.md[r].create(),mgf:u.mgf.mgf1.create(u.md[r].create()),saltLength:c.HASHLENGTH[i]/8}),s=f.convertToForge(t,!0),l=n.toString("binary");return s.verify(a,l,o)?Promise.resolve({data:e,mac:n,valid:!0}):Promise.reject(new Error("verification failed"))},s=function(t,e,r){t=f.convertToJWK(t,!0);var n;return n=l.subtleCrypto.importKey("jwk",t,a,!0,["verify"]),n=n.then(function(t){return l.subtleCrypto.verify(a,t,r,e)}),n=n.then(function(t){return t?{data:e,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})};return n()&&(e=function(t,e,n){var i=l.nodeCrypto.createVerify(r);return i.update(e),i.end(),i.verify({key:f.convertToPem(t,!0),padding:l.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:l.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST},n)?{data:e,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),l.setupFallback(e,s,o)}/*!
 * algorithms/rsassa.js - RSA Signatures
 *
 * Copyright (c) 2015 Cisco Systems, Inc.  See LICENSE file.
 */
var u=r(3),c=r(7),l=r(6),f=r(41),h={};["PS256","PS384","PS512"].forEach(function(t){h[t]={sign:o(t),verify:s(t)}}),["RS256","RS384","RS512"].forEach(function(t){h[t]={sign:i(t),verify:a(t)}}),t.exports=h}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t,r){return"iv"in r&&(r.iv=e.isBuffer(r.iv)?r.iv:a.base64url.decode(r.iv||"")),"adata"in r&&(r.adata=e.isBuffer(r.adata)?r.adata:e.from(r.adata||"","utf8")),"mac"in r&&(r.mac=e.isBuffer(r.mac)?r.mac:a.base64url.decode(r.mac||"")),"tag"in r&&(r.tag=e.isBuffer(r.tag)?r.tag:a.base64url.decode(r.tag||"")),r}function i(t,r){return"iv"in r&&(r.iv=e.isBuffer(r.iv)?r.iv:a.base64url.decode(r.iv||"")),"adata"in r&&(r.adata=e.isBuffer(r.adata)?r.adata:e.from(r.adata||"","utf8")),r}/*!
 * jwk/octkey.js - Symmetric Octet Key Representation
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var a=r(4),o={BaseKey:r(24),helpers:r(20)},s=["HS256","HS384","HS512"],u=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],c=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"],l={publicKey:function(t){var e=o.helpers.COMMON_PROPS.concat([]);return o.helpers.unpackProps(t,e)},privateKey:function(t){var e,r=o.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return e=o.helpers.unpackProps(t,r),e&&e.k?e.length=8*e.k.length:e=void 0,e},thumbprint:function(t){t.private&&(t=t.private);return{k:t.k||"",kty:"oct"}},algorithms:function(t,e){var r=t.private&&8*t.private.k.length,n=[256,384,512];if(!r)return[];switch(e){case"encrypt":case"decrypt":return u.filter(function(t){return t==="A"+r/2+"CBC-HS"+r||t==="A"+r/2+"CBC+HS"+r||t==="A"+r+"GCM"});case"sign":case"verify":return s.filter(function(t){var e=!1;return n.forEach(function(n){n>r||(e|=t==="HS"+n)}),e});case"wrap":case"unwrap":return c.filter(function(t){return t==="A"+r+"KW"||t==="A"+r+"GCMKW"||0===t.indexOf("PBES2-")||"dir"===t})}return[]},encryptKey:function(t,e){return e.private&&e.private.k},encryptProps:i,decryptKey:function(t,e){return e.private&&e.private.k},decryptProps:n,wrapKey:function(t,e){return e.private&&e.private.k},wrapProps:i,unwrapKey:function(t,e){return e.private&&e.private.k},unwrapProps:n,signKey:function(t,e){return e.private&&e.private.k},verifyKey:function(t,e){return e.private&&e.private.k}},f={kty:"oct",prepare:function(t){var e=l,r=Promise.resolve(t);return r=r.then(function(t){return o.helpers.thumbprint(e,t)}),r=r.then(function(r){var n={};return n[o.helpers.INTERNALS.THUMBPRINT_HASH]=r,t[o.helpers.INTERNALS.THUMBPRINT_KEY]=n,e})},generate:function(t){var e=a.randomBytes(t/8);return Promise.resolve({k:e})}};t.exports=Object.freeze({config:l,factory:f}),function(t){t.register(f)}(r(23).registry)}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){return t=t.toString(16),t.length%2&&(t="0"+t),e.from(t,"hex")}/*!
 * jwk/rsa.js - RSA Key Representation
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(3),a=r(41),o=r(6).nodeCrypto,s={BaseKey:r(24),helpers:r(20)},u=["RS256","RS384","RS512","PS256","PS384","PS512"],c=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],l={publicKey:function(t){var e,r=s.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return e=s.helpers.unpackProps(t,r),e&&e.n&&e.e?e.length=8*e.n.length:(delete e.e,delete e.n),e},privateKey:function(t){var e,r=s.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return e=s.helpers.unpackProps(t,r),e&&e.d&&e.n&&e.e&&e.p&&e.q&&e.dp&&e.dq&&e.qi?e.length=8*e.d.length:e=void 0,e},thumbprint:function(t){return t.public&&(t=t.public),{e:t.e,kty:"RSA",n:t.n}},algorithms:function(t,e){switch(e){case"encrypt":case"decrypt":return[];case"wrap":return t.public&&c.slice()||[];case"unwrap":return t.private&&c.slice()||[];case"sign":return t.private&&u.slice()||[];case"verify":return t.public&&u.slice()||[]}return[]},wrapKey:function(t,e){return e.public},unwrapKey:function(t,e){return e.private},signKey:function(t,e){return e.private},verifyKey:function(t,e){return e.public},convertToPEM:function(t,e){var r=a.convertToForge(t,!e);return e?i.pki.privateKeyToPem(r):i.pki.publicKeyToPem(r)}},f={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},h={kty:"RSA",validators:f,prepare:function(t){var e=l,r=Promise.resolve(t);return r=r.then(function(t){return s.helpers.thumbprint(e,t)}),r=r.then(function(r){var n={};return n[s.helpers.INTERNALS.THUMBPRINT_HASH]=r,t[s.helpers.INTERNALS.THUMBPRINT_KEY]=n,e})},generate:function(t){var e;if(o)e=new Promise(function(e,r){i.pki.rsa.generateKeyPair({bits:t,e:65537},function(t,n){if(t)return r(t);e(n.privateKey)})});else{var r=i.pki.rsa.generateKeyPair({bits:t,e:65537});e=Promise.resolve(r.privateKey)}return e.then(function(t){var e={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(r){var i,a;"string"==typeof r?i=a=r:(i=r.incoming,a=r.outgoing),i in t&&(e[a]=n(t[i]))}),e})},import:function(t){if(f.oid!==t.keyOid)return null;if(!t.parsed){"string"==typeof t.keyValue?t.keyValue=i.asn1.fromDer(t.keyValue):Array.isArray(t.keyValue)&&(t.keyValue=t.keyValue[0]);var r="private"===t.type?f.privateKey:f.publicKey,n={},a=[];if(!i.asn1.validate(t.keyValue,r,n,a))return null;t=n}var o={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(r){if(r in t){var n=e.from(t[r],"binary");0===n[0]&&(n=n.slice(1)),o[r]=n}}),o}};t.exports=Object.freeze({config:l,factory:h}),function(t){t.register(h)}(r(23).registry)}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t){switch(t){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}/*!
 * jwk/rsa.js - RSA Key Representation
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(40),a=r(3),o=r(58),s={BaseKey:r(24),helpers:r(20)},u=["ES256","ES384","ES512"],c=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"],l=i.EC_OID,f={publicKey:function(t){var e=s.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),r=s.helpers.unpackProps(t,e);return r&&r.crv&&r.x&&r.y?r.length=i.curveSize(r.crv):(delete r.crv,delete r.x,delete r.y),r},privateKey:function(t){var e=s.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),r=s.helpers.unpackProps(t,e);return r&&r.crv&&r.x&&r.y&&r.d?r.length=i.curveSize(r.crv):r=void 0,r},thumbprint:function(t){return t.public&&(t=t.public),{crv:t.crv,kty:"EC",x:t.x,y:t.y}},algorithms:function(t,e){var r=t.public&&t.public.length||t.private&&t.private.length||0;switch(521===r&&(r=512),e){case"encrypt":case"decrypt":return[];case"wrap":return t.public&&c||[];case"unwrap":return t.private&&c||[];case"sign":return t.private?u.filter(function(t){return t==="ES"+r}):[];case"verify":return t.public?u.filter(function(t){return t==="ES"+r}):[]}},encryptKey:function(t,e){return e.public},decryptKey:function(t,e){return e.private},wrapKey:function(t,e){return e.public},unwrapKey:function(t,e){return e.private},signKey:function(t,e){return e.private},verifyKey:function(t,e){return e.public}};f.convertToPEM=i.convertToPEM;var h={oid:l,privateKey:{name:"ECPrivateKey",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:a.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},p={kty:"EC",validators:h,prepare:function(t){var e=f,r=Promise.resolve(t);return r=r.then(function(t){return s.helpers.thumbprint(e,t)}),r=r.then(function(r){var n={};return n[s.helpers.INTERNALS.THUMBPRINT_HASH]=r,t[s.helpers.INTERNALS.THUMBPRINT_KEY]=n,e})},generate:function(t){var e=o.generateKeyPair(t),r={crv:t,x:e.public.x,y:e.public.y,d:e.private.d};return Promise.resolve(r)},import:function(t){if(h.oid!==t.keyOid)return null;var r;if(t.keyParams&&a.asn1.Type.OID===t.keyParams.type?(r=a.asn1.derToOid(t.keyParams.value),r=n(r)):t.crv&&(r=a.asn1.derToOid(t.crv),r=n(r)),!r)return null;if(!t.parsed){var i={},o=[];if("private"===t.type){if("string"==typeof t.keyValue?t.keyValue=a.asn1.fromDer(t.keyValue):Array.isArray(t.keyValue)&&(t.keyValue=t.keyValue[0]),!a.asn1.validate(t.keyValue,h.embeddedPrivateKey,i,o))return null}else i.point=t.keyValue;t=i}var s={kty:"EC",crv:r};if(t.d&&(s.d=e.from(t.d,"binary")),t.point){var u=e.from(t.point,"binary");if(4!==u.readUInt16BE(0))return null;u=u.slice(2);var c=u.length/2;s.x=u.slice(0,c),s.y=u.slice(c)}return s}};t.exports=Object.freeze({config:f,factory:p}),function(t){t.register(p)}(r(23).registry)}).call(e,r(0).Buffer)},function(t,e,r){"use strict";/*!
 * jws/helpers.js - JWS Internal Helper Functions
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
t.exports={slice:function(t,e){return Array.prototype.slice.call(t,e||0)}}},function(t,e,r){"use strict";/*!
 * jws/defaults.js - Defaults for JWSs
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n={compact:!1,protect:"*"};t.exports=n},function(t,e,r){"use strict";(function(e){function n(t,e){return new l(t,e)}/*!
 * jws/verify.js - Verifies from a JWS
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(5).clone,a=r(8),o=r(22),s=r(62),u=r(16),c={algorithms:"*",allowEmbeddedKey:!1},l=function(t,r){var n,l;u.isKey(t)?(n=t,l=n.keystore):l=u.isKeyStore(t)?t:u.createKeyStore(),r=a(c,r),Object.defineProperty(this,"defaultKey",{value:n||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:l,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(t,c){c=a({},r,c||{});var f=c.handlers||{},h=Object.keys(f),p=new s(c.algorithms);if("string"==typeof t)t=t.split("."),t={payload:t[1],signatures:[{protected:t[0],signature:t[2]}]};else if(!t||"object"!=typeof t)throw new Error("invalid input");t.signature&&(t.signatures=[{protected:t.protected||void 0,header:t.header||void 0,signature:t.signature}]);var d=t.signatures||[{}];d=d.map(function(t){var e=i(t.header||{}),r=t.protected?JSON.parse(o.decode(t.protected,"utf8")):{};e=a(e,r);var n=o.decode(t.signature);if(!p.match(e.alg))return Promise.reject(new Error("Algorithm not allowed: "+e.alg));var s=r.crit;if(s){if(!Array.isArray(s))return Promise.reject(new Error("Invalid 'crit' header"));for(var u=0;s.length>u;u++)if(-1===h.indexOf(s[u]))return Promise.reject(new Error("Critical extension is not supported: "+s[u]))}return r=Object.keys(r),Promise.resolve({protected:r,aad:t.protected||"",header:e,signature:n})});var y=Promise.all(d);return y=y.then(function(r){return new Promise(function(i,s){var p=function(){var d=r.shift();if(!d)return void s(new Error("no key found"));d=a({},d,{payload:t.payload});var y=Promise.resolve(d);y=y.then(function(t){var r;return c.allowEmbeddedKey&&t.header.jwk?r=u.asKey(t.header.jwk):c.allowEmbeddedKey&&t.header.x5c?(r=t.header.x5c[0],r=e.from(r,"base64"),r=u.asKey(r,"pkix")):r=Promise.resolve(n||l.get({use:"sig",alg:t.header.alg,kid:t.header.kid})),r.then(function(e){return e?(t.key=e,t):Promise.reject(new Error("key does not match"))})}),y=y.then(function(t){var e=[];return h.forEach(function(r){r=f[r];var n;"function"==typeof r?n=r(t):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(t)),n&&e.push(Promise.resolve(n))}),Promise.all(e).then(function(){return t})}),y=y.then(function(t){var r=t.aad||"",n=t.payload||"",i=e.alloc(1+r.length+n.length),a=0;return i.write(r,a,"ascii"),a+=r.length,i.write(".",a,"ascii"),a++,e.isBuffer(n)?n.copy(i,a):i.write(n,a,"binary"),t.content=i,t}),y=y.then(function(t){return t.key.verify(t.header.alg,t.content,t.signature)}),y=y.then(function(t){var e=d.payload;return e=o.decode(e),{protected:d.protected,header:d.header,payload:e,signature:t.mac,key:d.key}}),y=y.then(function(t){var e=[];return h.forEach(function(r){r=f[r];var n;"object"==typeof r&&"function"==typeof r.complete&&(n=r.complete(t)),n&&e.push(Promise.resolve(n))}),Promise.all(e).then(function(){return t})}),y.then(i,p)};p()})})}})};t.exports={verifier:l,createVerify:n}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){function n(t,r,n){var i=!1,a=t.format||"general",c=!!t.protectAll,d=e.alloc(0);Object.defineProperty(this,"zip",{get:function(){return r.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===a},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return a},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return p(t.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return p(r)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(t,r){if(i)throw new Error("already final");return null!=t&&(t=o.asBuffer(t,r),d=d.length?e.concat([d,t],d.length+t.length):t),this}}),Object.defineProperty(this,"final",{value:function(y,g){if(i)return Promise.reject(new Error("already final"));this.update(y,g),i=!0;var v,m=Promise.resolve({}),E=r.enc;m=m.then(function(e){return t.cek&&(v=u.asKey(t.cek)),e}),m=m.then(function(e){var i=function(e,n){var i={};i=h(i,r),i=h(i,e.header);var a,c,l=e.key,f=i.alg;return 0===(i.alg||"").indexOf("ECDH-ES")?(a=l.keystore.temp(),c=e.epk?Promise.resolve(e.epk).then(function(t){e.header.epk=t.toJSON(!1,["kid"]),i.epk=t.toObject(!0,["kid"])}):a.generate("EC",l.get("crv")).then(function(t){e.header.epk=t.toJSON(!1,["kid"]),i.epk=t.toObject(!0,["kid"])})):c=Promise.resolve(),c=c.then(function(){var e,a;return"dir"===f&&n?(v=Promise.resolve(l),a=v.then(function(t){return E||(i.enc=r.enc=E=t.algorithms(u.MODE_ENCRYPT)[0]),{once:!0,direct:!0}})):(v||(E||(i.enc=r.enc=E=t.contentAlg),v=s(E)),a=v.then(function(t){return e=t.get("k",!0),l}),a=a.then(function(t){return t.wrap(f,e,i)})),a}),c=c.then(function(t){if(t.once&&!n)return Promise.reject(new Error("cannot use 'alg':'"+f+"' with multiple recipients"));var r,i={};return t.data&&(r=t.data,r=o.base64url.encode(r)),t.direct&&r?v=u.asKey({kty:"oct",k:r}):r&&(i.encrypted_key=r),e.header&&Object.keys(e.header).length&&(i.header=p(e.header||{})),t.header&&(i.header=h(i.header||{},t.header)),i})},a=Promise.all(n);return a=a.then(function(t){var e=1===t.length;return t=t.map(function(t){return i(t,e)}),Promise.all(t)}),a=a.then(function(t){return e.recipients=t.filter(function(t){return!!t}),e})});var C={};switch(m=m.then(function(e){var n,i,s,u;return s=p(r),c&&1===e.recipients.length||"compact"===a?(n={},n=h({},s,e.recipients[0].header),i=Object.keys(n).length,s=void 0,u=0,delete e.recipients[0].header,0===Object.keys(e.recipients[0]).length&&e.recipients.splice(0,1)):(n={},i=0,u=Object.keys(s).length,t.protect.forEach(function(t){t in s&&(n[t]=s[t],i++,delete s[t],u--)}),e.recipients=(e.recipients||[]).map(function(t){t=t||{};var e=t.header;return e&&(Object.keys(e).forEach(function(t){t in n&&delete e[t]}),Object.keys(e).length||delete t.header),t})),e.recipients&&0!==e.recipients.length||delete e.recipients,s&&u>0&&(C=h(C,s),e.unprotected=s),n&&i>0&&(C=h(C,n),n=JSON.stringify(n),e.protected=o.base64url.encode(n,"utf8")),e}),m=m.then(function(t){var r=d;return C.zip?"DEF"===C.zip?new Promise(function(n,i){try{var a=l.deflateRaw(e.from(r,"binary"));t.plaintext=a,n(t)}catch(t){i(t)}}):Promise.reject(new Error("unsupported 'zip' mode")):(t.plaintext=r,t)}),m=m.then(function(r){C.adata=r.protected,"aad"in t&&null!=t.aad&&(C.adata+="."+t.aad,C.adata=e.from(C.adata,"utf8"));var n=t.iv||o.randomBytes(f.NONCELENGTH[E]/8);"string"==typeof n&&(n=o.base64url.decode(n)),C.iv=n,"recipients"in r&&1===r.recipients.length&&(C.kdata=r.recipients[0].encrypted_key),"epu"in t&&null!=t.epu&&(C.epu=t.epu),"epv"in t&&null!=t.epv&&(C.epv=t.epv);var i=r.plaintext;return delete r.plaintext,v.then(function(e){var a=e.encrypt(E,i,C);return a=a.then(function(e){return r.iv=o.base64url.encode(n,"binary"),"aad"in t&&null!=t.aad&&(r.aad=t.aad),r.ciphertext=o.base64url.encode(e.data,"binary"),r.tag=o.base64url.encode(e.tag,"binary"),r})})}),a){case"compact":m=m.then(function(t){var e=new Array(5);return e[0]=t.protected,t.recipients&&t.recipients[0]&&(e[1]=t.recipients[0].encrypted_key),e[2]=t.iv,e[3]=t.ciphertext,e[4]=t.tag,e=e.join(".")});break;case"flattened":m=m.then(function(t){var e={},r=t.recipients&&t.recipients[0];return t.protected&&(e.protected=t.protected),t.unprotected&&(e.unprotected=t.unprotected),["header","encrypted_key"].forEach(function(t){r&&t in r&&r[t]&&("object"!=typeof r[t]||Object.keys(r[t]).length)&&(e[t]=r[t])}),t.aad&&(e.aad=t.aad),e.iv=t.iv,e.ciphertext=t.ciphertext,e.tag=t.tag,e});break;case"general":m=m.then(function(t){var e=t.recipients||[];return e=e.map(function(t){if(Object.keys(t).length)return t}),e=e.filter(function(t){return!!t}),e.length?t.recipients=e:delete t.recipients,t})}return m}})}function i(t,e){var r=t,i=1,a=e;if(0===arguments.length)throw new Error("at least one recipient must be provided");1===arguments.length?(a=t,i=0,r={}):u.isKey(t)||t&&"kty"in t||t&&"key"in t&&(u.isKey(t.key)||"kty"in t.key)?(a=t,i=0,r={}):r=p(t),Array.isArray(a)||(a=c(arguments,i)),r=h(p(d),r);var s=p(r.fields||{});switch(r.zip&&(s.zip="boolean"==typeof r.zip?!!r.zip&&"DEF":r.zip),r.format=(r.compact?"compact":r.format)||"general",r.format){case"compact":if("aad"in t)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(a.length>1)throw new Error("too many recipients for compact serialization")}var l=!1;if("compact"===r.format||"*"===r.protect)l=!0,r.protect=Object.keys(s).concat("enc");else if("string"==typeof r.protect)r.protect=[r.protect];else if(Array.isArray(r.protect))r.protect=r.protect.concat();else{if(r.protect)throw new Error("protect must be a list of fields");r.protect=[]}if(l&&1<a.length)throw new Error("too many recipients to protect all header parameters");return a=a.map(function(t,e){var r;return t&&"kty"in t?(r=u.asKey(t),r=r.then(function(t){return{key:t}})):t?(r=u.asKey(t.key),r=r.then(function(e){return{header:t.header,reference:t.reference,key:e}})):r=Promise.reject(new Error("missing key for recipient "+e)),t.epk&&(r=r.then(function(e){return u.asKey(t.epk).then(function(t){return e.epk=t,e})})),r=r.then(function(t){var r=t.key,n=t.header||{};t.header=n;var i={};if(i=h(i,s),i=h(i,t.header),i.alg||(i.alg=r.algorithms(u.MODE_WRAP)[0],n.alg=i.alg),!i.alg)return Promise.reject(new Error("key not valid for encrypting to recipient "+e));n.alg=i.alg;var a=t.reference;delete t.reference,void 0===a?(a=["kid","jku","x5c","x5t","x5u"].some(function(t){return t in n}),a=a?null:"kid"):"boolean"==typeof a&&(a=a?"kid":null);var o;if(a)if(o=r.toJSON(),"jwk"===a){if("oct"===r.kty)return Promise.reject(new Error("cannot embed key"));n.jwk=o}else a in o&&(n[a]=o[a]);return t=Object.freeze(t)})}),new n({aad:"aad"in r?o.base64url.encode(r.aad||""):null,contentAlg:r.contentAlg,format:r.format,protect:r.protect,cek:r.cek,iv:r.iv,protectAll:l},s,a)}/*!
 * jwe/encrypt.js - Encrypt to a JWE
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var a=r(5),o=r(4),s=r(63).generateCEK,u=r(16),c=r(63).slice,l=r(64),f=r(7),h=a.assign,p=a.clone,d=r(120);t.exports={encrypter:n,createEncrypt:i}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=u.assign({level:d,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==p)throw new Error(l[r]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?c.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=s.deflateSetDictionary(this.strm,i))!==p)throw new Error(l[r]);this._dict_set=!0}}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||l[r.err];return r.result}function a(t,e){return e=e||{},e.raw=!0,i(t,e)}function o(t,e){return e=e||{},e.gzip=!0,i(t,e)}var s=r(113),u=r(11),c=r(67),l=r(43),f=r(68),h=Object.prototype.toString,p=0,d=-1,y=0,g=8;n.prototype.push=function(t,e){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=c.string2buf(t):"[object ArrayBuffer]"===h.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(a),i.next_out=0,i.avail_out=a),1!==(r=s.deflate(i,n))&&r!==p)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(c.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===p):2!==n||(this.onEnd(p),i.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=n,e.deflate=i,e.deflateRaw=a,e.gzip=o},function(t,e,r){"use strict";function n(t,e){return t.msg=L[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(N.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){R._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,o(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,N.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=P(t.adler,e,i,r):2===t.state.wrap&&(t.adler=F(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,c=t.window,l=t.w_mask,f=t.prev,h=t.strstart+ut,p=c[a+o-1],d=c[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(r=e,c[r+o]===d&&c[r+o-1]===p&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<h);if(n=ut-(h-a),a=h-ut,n>o){if(t.match_start=e,o=n,n>=s)break;p=c[a+o-1],d=c[a+o]}}}while((e=f[e&l])>u&&0!=--i);return o<=t.lookahead?o:t.lookahead}function h(t){var e,r,n,i,a,o=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-ct)){N.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,r=t.hash_size,e=r;do{n=t.head[--e],t.head[e]=n>=o?n-o:0}while(--r);r=o,e=r;do{n=t.prev[--e],t.prev[e]=n>=o?n-o:0}while(--r);i+=o}if(0===t.strm.avail_in)break;if(r=l(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=st)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+st-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<st)););}while(t.lookahead<ct&&0!==t.strm.avail_in)}function p(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===U)return mt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,s(t,!1),0===t.strm.avail_out))return mt;if(t.strstart-t.block_start>=t.w_size-ct&&(s(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?Ct:bt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),mt)}function d(t,e){for(var r,n;;){if(t.lookahead<ct){if(h(t),t.lookahead<ct&&e===U)return mt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ct&&(t.match_length=f(t,r)),t.match_length>=st)if(n=R._tr_tally(t,t.strstart-t.match_start,t.match_length-st),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(s(t,!1),0===t.strm.avail_out))return mt}return t.insert=t.strstart<st-1?t.strstart:st-1,e===D?(s(t,!0),0===t.strm.avail_out?Ct:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?mt:Et}function y(t,e){for(var r,n,i;;){if(t.lookahead<ct){if(h(t),t.lookahead<ct&&e===U)return mt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=st-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ct&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===q||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),t.prev_length>=st&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-st,n=R._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=st-1,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return mt}else if(t.match_available){if(n=R._tr_tally(t,0,t.window[t.strstart-1]),n&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return mt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=R._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===D?(s(t,!0),0===t.strm.avail_out?Ct:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?mt:Et}function g(t,e){for(var r,n,i,a,o=t.window;;){if(t.lookahead<=ut){if(h(t),t.lookahead<=ut&&e===U)return mt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=st&&t.strstart>0&&(i=t.strstart-1,(n=o[i])===o[++i]&&n===o[++i]&&n===o[++i])){a=t.strstart+ut;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);t.match_length=ut-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=st?(r=R._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?Ct:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?mt:Et}function v(t,e){for(var r;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===U)return mt;break}if(t.match_length=0,r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return mt}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?Ct:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?mt:Et}function m(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function E(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=k[t.level].max_lazy,t.good_match=k[t.level].good_length,t.nice_match=k[t.level].nice_length,t.max_chain_length=k[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,t.match_available=0,t.ins_h=0}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new N.Buf16(2*at),this.dyn_dtree=new N.Buf16(2*(2*nt+1)),this.bl_tree=new N.Buf16(2*(2*it+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new N.Buf16(ot+1),this.heap=new N.Buf16(2*rt+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new N.Buf16(2*rt+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=X,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:gt,t.adler=2===e.wrap?0:1,e.last_flush=U,R._tr_init(e),V):n(t,M)}function S(t){var e=b(t);return e===V&&E(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?M:(t.state.gzhead=e,V):M}function A(t,e,r,i,a,o){if(!t)return M;var s=1;if(e===G&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),a<1||a>$||r!==J||i<8||i>15||e<0||e>9||o<0||o>Y)return n(t,M);8===i&&(i=9);var u=new C;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+st-1)/st),u.window=new N.Buf8(2*u.w_size),u.head=new N.Buf16(u.hash_size),u.prev=new N.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new N.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=o,u.method=r,S(t)}function T(t,e){return A(t,e,J,tt,et,Z)}function _(t,e){var r,s,l,f;if(!t||!t.state||e>K||e<0)return t?n(t,M):M;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===vt&&e!==D)return n(t,0===t.avail_out?H:M);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===ft)if(2===s.wrap)t.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=F(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ht):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),u(s,St),s.status=gt);else{var h=J+(s.w_bits-8<<4)<<8,p=-1;p=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,h|=p<<6,0!==s.strstart&&(h|=lt),h+=31-h%31,s.status=gt,c(s,h),0!==s.strstart&&(c(s,t.adler>>>16),c(s,65535&t.adler)),t.adler=1}if(s.status===ht)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),o(t),l=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=pt)}else s.status=pt;if(s.status===pt)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),o(t),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.gzindex=0,s.status=dt)}else s.status=dt;if(s.status===dt)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),o(t),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(t.adler=F(t.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.status=yt)}else s.status=yt;if(s.status===yt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(t),s.pending+2<=s.pending_buf_size&&(u(s,255&t.adler),u(s,t.adler>>8&255),t.adler=0,s.status=gt)):s.status=gt),0!==s.pending){if(o(t),0===t.avail_out)return s.last_flush=-1,V}else if(0===t.avail_in&&i(e)<=i(r)&&e!==D)return n(t,H);if(s.status===vt&&0!==t.avail_in)return n(t,H);if(0!==t.avail_in||0!==s.lookahead||e!==U&&s.status!==vt){var d=s.strategy===W?v(s,e):s.strategy===Q?g(s,e):k[s.level].func(s,e);if(d!==Ct&&d!==bt||(s.status=vt),d===mt||d===Ct)return 0===t.avail_out&&(s.last_flush=-1),V;if(d===Et&&(e===O?R._tr_align(s):e!==K&&(R._tr_stored_block(s,0,0,!1),e===x&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(t),0===t.avail_out))return s.last_flush=-1,V}return e!==D?V:s.wrap<=0?j:(2===s.wrap?(u(s,255&t.adler),u(s,t.adler>>8&255),u(s,t.adler>>16&255),u(s,t.adler>>24&255),u(s,255&t.total_in),u(s,t.total_in>>8&255),u(s,t.total_in>>16&255),u(s,t.total_in>>24&255)):(c(s,t.adler>>>16),c(s,65535&t.adler)),o(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?V:j)}function I(t){var e;return t&&t.state?(e=t.state.status)!==ft&&e!==ht&&e!==pt&&e!==dt&&e!==yt&&e!==gt&&e!==vt?n(t,M):(t.state=null,e===gt?n(t,z):V):M}function B(t,e){var r,n,i,o,s,u,c,l,f=e.length;if(!t||!t.state)return M;if(r=t.state,2===(o=r.wrap)||1===o&&r.status!==ft||r.lookahead)return M;for(1===o&&(t.adler=P(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(a(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new N.Buf8(r.w_size),N.arraySet(l,e,f-r.w_size,r.w_size,0),e=l,f=r.w_size),s=t.avail_in,u=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,h(r);r.lookahead>=st;){n=r.strstart,i=r.lookahead-(st-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+st-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=st-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=st-1,r.match_available=0,t.next_in=u,t.input=c,t.avail_in=s,r.wrap=o,V}var k,N=r(11),R=r(114),P=r(65),F=r(66),L=r(43),U=0,O=1,x=3,D=4,K=5,V=0,j=1,M=-2,z=-3,H=-5,G=-1,q=1,W=2,Q=3,Y=4,Z=0,X=2,J=8,$=9,tt=15,et=8,rt=286,nt=30,it=19,at=2*rt+1,ot=15,st=3,ut=258,ct=ut+st+1,lt=32,ft=42,ht=69,pt=73,dt=91,yt=103,gt=113,vt=666,mt=1,Et=2,Ct=3,bt=4,St=3;k=[new m(0,0,0,0,p),new m(4,4,8,4,d),new m(4,5,16,8,d),new m(4,6,32,32,d),new m(4,4,16,16,y),new m(8,16,32,32,y),new m(8,16,128,128,y),new m(8,32,128,256,y),new m(32,128,258,1024,y),new m(32,258,258,4096,y)],e.deflateInit=T,e.deflateInit2=A,e.deflateReset=S,e.deflateResetKeep=b,e.deflateSetHeader=w,e.deflate=_,e.deflateEnd=I,e.deflateSetDictionary=B,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function a(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function o(t){return t<256?at[t]:at[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>W-r?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=r-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function c(t,e,r){u(t,r[2*e],r[2*e+1])}function l(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function f(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var r,n,i,a,o,s,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,y=0;for(a=0;a<=q;a++)t.bl_count[a]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<G;r++)n=t.heap[r],a=u[2*u[2*n+1]+1]+1,a>d&&(a=d,y++),u[2*n+1]=a,n>c||(t.bl_count[a]++,o=0,n>=p&&(o=h[n-p]),s=u[2*n],t.opt_len+=s*(a+o),f&&(t.static_len+=s*(l[2*n+1]+o)));if(0!==y){do{for(a=d-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[d]--,y-=2}while(y>0);for(a=d;0!==a;a--)for(n=t.bl_count[a];0!==n;)(i=t.heap[--r])>c||(u[2*i+1]!==a&&(t.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}function p(t,e,r){var n,i,a=new Array(q+1),o=0;for(n=1;n<=q;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=l(a[s]++,s))}}function d(){var t,e,r,n,a,o=new Array(q+1);for(r=0,n=0;n<V-1;n++)for(st[n]=r,t=0;t<1<<$[n];t++)ot[r++]=n;for(ot[r-1]=n,a=0,n=0;n<16;n++)for(ut[n]=a,t=0;t<1<<tt[n];t++)at[a++]=n;for(a>>=7;n<z;n++)for(ut[n]=a<<7,t=0;t<1<<tt[n]-7;t++)at[256+a++]=n;for(e=0;e<=q;e++)o[e]=0;for(t=0;t<=143;)nt[2*t+1]=8,t++,o[8]++;for(;t<=255;)nt[2*t+1]=9,t++,o[9]++;for(;t<=279;)nt[2*t+1]=7,t++,o[7]++;for(;t<=287;)nt[2*t+1]=8,t++,o[8]++;for(p(nt,M+1,o),t=0;t<z;t++)it[2*t+1]=5,it[2*t]=l(t,5);ct=new i(nt,$,j+1,M,q),lt=new i(it,tt,0,z,q),ft=new i(new Array(0),et,0,H,Q)}function y(t){var e;for(e=0;e<M;e++)t.dyn_ltree[2*e]=0;for(e=0;e<z;e++)t.dyn_dtree[2*e]=0;for(e=0;e<H;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function v(t,e,r,n){g(t),n&&(s(t,r),s(t,~r)),P.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function m(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function E(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&m(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!m(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function C(t,e,r){var n,i,a,s,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?c(t,i,e):(a=ot[i],c(t,a+j+1,e),s=$[a],0!==s&&(i-=st[a],u(t,i,s)),n--,a=o(n),c(t,a,r),0!==(s=tt[a])&&(n-=ut[a],u(t,n,s)))}while(l<t.last_lit);c(t,Y,e)}function b(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=G,r=0;r<u;r++)0!==a[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=c<2?++c:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)E(t,a,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,E(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),p(a,c,t.bl_count)}function S(t,e,r){var n,i,a=-1,o=e[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++s<u&&i===o||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*Z]++):s<=10?t.bl_tree[2*X]++:t.bl_tree[2*J]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function w(t,e,r){var n,i,a=-1,o=e[1],s=0,l=7,f=4;for(0===o&&(l=138,f=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++s<l&&i===o)){if(s<f)do{c(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(c(t,i,t.bl_tree),s--),c(t,Z,t.bl_tree),u(t,s-3,2)):s<=10?(c(t,X,t.bl_tree),u(t,s-3,3)):(c(t,J,t.bl_tree),u(t,s-11,7));s=0,a=i,0===o?(l=138,f=3):i===o?(l=6,f=3):(l=7,f=4)}}function A(t){var e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=H-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function T(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;i<n;i++)u(t,t.bl_tree[2*rt[i]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,r-1)}function _(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return L;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return U;for(e=32;e<j;e++)if(0!==t.dyn_ltree[2*e])return U;return L}function I(t){ht||(d(),ht=!0),t.l_desc=new a(t.dyn_ltree,ct),t.d_desc=new a(t.dyn_dtree,lt),t.bl_desc=new a(t.bl_tree,ft),t.bi_buf=0,t.bi_valid=0,y(t)}function B(t,e,r,n){u(t,(x<<1)+(n?1:0),3),v(t,e,r,!0)}function k(t){u(t,D<<1,3),c(t,Y,nt),f(t)}function N(t,e,r,n){var i,a,o=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=_(t)),b(t,t.l_desc),b(t,t.d_desc),o=A(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?B(t,e,r,n):t.strategy===F||a===i?(u(t,(D<<1)+(n?1:0),3),C(t,nt,it)):(u(t,(K<<1)+(n?1:0),3),T(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),y(t),n&&g(t)}function R(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ot[r]+j+1)]++,t.dyn_dtree[2*o(e)]++),t.last_lit===t.lit_bufsize-1}var P=r(11),F=4,L=0,U=1,O=2,x=0,D=1,K=2,V=29,j=256,M=j+1+V,z=30,H=19,G=2*M+1,q=15,W=16,Q=7,Y=256,Z=16,X=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=new Array(2*(M+2));n(nt);var it=new Array(2*z);n(it);var at=new Array(512);n(at);var ot=new Array(256);n(ot);var st=new Array(V);n(st);var ut=new Array(z);n(ut);var ct,lt,ft,ht=!1;e._tr_init=I,e._tr_stored_block=B,e._tr_flush_block=N,e._tr_tally=R,e._tr_align=k},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=o.inflateInit2(this.strm,e.windowBits);if(r!==c.Z_OK)throw new Error(l[r]);if(this.header=new h,o.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):"[object ArrayBuffer]"===p.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=o.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(l[r])}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||l[r.err];return r.result}function a(t,e){return e=e||{},e.raw=!0,i(t,e)}var o=r(116),s=r(11),u=r(67),c=r(69),l=r(43),f=r(68),h=r(119),p=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,a,l,f=this.strm,h=this.options.chunkSize,d=this.options.dictionary,y=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?f.input=u.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(h),f.next_out=0,f.avail_out=h),r=o.inflate(f,c.Z_NO_FLUSH),r===c.Z_NEED_DICT&&d&&(r=o.inflateSetDictionary(this.strm,d)),r===c.Z_BUF_ERROR&&!0===y&&(r=c.Z_OK,y=!1),r!==c.Z_STREAM_END&&r!==c.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==c.Z_STREAM_END&&(0!==f.avail_in||n!==c.Z_FINISH&&n!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(i=u.utf8border(f.output,f.next_out),a=f.next_out-i,l=u.buf2string(f.output,i),f.next_out=a,f.avail_out=h-a,a&&s.arraySet(f.output,f.output,i,a,0),this.onData(l)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==c.Z_STREAM_END);return r===c.Z_STREAM_END&&(n=c.Z_FINISH),n===c.Z_FINISH?(r=o.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c.Z_OK):n!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),f.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=n,e.inflate=i,e.inflateRaw=a,e.ungzip=i},function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(yt),e.distcode=e.distdyn=new m.Buf32(gt),e.sane=1,e.back=-1,k):P}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):P}function s(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?P:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,o(t))):P}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=s(t,e),r!==k&&(t.state=null),r):P}function c(t){return u(t,vt)}function l(t){if(mt){var e;for(g=new m.Buf32(512),v=new m.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(S(A,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;S(T,t.lens,0,32,v,0,t.work,{bits:5}),mt=!1}t.lencode=g,t.lenbits=9,t.distcode=v,t.distbits=5}function f(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new m.Buf8(a.wsize)),n>=a.wsize?(m.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),m.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(m.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function h(t,e){var r,i,a,o,s,u,c,h,p,d,y,g,v,yt,gt,vt,mt,Et,Ct,bt,St,wt,At,Tt,_t=0,It=new m.Buf8(4),Bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return P;r=t.state,r.mode===Q&&(r.mode=Y),s=t.next_out,a=t.output,c=t.avail_out,o=t.next_in,i=t.input,u=t.avail_in,h=r.hold,p=r.bits,d=u,y=c,wt=k;t:for(;;)switch(r.mode){case x:if(0===r.wrap){r.mode=Y;break}for(;p<16;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(2&r.wrap&&35615===h){r.check=0,It[0]=255&h,It[1]=h>>>8&255,r.check=C(r.check,It,2,0),h=0,p=0,r.mode=D;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=ht;break}if((15&h)!==O){t.msg="unknown compression method",r.mode=ht;break}if(h>>>=4,p-=4,St=8+(15&h),0===r.wbits)r.wbits=St;else if(St>r.wbits){t.msg="invalid window size",r.mode=ht;break}r.dmax=1<<St,t.adler=r.check=1,r.mode=512&h?q:Q,h=0,p=0;break;case D:for(;p<16;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(r.flags=h,(255&r.flags)!==O){t.msg="unknown compression method",r.mode=ht;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ht;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(It[0]=255&h,It[1]=h>>>8&255,r.check=C(r.check,It,2,0)),h=0,p=0,r.mode=K;case K:for(;p<32;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.head&&(r.head.time=h),512&r.flags&&(It[0]=255&h,It[1]=h>>>8&255,It[2]=h>>>16&255,It[3]=h>>>24&255,r.check=C(r.check,It,4,0)),h=0,p=0,r.mode=V;case V:for(;p<16;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(It[0]=255&h,It[1]=h>>>8&255,r.check=C(r.check,It,2,0)),h=0,p=0,r.mode=j;case j:if(1024&r.flags){for(;p<16;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(It[0]=255&h,It[1]=h>>>8&255,r.check=C(r.check,It,2,0)),h=0,p=0}else r.head&&(r.head.extra=null);r.mode=M;case M:if(1024&r.flags&&(g=r.length,g>u&&(g=u),g&&(r.head&&(St=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),m.arraySet(r.head.extra,i,o,g,St)),512&r.flags&&(r.check=C(r.check,i,g,o)),u-=g,o+=g,r.length-=g),r.length))break t;r.length=0,r.mode=z;case z:if(2048&r.flags){if(0===u)break t;g=0;do{St=i[o+g++],r.head&&St&&r.length<65536&&(r.head.name+=String.fromCharCode(St))}while(St&&g<u);if(512&r.flags&&(r.check=C(r.check,i,g,o)),u-=g,o+=g,St)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=H;case H:if(4096&r.flags){if(0===u)break t;g=0;do{St=i[o+g++],r.head&&St&&r.length<65536&&(r.head.comment+=String.fromCharCode(St))}while(St&&g<u);if(512&r.flags&&(r.check=C(r.check,i,g,o)),u-=g,o+=g,St)break t}else r.head&&(r.head.comment=null);r.mode=G;case G:if(512&r.flags){for(;p<16;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ht;break}h=0,p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Q;break;case q:for(;p<32;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}t.adler=r.check=n(h),h=0,p=0,r.mode=W;case W:if(0===r.havedict)return t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=p,R;t.adler=r.check=1,r.mode=Q;case Q:if(e===I||e===B)break t;case Y:if(r.last){h>>>=7&p,p-=7&p,r.mode=ct;break}for(;p<3;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}switch(r.last=1&h,h>>>=1,p-=1,3&h){case 0:r.mode=Z;break;case 1:if(l(r),r.mode=rt,e===B){h>>>=2,p-=2;break t}break;case 2:r.mode=$;break;case 3:t.msg="invalid block type",r.mode=ht}h>>>=2,p-=2;break;case Z:for(h>>>=7&p,p-=7&p;p<32;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ht;break}if(r.length=65535&h,h=0,p=0,r.mode=X,e===B)break t;case X:r.mode=J;case J:if(g=r.length){if(g>u&&(g=u),g>c&&(g=c),0===g)break t;m.arraySet(a,i,o,g,s),u-=g,o+=g,c-=g,s+=g,r.length-=g;break}r.mode=Q;break;case $:for(;p<14;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(r.nlen=257+(31&h),h>>>=5,p-=5,r.ndist=1+(31&h),h>>>=5,p-=5,r.ncode=4+(15&h),h>>>=4,p-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ht;break}r.have=0,r.mode=tt;case tt:for(;r.have<r.ncode;){for(;p<3;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.lens[Bt[r.have++]]=7&h,h>>>=3,p-=3}for(;r.have<19;)r.lens[Bt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,At={bits:r.lenbits},wt=S(w,r.lens,0,19,r.lencode,0,r.work,At),r.lenbits=At.bits,wt){t.msg="invalid code lengths set",r.mode=ht;break}r.have=0,r.mode=et;case et:for(;r.have<r.nlen+r.ndist;){for(;_t=r.lencode[h&(1<<r.lenbits)-1],gt=_t>>>24,vt=_t>>>16&255,mt=65535&_t,!(gt<=p);){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(mt<16)h>>>=gt,p-=gt,r.lens[r.have++]=mt;else{if(16===mt){for(Tt=gt+2;p<Tt;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(h>>>=gt,p-=gt,0===r.have){t.msg="invalid bit length repeat",r.mode=ht;break}St=r.lens[r.have-1],g=3+(3&h),h>>>=2,p-=2}else if(17===mt){for(Tt=gt+3;p<Tt;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}h>>>=gt,p-=gt,St=0,g=3+(7&h),h>>>=3,p-=3}else{for(Tt=gt+7;p<Tt;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}h>>>=gt,p-=gt,St=0,g=11+(127&h),h>>>=7,p-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ht;break}for(;g--;)r.lens[r.have++]=St}}if(r.mode===ht)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ht;break}if(r.lenbits=9,At={bits:r.lenbits},wt=S(A,r.lens,0,r.nlen,r.lencode,0,r.work,At),r.lenbits=At.bits,wt){t.msg="invalid literal/lengths set",r.mode=ht;break}if(r.distbits=6,r.distcode=r.distdyn,At={bits:r.distbits},wt=S(T,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,At),r.distbits=At.bits,wt){t.msg="invalid distances set",r.mode=ht;break}if(r.mode=rt,e===B)break t;case rt:r.mode=nt;case nt:if(u>=6&&c>=258){t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=p,b(t,y),s=t.next_out,a=t.output,c=t.avail_out,o=t.next_in,i=t.input,u=t.avail_in,h=r.hold,p=r.bits,r.mode===Q&&(r.back=-1);break}for(r.back=0;_t=r.lencode[h&(1<<r.lenbits)-1],gt=_t>>>24,vt=_t>>>16&255,mt=65535&_t,!(gt<=p);){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(vt&&0==(240&vt)){for(Et=gt,Ct=vt,bt=mt;_t=r.lencode[bt+((h&(1<<Et+Ct)-1)>>Et)],gt=_t>>>24,vt=_t>>>16&255,mt=65535&_t,!(Et+gt<=p);){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}h>>>=Et,p-=Et,r.back+=Et}if(h>>>=gt,p-=gt,r.back+=gt,r.length=mt,0===vt){r.mode=ut;break}if(32&vt){r.back=-1,r.mode=Q;break}if(64&vt){t.msg="invalid literal/length code",r.mode=ht;break}r.extra=15&vt,r.mode=it;case it:if(r.extra){for(Tt=r.extra;p<Tt;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,p-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=at;case at:for(;_t=r.distcode[h&(1<<r.distbits)-1],gt=_t>>>24,vt=_t>>>16&255,mt=65535&_t,!(gt<=p);){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(0==(240&vt)){for(Et=gt,Ct=vt,bt=mt;_t=r.distcode[bt+((h&(1<<Et+Ct)-1)>>Et)],gt=_t>>>24,vt=_t>>>16&255,mt=65535&_t,!(Et+gt<=p);){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}h>>>=Et,p-=Et,r.back+=Et}if(h>>>=gt,p-=gt,r.back+=gt,64&vt){t.msg="invalid distance code",r.mode=ht;break}r.offset=mt,r.extra=15&vt,r.mode=ot;case ot:if(r.extra){for(Tt=r.extra;p<Tt;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,p-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ht;break}r.mode=st;case st:if(0===c)break t;if(g=y-c,r.offset>g){if((g=r.offset-g)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ht;break}g>r.wnext?(g-=r.wnext,v=r.wsize-g):v=r.wnext-g,g>r.length&&(g=r.length),yt=r.window}else yt=a,v=s-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do{a[s++]=yt[v++]}while(--g);0===r.length&&(r.mode=nt);break;case ut:if(0===c)break t;a[s++]=r.length,c--,r.mode=nt;break;case ct:if(r.wrap){for(;p<32;){if(0===u)break t;u--,h|=i[o++]<<p,p+=8}if(y-=c,t.total_out+=y,r.total+=y,y&&(t.adler=r.check=r.flags?C(r.check,a,y,s-y):E(r.check,a,y,s-y)),y=c,(r.flags?h:n(h))!==r.check){t.msg="incorrect data check",r.mode=ht;break}h=0,p=0}r.mode=lt;case lt:if(r.wrap&&r.flags){for(;p<32;){if(0===u)break t;u--,h+=i[o++]<<p,p+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ht;break}h=0,p=0}r.mode=ft;case ft:wt=N;break t;case ht:wt=F;break t;case pt:return L;case dt:default:return P}return t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=p,(r.wsize||y!==t.avail_out&&r.mode<ht&&(r.mode<ct||e!==_))&&f(t,t.output,t.next_out,y-t.avail_out)?(r.mode=pt,L):(d-=t.avail_in,y-=t.avail_out,t.total_in+=d,t.total_out+=y,r.total+=y,r.wrap&&y&&(t.adler=r.check=r.flags?C(r.check,a,y,t.next_out-y):E(r.check,a,y,t.next_out-y)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Q?128:0)+(r.mode===rt||r.mode===X?256:0),(0===d&&0===y||e===_)&&wt===k&&(wt=U),wt)}function p(t){if(!t||!t.state)return P;var e=t.state;return e.window&&(e.window=null),t.state=null,k}function d(t,e){var r;return t&&t.state?(r=t.state,0==(2&r.wrap)?P:(r.head=e,e.done=!1,k)):P}function y(t,e){var r,n,i=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==W?P:r.mode===W&&(n=1,(n=E(n,e,i,0))!==r.check)?F:f(t,e,i,i)?(r.mode=pt,L):(r.havedict=1,k)):P}var g,v,m=r(11),E=r(65),C=r(66),b=r(117),S=r(118),w=0,A=1,T=2,_=4,I=5,B=6,k=0,N=1,R=2,P=-2,F=-3,L=-4,U=-5,O=8,x=1,D=2,K=3,V=4,j=5,M=6,z=7,H=8,G=9,q=10,W=11,Q=12,Y=13,Z=14,X=15,J=16,$=17,tt=18,et=19,rt=20,nt=21,it=22,at=23,ot=24,st=25,ut=26,ct=27,lt=28,ft=29,ht=30,pt=31,dt=32,yt=852,gt=592,vt=15,mt=!0;e.inflateReset=o,e.inflateReset2=s,e.inflateResetKeep=a,e.inflateInit=c,e.inflateInit2=u,e.inflate=h,e.inflateEnd=p,e.inflateGetHeader=d,e.inflateSetDictionary=y,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,i,a,o,s,u,c,l,f,h,p,d,y,g,v,m,E,C,b,S,w,A,T,_;r=t.state,n=t.next_in,T=t.input,i=n+(t.avail_in-5),a=t.next_out,_=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,p=r.hold,d=r.bits,y=r.lencode,g=r.distcode,v=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{d<15&&(p+=T[n++]<<d,d+=8,p+=T[n++]<<d,d+=8),E=y[p&v];e:for(;;){if(C=E>>>24,p>>>=C,d-=C,0===(C=E>>>16&255))_[a++]=65535&E;else{if(!(16&C)){if(0==(64&C)){E=y[(65535&E)+(p&(1<<C)-1)];continue e}if(32&C){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}b=65535&E,C&=15,C&&(d<C&&(p+=T[n++]<<d,d+=8),b+=p&(1<<C)-1,p>>>=C,d-=C),d<15&&(p+=T[n++]<<d,d+=8,p+=T[n++]<<d,d+=8),E=g[p&m];r:for(;;){if(C=E>>>24,p>>>=C,d-=C,!(16&(C=E>>>16&255))){if(0==(64&C)){E=g[(65535&E)+(p&(1<<C)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&E,C&=15,d<C&&(p+=T[n++]<<d,(d+=8)<C&&(p+=T[n++]<<d,d+=8)),(S+=p&(1<<C)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=C,d-=C,C=a-o,S>C){if((C=S-C)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(w=0,A=h,0===f){if(w+=c-C,C<b){b-=C;do{_[a++]=h[w++]}while(--C);w=a-S,A=_}}else if(f<C){if(w+=c+f-C,(C-=f)<b){b-=C;do{_[a++]=h[w++]}while(--C);if(w=0,f<b){C=f,b-=C;do{_[a++]=h[w++]}while(--C);w=a-S,A=_}}}else if(w+=f-C,C<b){b-=C;do{_[a++]=h[w++]}while(--C);w=a-S,A=_}for(;b>2;)_[a++]=A[w++],_[a++]=A[w++],_[a++]=A[w++],b-=3;b&&(_[a++]=A[w++],b>1&&(_[a++]=A[w++]))}else{w=a-S;do{_[a++]=_[w++],_[a++]=_[w++],_[a++]=_[w++],b-=3}while(b>2);b&&(_[a++]=_[w++],b>1&&(_[a++]=_[w++]))}break}}break}}while(n<i&&a<s);b=d>>3,n-=b,d-=b<<3,p&=(1<<d)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<s?s-a+257:257-(a-s),r.hold=p,r.bits=d}},function(t,e,r){"use strict";var n=r(11),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,c,l,f,h){var p,d,y,g,v,m,E,C,b,S=h.bits,w=0,A=0,T=0,_=0,I=0,B=0,k=0,N=0,R=0,P=0,F=null,L=0,U=new n.Buf16(16),O=new n.Buf16(16),x=null,D=0;for(w=0;w<=15;w++)U[w]=0;for(A=0;A<u;A++)U[e[r+A]]++;for(I=S,_=15;_>=1&&0===U[_];_--);if(I>_&&(I=_),0===_)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(T=1;T<_&&0===U[T];T++);for(I<T&&(I=T),N=1,w=1;w<=15;w++)if(N<<=1,(N-=U[w])<0)return-1;if(N>0&&(0===t||1!==_))return-1;for(O[1]=0,w=1;w<15;w++)O[w+1]=O[w]+U[w];for(A=0;A<u;A++)0!==e[r+A]&&(f[O[e[r+A]]++]=A);if(0===t?(F=x=f,m=19):1===t?(F=i,L-=257,x=a,D-=257,m=256):(F=o,x=s,m=-1),P=0,A=0,w=T,v=l,B=I,k=0,y=-1,R=1<<I,g=R-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){E=w-k,f[A]<m?(C=0,b=f[A]):f[A]>m?(C=x[D+f[A]],b=F[L+f[A]]):(C=96,b=0),p=1<<w-k,d=1<<B,T=d;do{d-=p,c[v+(P>>k)+d]=E<<24|C<<16|b|0}while(0!==d);for(p=1<<w-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,A++,0==--U[w]){if(w===_)break;w=e[r+f[A]]}if(w>I&&(P&g)!==y){for(0===k&&(k=I),v+=T,B=w-k,N=1<<B;B+k<_&&!((N-=U[B+k])<=0);)B++,N<<=1;if(R+=1<<B,1===t&&R>852||2===t&&R>592)return 1;y=P&g,c[y]=I<<24|B<<16|v-l|0}}return 0!==P&&(c[v+P]=w-k<<24|64<<16|0),h.bits=I,0}},function(t,e,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},function(t,e,r){"use strict";/*!
 * jwe/defaults.js - Defaults for JWEs
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"};t.exports=n},function(t,e,r){"use strict";(function(e){function n(t,r){var n,i;if(s.isKey(t))n=t,i=n.keystore;else{if(!s.isKeyStore(t))throw new TypeError("Keystore must be provided");i=t}r=u(l,r),Object.defineProperty(this,"decrypt",{value:function(t,l){l=u({},r,l||{});var f=l.handlers||{},h=Object.keys(f),p=new o(l.algorithms);if("string"==typeof t)t=t.split("."),t={protected:t[0],recipients:[{encrypted_key:t[1]}],iv:t[2],ciphertext:t[3],tag:t[4]};else if(!t||"object"!=typeof t)throw new Error("invalid input");"encrypted_key"in t&&(t.recipients=[{encrypted_key:t.encrypted_key}]);var d,y=t.recipients||[{}];d=Promise.resolve(y);var g,v;d=d.then(function(e){if(t.protected){v=a.decode(t.protected).toString("utf8"),v=JSON.parse(v);var r=v.crit;if(r){if(!Array.isArray(r))return Promise.reject(new Error("Invalid 'crit' header"));for(var n=0;r.length>n;n++)if(-1===h.indexOf(r[n]))return Promise.reject(new Error("Critical extension is not supported: "+r[n]))}g=v,v=Object.keys(v)}else g={},v=[];return g=u(t.unprotected||{},g),e=e.map(function(t){var e=Promise.resolve(),r=t.header||{};return r=u(r,g),t.header=r,t.protected=v,p.match(r.alg)||(e=e.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.alg))})),p.match(r.enc)||(e=e.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.enc))})),r.epk&&(e=e.then(function(){return s.asKey(r.epk)}),e=e.then(function(t){r.epk=t.toObject(!1)})),e.then(function(){return t})}),Promise.all(e)});var m,E,C;return d=d.then(function(t){var e={};return new Promise(function(r,o){var u=function(){var c=t.shift();if(!c)return void o(new Error("no key found"));var l=Promise.resolve(c);l=l.then(function(t){var e=C=t.encrypted_key||"";return e=a.decode(e),m=n||i.get({use:"enc",alg:t.header.alg,kid:t.header.kid}),m?m.unwrap(t.header.alg,e,t.header):Promise.reject()}),l=l.then(function(t){E={kty:"oct",k:a.encode(t)},E=s.asKey(E),e.key=m,e.header=c.header,e.protected=c.protected,r(e)}),l.catch(u)};u()})}),d=d.then(function(e){return e.iv=t.iv,e.tag=t.tag,e.ciphertext=t.ciphertext,e}),d=d.then(function(t){var e=[];return h.forEach(function(r){r=f[r];var n;"function"==typeof r?n=r(t):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(t)),n&&e.push(Promise.resolve(n))}),Promise.all(e).then(function(){return t})}),d=d.then(function(t){return e.isBuffer(t.ciphertext)||(t.ciphertext=a.decode(t.ciphertext)),t}),d=d.then(function(e){var r=t.protected;"aad"in t&&null!=t.aad&&(r+="."+t.aad);var n={iv:e.iv,adata:r,tag:e.tag,kdata:C,epu:e.epu,epv:e.epv},i=e.ciphertext;return delete e.iv,delete e.tag,delete e.ciphertext,E.then(function(t){return t.decrypt(e.header.enc,i,n).then(function(t){return e.payload=e.plaintext=t,e})})}),d=d.then(function(t){return"DEF"===t.header.zip?new Promise(function(r,n){try{var i=c.inflateRaw(e.from(t.plaintext));t.payload=t.plaintext=e.from(i),r(t)}catch(t){n(t)}}):t}),d=d.then(function(t){var e=[];return h.forEach(function(r){r=f[r];var n;"object"==typeof r&&"function"==typeof r.complete&&(n=r.complete(t)),n&&e.push(Promise.resolve(n))}),Promise.all(e).then(function(){return t})})}})}function i(t,e){return new n(t,e)}/*!
 * jwe/decrypt.js - Decrypt from a JWE
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var a=r(22),o=r(62),s=r(16),u=r(8),c=r(64),l={algorithms:"*"};t.exports={decrypter:n,createDecrypt:i}}).call(e,r(0).Buffer)},function(t,e,r){"use strict";(function(e){/*!
 * parse/index.js - JOSE Parser Entry Point
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var n=r(123),i=r(124),a=t.exports=function(t){if(e.isBuffer(t))return n(t.toString("ascii"));if("string"==typeof t)return n(t);if(t)return i(t);throw new TypeError("invalid input")};a.compact=n,a.json=i}).call(e,r(0).Buffer)},function(t,e,r){"use strict";function n(t){var e,r,n=t.split(".");if(3===n.length)e="JWS",r=function(e,r){return i.JWS.createVerify(e).verify(t,r)};else{if(5!==n.length)throw new TypeError("invalid jose serialization");e="JWE",r=function(e,r){return i.JWE.createDecrypt(e).decrypt(t,r)}}var a;return a=i.util.base64url.decode(n[0],"utf8"),a=JSON.parse(a),{type:e,format:"compact",input:t,header:a,perform:r}}/*!
 * parse/compact.js - JOSE Compact Serialization Parser
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i={JWE:r(42),JWS:r(27),util:r(4)};t.exports=n},function(t,e,r){"use strict";function n(t){var e,r,n;if("signatures"in t||"signature"in t)e="JWS",r=function(e,r){return a.JWS.createVerify(e).verify(t,r)},n=t.signatures||[{protected:t.protected,header:t.header,signature:t.signature}],n=n.map(function(t){var e={};t.header&&(e=i(e,t.header));var r;return t.protected&&(r=t.protected,r=a.util.base64url.decode(r,"utf8"),r=JSON.parse(r),e=i(e,r)),e});else if("ciphertext"in t){e="JWE",r=function(e,r){return a.JWE.createDecrypt(e).decrypt(t,r)};var o={};t.protected&&(o.protected=t.protected,o.protected=a.util.base64url.decode(o.protected,"utf8"),o.protected=JSON.parse(o.protected)),t.unprotected&&(o.unprotected=t.unprotected),n=t.recipients||[{}],n=n.map(function(t){var e={};return t.header&&(e=i(e,t.header)),o.unprotected&&(e=i(e,o.unprotected)),o.protected&&(e=i(e,o.protected)),e})}return{type:e,format:"json",input:t,all:n,perform:r}}/*!
 * parse/compact.js - JOSE JSON Serialization Parser
 *
 * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.
 */
var i=r(8),a={JWE:r(42),JWS:r(27),util:r(4)};t.exports=n}])});